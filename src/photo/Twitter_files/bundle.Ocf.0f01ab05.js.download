(window.webpackJsonp=window.webpackJsonp||[]).push([[61,157],{"+ZX+":function(e,t,s){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var a=s("dEMF"),n=s("1TxV"),r=s("Rl48");function i(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,s){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,s);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return c(this,e,t,s)}function c(e,t,s,a){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,s,a){if(t.byteLength,s<0||t.byteLength<s)throw new RangeError("'offset' is out of bounds");if(t.byteLength<s+(a||0))throw new RangeError("'length' is out of bounds");t=void 0===s&&void 0===a?new Uint8Array(t):void 0===a?new Uint8Array(t,s):new Uint8Array(t,s,a);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=h(e,t);return e}(e,t,s,a):"string"==typeof t?function(e,t,s){"string"==typeof s&&""!==s||(s="utf8");if(!l.isEncoding(s))throw new TypeError('"encoding" must be a valid string encoding');var a=0|_(t,s),n=(e=o(e,a)).write(t,s);n!==a&&(e=e.slice(0,n));return e}(e,t,s):function(e,t){if(l.isBuffer(t)){var s=0|p(t.length);return 0===(e=o(e,s)).length||t.copy(e,0,0,s),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(a=t.length)!=a?o(e,0):h(e,t);if("Buffer"===t.type&&r(t.data))return h(e,t.data)}var a;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(d(t),e=o(e,t<0?0:0|p(t)),!l.TYPED_ARRAY_SUPPORT)for(var s=0;s<t;++s)e[s]=0;return e}function h(e,t){var s=t.length<0?0:0|p(t.length);e=o(e,s);for(var a=0;a<s;a+=1)e[a]=255&t[a];return e}function p(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function _(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var s=e.length;if(0===s)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":case void 0:return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*s;case"hex":return s>>>1;case"base64":return z(e).length;default:if(a)return M(e).length;t=(""+t).toLowerCase(),a=!0}}function m(e,t,s){var a=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===s||s>this.length)&&(s=this.length),s<=0)return"";if((s>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,s);case"utf8":case"utf-8":return S(this,t,s);case"ascii":return T(this,t,s);case"latin1":case"binary":return A(this,t,s);case"base64":return I(this,t,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,s);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function b(e,t,s){var a=e[t];e[t]=e[s],e[s]=a}function g(e,t,s,a,n){if(0===e.length)return-1;if("string"==typeof s?(a=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),s=+s,isNaN(s)&&(s=n?0:e.length-1),s<0&&(s=e.length+s),s>=e.length){if(n)return-1;s=e.length-1}else if(s<0){if(!n)return-1;s=0}if("string"==typeof t&&(t=l.from(t,a)),l.isBuffer(t))return 0===t.length?-1:f(e,t,s,a,n);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,s):Uint8Array.prototype.lastIndexOf.call(e,t,s):f(e,[t],s,a,n);throw new TypeError("val must be string, number or Buffer")}function f(e,t,s,a,n){var r,i=1,o=e.length,l=t.length;if(void 0!==a&&("ucs2"===(a=String(a).toLowerCase())||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(e.length<2||t.length<2)return-1;i=2,o/=2,l/=2,s/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(n){var d=-1;for(r=s;r<o;r++)if(c(e,r)===c(t,-1===d?0:r-d)){if(-1===d&&(d=r),r-d+1===l)return d*i}else-1!==d&&(r-=r-d),d=-1}else for(s+l>o&&(s=o-l),r=s;r>=0;r--){for(var u=!0,h=0;h<l;h++)if(c(e,r+h)!==c(t,h)){u=!1;break}if(u)return r}return-1}function k(e,t,s,a){s=Number(s)||0;var n=e.length-s;a?(a=Number(a))>n&&(a=n):a=n;var r=t.length;if(r%2!=0)throw new TypeError("Invalid hex string");a>r/2&&(a=r/2);for(var i=0;i<a;++i){var o=parseInt(t.substr(2*i,2),16);if(isNaN(o))return i;e[s+i]=o}return i}function y(e,t,s,a){return H(M(t,e.length-s),e,s,a)}function v(e,t,s,a){return H(function(e){for(var t=[],s=0;s<e.length;++s)t.push(255&e.charCodeAt(s));return t}(t),e,s,a)}function w(e,t,s,a){return v(e,t,s,a)}function E(e,t,s,a){return H(z(t),e,s,a)}function C(e,t,s,a){return H(function(e,t){for(var s,a,n,r=[],i=0;i<e.length&&!((t-=2)<0);++i)a=(s=e.charCodeAt(i))>>8,n=s%256,r.push(n),r.push(a);return r}(t,e.length-s),e,s,a)}function I(e,t,s){return 0===t&&s===e.length?a.fromByteArray(e):a.fromByteArray(e.slice(t,s))}function S(e,t,s){s=Math.min(e.length,s);for(var a=[],n=t;n<s;){var r,i,o,l,c=e[n],d=null,u=c>239?4:c>223?3:c>191?2:1;if(n+u<=s)switch(u){case 1:c<128&&(d=c);break;case 2:128==(192&(r=e[n+1]))&&(l=(31&c)<<6|63&r)>127&&(d=l);break;case 3:r=e[n+1],i=e[n+2],128==(192&r)&&128==(192&i)&&(l=(15&c)<<12|(63&r)<<6|63&i)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:r=e[n+1],i=e[n+2],o=e[n+3],128==(192&r)&&128==(192&i)&&128==(192&o)&&(l=(15&c)<<18|(63&r)<<12|(63&i)<<6|63&o)>65535&&l<1114112&&(d=l)}null===d?(d=65533,u=1):d>65535&&(d-=65536,a.push(d>>>10&1023|55296),d=56320|1023&d),a.push(d),n+=u}return function(e){var t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);var s="",a=0;for(;a<t;)s+=String.fromCharCode.apply(String,e.slice(a,a+=x));return s}(a)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=i(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,s){return c(null,e,t,s)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,s){return function(e,t,s,a){return d(t),t<=0?o(e,t):void 0!==s?"string"==typeof a?o(e,t).fill(s,a):o(e,t).fill(s):o(e,t)}(null,e,t,s)},l.allocUnsafe=function(e){return u(null,e)},l.allocUnsafeSlow=function(e){return u(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var s=e.length,a=t.length,n=0,r=Math.min(s,a);n<r;++n)if(e[n]!==t[n]){s=e[n],a=t[n];break}return s<a?-1:a<s?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!r(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var s;if(void 0===t)for(t=0,s=0;s<e.length;++s)t+=e[s].length;var a=l.allocUnsafe(t),n=0;for(s=0;s<e.length;++s){var i=e[s];if(!l.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(a,n),n+=i.length}return a},l.byteLength=_,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):m.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",s=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,s).match(/.{2}/g).join(" "),this.length>s&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,s,a,n){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===s&&(s=e?e.length:0),void 0===a&&(a=0),void 0===n&&(n=this.length),t<0||s>e.length||a<0||n>this.length)throw new RangeError("out of range index");if(a>=n&&t>=s)return 0;if(a>=n)return-1;if(t>=s)return 1;if(this===e)return 0;for(var r=(n>>>=0)-(a>>>=0),i=(s>>>=0)-(t>>>=0),o=Math.min(r,i),c=this.slice(a,n),d=e.slice(t,s),u=0;u<o;++u)if(c[u]!==d[u]){r=c[u],i=d[u];break}return r<i?-1:i<r?1:0},l.prototype.includes=function(e,t,s){return-1!==this.indexOf(e,t,s)},l.prototype.indexOf=function(e,t,s){return g(this,e,t,s,!0)},l.prototype.lastIndexOf=function(e,t,s){return g(this,e,t,s,!1)},l.prototype.write=function(e,t,s,a){if(void 0===t)a="utf8",s=this.length,t=0;else if(void 0===s&&"string"==typeof t)a=t,s=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(s)?(s|=0,void 0===a&&(a="utf8")):(a=s,s=void 0)}var n=this.length-t;if((void 0===s||s>n)&&(s=n),e.length>0&&(s<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var r=!1;;)switch(a){case"hex":return k(this,e,t,s);case"utf8":case"utf-8":return y(this,e,t,s);case"ascii":return v(this,e,t,s);case"latin1":case"binary":return w(this,e,t,s);case"base64":return E(this,e,t,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,s);default:if(r)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),r=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function T(e,t,s){var a="";s=Math.min(e.length,s);for(var n=t;n<s;++n)a+=String.fromCharCode(127&e[n]);return a}function A(e,t,s){var a="";s=Math.min(e.length,s);for(var n=t;n<s;++n)a+=String.fromCharCode(e[n]);return a}function O(e,t,s){var a=e.length;(!t||t<0)&&(t=0),(!s||s<0||s>a)&&(s=a);for(var n="",r=t;r<s;++r)n+=V(e[r]);return n}function P(e,t,s){for(var a=e.slice(t,s),n="",r=0;r<a.length;r+=2)n+=String.fromCharCode(a[r]+256*a[r+1]);return n}function N(e,t,s){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>s)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,s,a,n,r){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<r)throw new RangeError('"value" argument is out of bounds');if(s+a>e.length)throw new RangeError("Index out of range")}function R(e,t,s,a){t<0&&(t=65535+t+1);for(var n=0,r=Math.min(e.length-s,2);n<r;++n)e[s+n]=(t&255<<8*(a?n:1-n))>>>8*(a?n:1-n)}function F(e,t,s,a){t<0&&(t=4294967295+t+1);for(var n=0,r=Math.min(e.length-s,4);n<r;++n)e[s+n]=t>>>8*(a?n:3-n)&255}function L(e,t,s,a,n,r){if(s+a>e.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function B(e,t,s,a,r){return r||L(e,0,s,4),n.write(e,t,s,a,23,4),s+4}function U(e,t,s,a,r){return r||L(e,0,s,8),n.write(e,t,s,a,52,8),s+8}l.prototype.slice=function(e,t){var s,a=this.length;if((e=~~e)<0?(e+=a)<0&&(e=0):e>a&&(e=a),(t=void 0===t?a:~~t)<0?(t+=a)<0&&(t=0):t>a&&(t=a),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(s=this.subarray(e,t)).__proto__=l.prototype;else{var n=t-e;s=new l(n,void 0);for(var r=0;r<n;++r)s[r]=this[r+e]}return s},l.prototype.readUIntLE=function(e,t,s){e|=0,t|=0,s||N(e,t,this.length);for(var a=this[e],n=1,r=0;++r<t&&(n*=256);)a+=this[e+r]*n;return a},l.prototype.readUIntBE=function(e,t,s){e|=0,t|=0,s||N(e,t,this.length);for(var a=this[e+--t],n=1;t>0&&(n*=256);)a+=this[e+--t]*n;return a},l.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,s){e|=0,t|=0,s||N(e,t,this.length);for(var a=this[e],n=1,r=0;++r<t&&(n*=256);)a+=this[e+r]*n;return a>=(n*=128)&&(a-=Math.pow(2,8*t)),a},l.prototype.readIntBE=function(e,t,s){e|=0,t|=0,s||N(e,t,this.length);for(var a=t,n=1,r=this[e+--a];a>0&&(n*=256);)r+=this[e+--a]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var s=this[e]|this[e+1]<<8;return 32768&s?4294901760|s:s},l.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var s=this[e+1]|this[e]<<8;return 32768&s?4294901760|s:s},l.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),n.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),n.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),n.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),n.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,s,a){(e=+e,t|=0,s|=0,a)||D(this,e,t,s,Math.pow(2,8*s)-1,0);var n=1,r=0;for(this[t]=255&e;++r<s&&(n*=256);)this[t+r]=e/n&255;return t+s},l.prototype.writeUIntBE=function(e,t,s,a){(e=+e,t|=0,s|=0,a)||D(this,e,t,s,Math.pow(2,8*s)-1,0);var n=s-1,r=1;for(this[t+n]=255&e;--n>=0&&(r*=256);)this[t+n]=e/r&255;return t+s},l.prototype.writeUInt8=function(e,t,s){return e=+e,t|=0,s||D(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,s){return e=+e,t|=0,s||D(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,s){return e=+e,t|=0,s||D(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,s){return e=+e,t|=0,s||D(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,s){return e=+e,t|=0,s||D(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,s,a){if(e=+e,t|=0,!a){var n=Math.pow(2,8*s-1);D(this,e,t,s,n-1,-n)}var r=0,i=1,o=0;for(this[t]=255&e;++r<s&&(i*=256);)e<0&&0===o&&0!==this[t+r-1]&&(o=1),this[t+r]=(e/i>>0)-o&255;return t+s},l.prototype.writeIntBE=function(e,t,s,a){if(e=+e,t|=0,!a){var n=Math.pow(2,8*s-1);D(this,e,t,s,n-1,-n)}var r=s-1,i=1,o=0;for(this[t+r]=255&e;--r>=0&&(i*=256);)e<0&&0===o&&0!==this[t+r+1]&&(o=1),this[t+r]=(e/i>>0)-o&255;return t+s},l.prototype.writeInt8=function(e,t,s){return e=+e,t|=0,s||D(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,s){return e=+e,t|=0,s||D(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,s){return e=+e,t|=0,s||D(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,s){return e=+e,t|=0,s||D(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,s){return e=+e,t|=0,s||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,s){return B(this,e,t,!0,s)},l.prototype.writeFloatBE=function(e,t,s){return B(this,e,t,!1,s)},l.prototype.writeDoubleLE=function(e,t,s){return U(this,e,t,!0,s)},l.prototype.writeDoubleBE=function(e,t,s){return U(this,e,t,!1,s)},l.prototype.copy=function(e,t,s,a){if(s||(s=0),a||0===a||(a=this.length),t>=e.length&&(t=e.length),t||(t=0),a>0&&a<s&&(a=s),a===s)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw new RangeError("sourceStart out of bounds");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-t<a-s&&(a=e.length-t+s);var n,r=a-s;if(this===e&&s<t&&t<a)for(n=r-1;n>=0;--n)e[n+t]=this[n+s];else if(r<1e3||!l.TYPED_ARRAY_SUPPORT)for(n=0;n<r;++n)e[n+t]=this[n+s];else Uint8Array.prototype.set.call(e,this.subarray(s,s+r),t);return r},l.prototype.fill=function(e,t,s,a){if("string"==typeof e){if("string"==typeof t?(a=t,t=0,s=this.length):"string"==typeof s&&(a=s,s=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!l.isEncoding(a))throw new TypeError("Unknown encoding: "+a)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<s)throw new RangeError("Out of range index");if(s<=t)return this;var r;if(t>>>=0,s=void 0===s?this.length:s>>>0,e||(e=0),"number"==typeof e)for(r=t;r<s;++r)this[r]=e;else{var i=l.isBuffer(e)?e:M(new l(e,a).toString()),o=i.length;for(r=0;r<s-t;++r)this[r+t]=i[r%o]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function M(e,t){var s;t=t||1/0;for(var a=e.length,n=null,r=[],i=0;i<a;++i){if((s=e.charCodeAt(i))>55295&&s<57344){if(!n){if(s>56319){(t-=3)>-1&&r.push(239,191,189);continue}if(i+1===a){(t-=3)>-1&&r.push(239,191,189);continue}n=s;continue}if(s<56320){(t-=3)>-1&&r.push(239,191,189),n=s;continue}s=65536+(n-55296<<10|s-56320)}else n&&(t-=3)>-1&&r.push(239,191,189);if(n=null,s<128){if((t-=1)<0)break;r.push(s)}else if(s<2048){if((t-=2)<0)break;r.push(s>>6|192,63&s|128)}else if(s<65536){if((t-=3)<0)break;r.push(s>>12|224,s>>6&63|128,63&s|128)}else{if(!(s<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}}return r}function z(e){return a.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function H(e,t,s,a){for(var n=0;n<a&&!(n+s>=t.length||n>=e.length);++n)t[n+s]=e[n];return n}}).call(this,s("fRV1"))},"180P":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const a=e=>{const t=(JSON.stringify(e)||"").split("");t.sort();const s=t.join("");return n(s,0).toString()},n=(e,t)=>{const s="string"==typeof e?e:String(e);let a=t;for(let e=0;e<s.length;e++){a=(a<<5)-a+s.charCodeAt(e),a&=a}return a}},"1TxV":function(e,t){t.read=function(e,t,s,a,n){var r,i,o=8*n-a-1,l=(1<<o)-1,c=l>>1,d=-7,u=s?n-1:0,h=s?-1:1,p=e[t+u];for(u+=h,r=p&(1<<-d)-1,p>>=-d,d+=o;d>0;r=256*r+e[t+u],u+=h,d-=8);for(i=r&(1<<-d)-1,r>>=-d,d+=a;d>0;i=256*i+e[t+u],u+=h,d-=8);if(0===r)r=1-c;else{if(r===l)return i?NaN:1/0*(p?-1:1);i+=Math.pow(2,a),r-=c}return(p?-1:1)*i*Math.pow(2,r-a)},t.write=function(e,t,s,a,n,r){var i,o,l,c=8*r-n-1,d=(1<<c)-1,u=d>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=a?0:r-1,_=a?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,i=d):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),(t+=i+u>=1?h/l:h*Math.pow(2,1-u))*l>=2&&(i++,l/=2),i+u>=d?(o=0,i=d):i+u>=1?(o=(t*l-1)*Math.pow(2,n),i+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,n),i=0));n>=8;e[s+p]=255&o,p+=_,o/=256,n-=8);for(i=i<<n|o,c+=n;c>0;e[s+p]=255&i,p+=_,i/=256,c-=8);e[s+p-_]|=128*m}},"2Daw":function(e,t,s){"use strict";s.d(t,"a",(function(){return v}));var a=s("KEM+"),n=s.n(a),r=s("ERkP"),i=s("LCtV"),o=s("3XMw"),l=s.n(o),c=s("VPdC"),d=s("pKoL"),u=s("MWbm"),h=s("rFBM"),p=s("/yvb"),_=s("9Xij"),m=s("rHpw"),b=s("hOZg"),g=s("Mbn/"),f=s("T8pk");const k=l.a.b87ca51a,y=l.a.eebff22c;class v extends r.Component{render(){const{borderRadius:e,maskStyle:t,mediaItem:s,onAddMediaFiles:a,onCrop:n,onRemove:i,rootStyle:o,withDragDrop:l}=this.props,c=s&&!s.uploader,d=r.createElement(r.Fragment,null,this._renderPreview(),c?null:r.createElement(r.Fragment,null,r.createElement(u.a,{style:[E.mask,t,w[e]]}),r.createElement(u.a,{style:E.mediaPicker},this._renderMediaEdit(),n?this._renderMediaCrop():null,i?this._renderMediaRemove():null)));return r.createElement(u.a,{style:[E.container,o,w[e]]},l&&a?r.createElement(h.a,{onFilesAdded:a,style:[E.dragDropContainer,w[e]]},d):d)}_renderMediaRemove(){const{onRemove:e}=this.props;return r.createElement(p.a,{accessibilityLabel:k,hoverLabel:{label:k},icon:r.createElement(b.a,null),onPress:e,style:E.rightButton,type:"invertedText"})}_renderMediaCrop(){const{onCrop:e,onRemove:t}=this.props;return r.createElement(p.a,{accessibilityLabel:y,icon:r.createElement(g.a,null),onPress:e,style:t?E.middleButton:E.rightButton,type:"invertedText"})}_renderMediaEdit(){const{acceptGifs:e,acceptVideo:t,accessibilityLabel:s,onAddMediaFiles:a,onEdit:n}=this.props,i=r.createElement(f.a,null);return a?r.createElement(c.a,{acceptGifs:e,acceptVideo:t,accessibilityLabel:s,icon:i,onChange:a,type:"invertedText"}):r.createElement(p.a,{accessibilityLabel:s,icon:i,onPress:n,style:E.edit,type:"invertedText"})}_renderPreview(){const{aspectRatio:e,borderRadius:t,currentContent:s,mediaItem:a}=this.props;return a?r.createElement(_.a,{ratio:e},r.createElement(d.a,{borderRadius:t,enableGif:!1,mediaItem:a,style:E.mediaPreview,withCloseButton:!1})):s}}n()(v,"defaultProps",{acceptGifs:!1,acceptVideo:!1,aspectRatio:1,borderRadius:i.a.NONE});const w=m.a.create((e=>({infinite:{borderRadius:e.borderRadii.infinite},medium:{borderRadius:e.borderRadii.small},none:{borderRadius:e.borderRadii.none}}))),E=m.a.create((e=>({mediaPreview:{height:"100%"},mediaPicker:{alignItems:"center",flexDirection:"row",height:"100%",justifyContent:"center",opacity:.75,position:"absolute",top:0,width:"100%"},rightButton:{marginLeft:e.spaces.space32},middleButton:{marginLeft:e.spaces.space32,marginRight:`-${e.spaces.space12}`},mask:{backgroundColor:e.colors.translucentBlack30,height:"100%",position:"absolute",top:0,width:"100%"},container:{justifyContent:"center",overflow:"hidden"},dragDropContainer:{borderWidth:e.borderWidths.medium,borderColor:e.colors.transparent,borderStyle:"solid"},edit:{margin:`-${e.spaces.space12}`}})))},"3GUV":function(e,t,s){"use strict";var a=s("ERkP"),n=s("rHpw"),r=s("MWbm");class i extends a.Component{shouldComponentUpdate(){return!1}render(){return a.createElement(r.a,{style:o.root})}}const o=n.a.create((e=>({root:{height:5*e.lineHeightsPx.body}})));t.a=i},"53j7":function(e,t,s){"use strict";s.d(t,"f",(function(){return g})),s.d(t,"g",(function(){return f})),s.d(t,"a",(function(){return y})),s.d(t,"c",(function(){return w})),s.d(t,"b",(function(){return C})),s.d(t,"d",(function(){return S})),s.d(t,"e",(function(){return x})),s.d(t,"h",(function(){return T})),s.d(t,"i",(function(){return O})),s.d(t,"j",(function(){return P}));s("kYxP");var a=s("oEOe"),n=s("AspN"),r=s("/kEJ"),i=s("XMGw"),o=s("Ssj5");const l=`${i.a}/profile`,c=`rweb/${l}`,d=e=>`${c}/${e}`,u=a.a(c,"REMOVE_PROFILE_BANNER"),h=a.a(c,"UPDATE_PROFILE"),p=a.a(c,"UPDATE_PROFILE_AVATAR"),_=a.a(c,"UPDATE_PROFILE_BANNER"),m=a.a(c,"UPLOAD_MEDIA"),b={avatarMediaId:null,bannerMediaId:null,isUploading:!1};const g=e=>e[l].avatarMediaId,f=e=>e[l].bannerMediaId,k=d("ADD_AVATAR_MEDIA"),y=e=>({meta:{mediaId:e},type:k}),v=d("REMOVE_AVATAR_MEDIA"),w=e=>({meta:{mediaId:e},type:v}),E=d("ADD_BANNER_MEDIA"),C=e=>({meta:{mediaId:e},type:E}),I=d("REMOVE_BANNER_MEDIA"),S=e=>({meta:{mediaId:e},type:I}),x=e=>(t,s,{api:n})=>a.b(t,{params:e,request:n.Settings.removeProfileBanner})({actionTypes:u,context:"ACTION_REMOVE_USER_BANNER"},(e=>{if(e)return[Object(r.c)({users:{[e.id_str]:{...e,profile_banner_url:null}}})]})),T=e=>(t,s,{api:n})=>a.b(t,{params:e,request:n.Settings.updateProfile})({actionTypes:h,context:"ACTION_UPDATE_PROFILE_SETTINGS"},(e=>{if(e&&e.entities)return[Object(r.c)(e.entities)]})),A=(e,t,s)=>i=>(o,l,{api:c})=>{o({type:m.REQUEST});const d=n.m(i);return o(d).then((([n])=>{o([{type:m.SUCCESS},{type:e.REQUEST}]);return a.b(o,{params:{media_id:n.uploadId},request:s(c)})({actionTypes:h,context:t},(e=>{if(e)return[Object(r.c)({users:{[e.id_str]:e}})]}))}),(e=>(o({type:m.FAILURE}),Promise.reject(e))))},O=A(p,"ACTION_UPDATE_USER_AVATAR",(e=>e.Settings.updateProfileAvatar)),P=A(_,"ACTION_UPDATE_USER_BANNER",(e=>e.Settings.updateProfileBanner));o.a.register({[l]:function(e=b,t={}){switch(t.type){case k:return{...e,avatarMediaId:t.meta.mediaId};case v:return{...e,avatarMediaId:null};case E:return{...e,bannerMediaId:t.meta.mediaId};case I:return{...e,bannerMediaId:null};case m.REQUEST:return{...e,isUploading:!0};case m.FAILURE:case m.SUCCESS:return{...e,isUploading:!1};default:return e}}})},"5UID":function(e,t,s){"use strict";var a=s("ERkP"),n=s("3XMw"),r=s.n(n),i=s("rHpw"),o=s("+/1j"),l=s("MWbm");const c=r.a.e5b0063d;let d=0;class u extends a.Component{constructor(){super(),this._listDomId=`accessible-list-${d}`,d+=1}render(){const{children:e,title:t}=this.props,s=c({title:t});return a.createElement(l.a,{accessibilityLabelledBy:this._listDomId,accessibilityRole:"region"},a.createElement(o.a,{accessibilityLevel:1,accessibilityRole:"heading",nativeID:this._listDomId,style:i.a.visuallyHidden},t),a.createElement(l.a,{accessibilityLabel:s},e))}}t.a=u},"6XNv":function(e,t,s){"use strict";var a=s("KEM+"),n=s.n(a),r=(s("kYxP"),s("ERkP")),i=s("t62R"),o=s("piX5"),l=s("4r2z"),c=s("FG+G"),d=s("rHpw"),u=(s("aWzz"),s("k/Ka")),h=s("shC7"),p=s("MWbm");const _=r.forwardRef(((e,t)=>Object(u.a)("select",{...e,ref:t}))),m=e=>Object(u.a)("option",e);class b extends r.PureComponent{constructor(...e){super(...e),n()(this,"_selectRef",r.createRef()),n()(this,"state",{isFocused:!1}),n()(this,"_handleChange",(e=>{const{onChange:t,withEmptyOption:s}=this.props,{selectedIndex:a,value:n}=e.target;t&&t(n,a-(s?1:0))})),n()(this,"_handleBlur",(e=>{const{onBlur:t}=this.props;this.setState({isFocused:!1}),t&&t()})),n()(this,"_handleFocus",(e=>{const{onFocus:t}=this.props;this.setState({isFocused:!0}),t&&t()}))}componentDidMount(){this.props.autofocus&&this._selectRef&&this._selectRef.current&&this._selectRef.current.focus()}render(){const{style:e,disabled:t,options:s,value:a,label:n,hasError:u,errorText:b,helperText:f,testID:k,withEmptyOption:y}=this.props,{isFocused:v}=this.state,w=i.c.getLanguage(),E="ja"===w?d.a.theme.fontFamilies.japan:h.a.getConstants().isRTL||l.a.isLocaleRTL(w)?d.a.theme.fontFamilies.rtl:d.a.theme.fontFamilies.normal;return r.createElement(r.Fragment,null,r.createElement(p.a,{style:[o.a.border,g.container,t&&o.a.disabled,v&&o.a.focusedBorderValid,(u||b)&&o.a.invalidBorderColor,v&&(u||b)&&o.a.focusedBorderInvalid,e]},this._renderLabel(),r.createElement(_,{accessibilityLabel:n,disabled:t,id:n,onBlur:this._handleBlur,onChange:this._handleChange,onFocus:this._handleFocus,ref:this._selectRef,style:[g.select,{fontFamily:E},t&&o.a.disabled],testID:k||"",value:a},y?r.createElement(m,{disabled:!0,style:g.option,value:""}):null,s.map((e=>{const{disabled:t,label:s,value:a}=e;return r.createElement(m,{disabled:t,key:`${s}-${a}`,style:g.option,value:a},s)}))),r.createElement(c.a,{style:[g.dropdownCaret,v&&o.a.validColor,(u||b)&&o.a.invalidColor]})),f?this._renderHelperText():null,b?this._renderErrorText():null)}_renderLabel(){const{errorText:e,hasError:t,label:s}=this.props,{isFocused:a}=this.state;return r.createElement(i.c,{color:t||e?"red500":a?"primary":"gray600",style:g.label},s)}_renderHelperText(){return r.createElement(p.a,{accessibilityLiveRegion:"polite"},r.createElement(i.c,{color:"gray600",style:g.helperText},this.props.helperText))}_renderErrorText(){return r.createElement(p.a,{accessibilityLiveRegion:"polite"},r.createElement(i.c,{color:"red500",style:g.helperText},this.props.errorText))}}n()(b,"defaultProps",{disabled:!1,autofocus:!1,withEmptyOption:!1}),b.propTypes={};const g=d.a.create((e=>({container:{backgroundColor:e.colors.cellBackground},dropdownCaret:{color:e.colors.gray600,height:"1.5em",pointerEvents:"none",position:"absolute",marginTop:"-0.75em",top:"50%",right:e.spaces.space12},label:{position:"absolute",fontSize:e.fontSizes.small,paddingHorizontal:e.spaces.space8,paddingTop:e.spaces.space8,pointerEvents:"none",lineHeight:e.lineHeights.subtext2},option:{backgroundColor:e.colors.navigationBackground},select:{appearance:"none",backgroundColor:"transparent",borderRadius:e.borderRadii.none,borderWidth:e.borderWidths.none,color:e.colors.text,cursor:"pointer",fontSize:e.fontSizes.headline2,lineHeight:e.lineHeights.headline2,margin:0,marginTop:e.spaces.space16,outlineStyle:"none",padding:0,paddingTop:e.spaces.space12,paddingBottom:e.spaces.space8,paddingHorizontal:e.spaces.space8},helperText:{fontSize:e.fontSizes.small,paddingHorizontal:e.spaces.space8,paddingTop:e.spaces.space2}})));t.a=b},"9D1O":function(e,t,s){"use strict";s.d(t,"l",(function(){return x})),s.d(t,"s",(function(){return T})),s.d(t,"k",(function(){return A})),s.d(t,"j",(function(){return O})),s.d(t,"o",(function(){return P})),s.d(t,"p",(function(){return N})),s.d(t,"q",(function(){return D})),s.d(t,"i",(function(){return R})),s.d(t,"r",(function(){return F})),s.d(t,"m",(function(){return L})),s.d(t,"t",(function(){return B})),s.d(t,"n",(function(){return j})),s.d(t,"c",(function(){return V})),s.d(t,"u",(function(){return M})),s.d(t,"x",(function(){return H})),s.d(t,"g",(function(){return G})),s.d(t,"v",(function(){return Y})),s.d(t,"d",(function(){return W})),s.d(t,"z",(function(){return q})),s.d(t,"b",(function(){return $})),s.d(t,"a",(function(){return X})),s.d(t,"h",(function(){return K})),s.d(t,"w",(function(){return Z})),s.d(t,"e",(function(){return Q})),s.d(t,"f",(function(){return J})),s.d(t,"y",(function(){return ee}));var a=s("k49u"),n=s("zrOZ"),r=s("OIs+"),i=s("kGix"),o=s("Ssj5"),l=s("oEOe"),c=s("YlqV"),d=s("q82E");const u="ocf",h="rweb/ocf",p="success",_=Object(l.a)(h,"FETCH"),m=Object(l.a)(h,"START"),b="rweb/ocf/CLEAR",g="rweb/ocf/UPDATE",f="rweb/ocf/NAVIGATE",k="rweb/ocf/RESUME",y=Object(l.a)(h,"VERIFY_IDENTIFIER"),v="OCF_GENERATED_PASSWORD",w=Object(n.a)(["signup"]),E=s("i+/A"),C={currentSubtask:null,failureMessage:"",fetchStatus:i.a.NONE,flowName:null,flowToken:null,shouldAbort:!1,shouldEndFlow:!1,submitFailed:!1,startLocation:{},subtasks:[],subtaskInputs:{},navigationContext:{action:""},navigationStack:[],flowData:{}},I=e=>{const t=e&&Object(c.g)(e);return t===d.o.EmailVerification||t===d.o.PhoneVerification},S=e=>e===a.a.ValidationFailure||e===a.a.OnboardingFlowFailure||e===a.a.OnboardingFlowRetriableFailure;o.a.register({[u]:function(e=C,t){switch(t.type){case m.REQUEST:return{...C,fetchStatus:i.a.LOADING,flowName:t.meta.flowName,startLocation:e.startLocation};case _.REQUEST:return{...e,fetchStatus:i.a.LOADING,submitFailed:!1};case f:{const{navigationContext:s,navigationStack:a,sendPinCode:n,subtaskInputs:r}=t.payload,i={...e.subtaskInputs};for(const e in i)r[e]&&delete i[e];return{...e,currentSubtask:e.subtasks.find((e=>e.subtask_id===t.payload.subtaskId)),navigationContext:s,subtaskInputs:i,submitFailed:!1,navigationStack:a,sendPinCode:n}}case"rweb/ocf/ATTRIBUTE":return{...e,startLocation:t.payload};case g:{const{subtaskInputs:s,flowData:a}=t.payload;return{...e,subtaskInputs:{...e.subtaskInputs,...s},flowData:{...e.flowData,...a}}}case m.FAILURE:{const s=t.payload.errors[0].code,a=t.payload.errors[0].message,n=s!==r.a.Offline,o=S(s)?a:void 0;return{...e,fetchStatus:i.a.FAILED,failureMessage:o,shouldAbort:n}}case _.FAILURE:{const s=t.payload.errors[0].code,n=t.payload.errors[0].message,o=S(s)?n:void 0,l=!((e,t)=>{const s=e===r.a.Offline||e===a.a.ValidationFailure||e===a.a.OnboardingFlowRetriableFailure,n=!!t&&!d.i.has(Object(c.g)(t));return s&&n})(s,e.currentSubtask);return{...e,fetchStatus:i.a.LOADED,failureMessage:o,shouldAbort:l,submitFailed:!0}}case y.FAILURE:{const s=t.payload.errors[0].code,a=t.payload.errors[0].message,n=S(s)?a:void 0;return{...e,verificationSendFailureMessage:n,sendPinCode:!1}}case m.SUCCESS:case _.SUCCESS:{const{flow_token:s,subtasks:a}=t.payload,{isTaskNavigation:n}=t.meta||{},r=a&&a.length?a[0]:null,o=I(r),l=!!n&&!r;return{...e,currentSubtask:r,fetchStatus:i.a.LOADED,flowToken:s,sendPinCode:o,shouldEndFlow:l,submitFailed:!1,subtasks:a,subtaskInputs:{},navigationStack:r?[r.subtask_id]:[]}}case b:return{...C};case k:return t.payload;case y.REQUEST:return{...e,verificationSendFailureMessage:void 0,sendPinCode:!1};default:return e}}});const x=e=>e.ocf.flowToken,T=e=>e.ocf.subtasks,A=e=>e.ocf.fetchStatus,O=e=>e.ocf.failureMessage,P=e=>e.ocf.shouldAbort,N=e=>e.ocf.shouldEndFlow,D=e=>e.ocf.submitFailed,R=e=>e.ocf.currentSubtask,F=e=>e.ocf.subtaskInputs,L=e=>e.ocf.navigationContext,B=e=>e.ocf.verificationSendFailureMessage,U=e=>e.ocf.navigationStack,j=e=>{const t=U(e),s=t?t.length:0;if(s<=1)return null;const a=e.ocf.subtasks.find((e=>e.subtask_id===t[s-2]));return a.alert_dialog?t[s-3]:t[s-2]},V=({clearPersistence:e}={})=>(t,s,{userPersistence:a})=>{e&&a.set(h,{}),t({type:b})},M=(e={})=>(t,s,{api:a,userPersistence:n})=>{const{flow_name:r}=e;return(w.has(r)?n.get(h,36e5):Promise.resolve(void 0)).then((s=>r&&s&&s[r]?t({payload:s[r],type:k}):t(z(e))))},z=(e={})=>(t,s,{api:a,userPersistence:n})=>{const{flow_name:r}=e;return Object(l.b)(t,{params:e,request:a.Ocf.task})({actionTypes:m,context:"START_FLOW",meta:{flowName:r}}).then((e=>(w.has(r)&&e.status===p&&n.set(h,{[r]:s().ocf}),e)))},H=(e,t={},s={})=>(a,n)=>{a({type:g,payload:{subtaskId:e,subtaskInputs:{[e]:t},flowData:s}})},G=({subtaskId:e,navigationContext:t,destructive:s,fromHiddenSubtask:a})=>(n,r)=>{const i=r(),o=U(i),l=o.indexOf(e);let c=[],u={};if(a&&o.length)c=o.slice(0,-1).concat([e]);else if(-1===l)c=o.concat([e]);else{const e=l+1;c=o.slice(0,e),s&&(u=o.slice(e,o.length).reduce(((e,t)=>({...e,[t]:{}})),{}))}const h=(e=>t=>e.ocf.subtasks.find((e=>e.subtask_id===t)))(i)(e),p=t&&t.action,_=p===d.n.ResendSms||p===d.n.ResendVoice||p===d.n.ResendEmail;"clear"===p&&(u[e]={});const m=I(h)&&(!p||_);n({type:f,payload:{navigationContext:{action:"",...t},sendPinCode:m,subtaskId:e,subtaskInputs:u,navigationStack:c}})},Y=({isTaskNavigation:e,...t}={})=>(s,a,{api:n,userPersistence:r})=>{const i=a(),o=x(i),d=((e,t)=>Object.keys(t).map((s=>{const a=e.find((e=>e.subtask_id===s)),n=a&&Object(c.e)(a);return{subtask_id:a.subtask_id,[n]:t[s]}})))(T(i),F(i)),u={...t,flow_token:o,subtask_inputs:d};return Object(l.b)(s,{params:u,request:n.Ocf.task})({actionTypes:_,context:"SUBMIT_FLOW",meta:{isTaskNavigation:e}}).then((e=>{const t=a().ocf;return r.set(h,{[t.flowName]:e.subtasks.length&&e.status===p?t:void 0}),e}))};const W=(e,t)=>(s,a)=>{const{should_generate:n,next_link:r}=t,{flowData:i}=a().ocf,o=n?E(Math.ceil(10)).toString("hex").slice(0,20):i[v];H(e,{password:o,link:r.link_id},{[v]:o})(s,a)},q=e=>(t,s,{api:a})=>{if(s().ocf.sendPinCode){const n=x(s()),r={...e,flow_token:n};return Object(l.b)(t,{params:r,request:a.Ocf.verifyUserIdentifier})({actionTypes:y,context:"VERIFY_IDENTIFIER"})}return Promise.resolve({})},$=e=>(t,s,{api:a})=>a.Ocf.callOnboardingPath(e),X=e=>(t,s,{api:a})=>a.Ocf.callInteractiveSpinnerPath(e),K=e=>(t,s,{api:a})=>a.Ocf.removeContacts(e),Z=e=>(t,s,{api:a})=>a.Ocf.syncContacts(e),Q=e=>(t,s,{api:a})=>a.Ocf.getContactsImportStatus(e),J=e=>(t,s,{api:a})=>a.Ocf.getVerificationStatus(e),ee=e=>(t,s,{api:a})=>a.Ocf.verificationLink(e)},"FG+G":function(e,t,s){"use strict";var a=s("ERkP"),n=s("Lsrn"),r=s("k/Ka");const i=(e={})=>Object(r.a)("svg",{...e,style:[n.a.root,e.style],viewBox:"0 0 24 24"},a.createElement("g",null,a.createElement("path",{d:"M20.207 8.147c-.39-.39-1.023-.39-1.414 0L12 14.94 5.207 8.147c-.39-.39-1.023-.39-1.414 0-.39.39-.39 1.023 0 1.414l7.5 7.5c.195.196.45.294.707.294s.512-.098.707-.293l7.5-7.5c.39-.39.39-1.022 0-1.413z"})));i.metadata={width:24,height:24},t.a=i},H9wA:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var a=s("aWzz");const n={accessibilityLabel:a.string,accessibilityLiveRegion:Object(a.oneOf)(["assertive","none","polite"]),style:a.any}},I7xG:function(e,t,s){"use strict";s("kYxP");var a=s("hqKg");t.a=(e,...t)=>{const s=Object(a.createSelector)(...t);return(t=e)=>s(t.props,t.state,{...t})}},K2mq:function(e,t,s){"use strict";s.r(t);var a=s("97Jx"),n=s.n(a),r=s("ERkP"),i=s("gPQO");t.default=e=>r.createElement(i.default,n()({},e,{flowName:"signup"}))},KLyV:function(e,t,s){var a=s("+ZX+"),n=a.Buffer;function r(e,t){for(var s in e)t[s]=e[s]}function i(e,t,s){return n(e,t,s)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=a:(r(a,t),t.Buffer=i),i.prototype=Object.create(n.prototype),r(n,i),i.from=function(e,t,s){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,s)},i.alloc=function(e,t,s){if("number"!=typeof e)throw new TypeError("Argument must be a number");var a=n(e);return void 0!==t?"string"==typeof s?a.fill(t,s):a.fill(t):a.fill(0),a},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a.SlowBuffer(e)}},LXAX:function(e,t,s){"use strict";s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return u}));var a=s("XMGw"),n=s("Ssj5"),r=s("oEOe");const i=`${a.a}/usernames`,o=`rweb/${i}`,l=Object(r.a)(o,"FETCH_USERNAMES"),c={isLoaded:!1};const d=e=>e[i],u=e=>(t,s,{api:a})=>Object(r.b)(t,{params:e,request:a.Settings.usernameAvailable})({actionTypes:l,context:"FETCH_SETTINGS_USERNAME_AVAILABLE",meta:{username:e.username}}),h=`${o}/${"CLEAR_USERNAMES"}`;n.a.register({[i]:function(e=c,t={}){switch(t.type){case l.REQUEST:return{...e,isLoading:!0};case l.FAILURE:return{...e,isLoading:!1};case l.SUCCESS:return{...e,...t.payload,username:t.meta.username,isLoading:!1};case h:return{isLoading:!1};default:return e}}})},Lam0:function(e,t,s){"use strict";s.d(t,"a",(function(){return D}));var a=s("KEM+"),n=s.n(a),r=s("ERkP"),i=s.n(r),o=s("aWzz"),l=s.n(o);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var u=function(e){var t,s;function a(){var t;return(t=e.call(this)||this).handleExpired=t.handleExpired.bind(d(t)),t.handleErrored=t.handleErrored.bind(d(t)),t.handleRecaptchaRef=t.handleRecaptchaRef.bind(d(t)),t}s=e,(t=a).prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s;var n=a.prototype;return n.getValue=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this.props.grecaptcha.getResponse(this._widgetId):null},n.getWidgetId=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this._widgetId:null},n.execute=function(){var e=this.props.grecaptcha;if(e&&void 0!==this._widgetId)return e.execute(this._widgetId);this._executeRequested=!0},n.reset=function(){this.props.grecaptcha&&void 0!==this._widgetId&&this.props.grecaptcha.reset(this._widgetId)},n.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.props.onChange&&this.props.onChange(null)},n.handleErrored=function(){this.props.onErrored&&this.props.onErrored()},n.explicitRender=function(){if(this.props.grecaptcha&&this.props.grecaptcha.render&&void 0===this._widgetId){var e=document.createElement("div");this._widgetId=this.props.grecaptcha.render(e,{sitekey:this.props.sitekey,callback:this.props.onChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge}),this.captcha.appendChild(e)}this._executeRequested&&this.props.grecaptcha&&void 0!==this._widgetId&&(this._executeRequested=!1,this.execute())},n.componentDidMount=function(){this.explicitRender()},n.componentDidUpdate=function(){this.explicitRender()},n.componentWillUnmount=function(){void 0!==this._widgetId&&(this.delayOfCaptchaIframeRemoving(),this.reset())},n.delayOfCaptchaIframeRemoving=function(){var e=document.createElement("div");for(document.body.appendChild(e),e.style.display="none";this.captcha.firstChild;)e.appendChild(this.captcha.firstChild);setTimeout((function(){document.body.removeChild(e)}),5e3)},n.handleRecaptchaRef=function(e){this.captcha=e},n.render=function(){var e=this.props,t=(e.sitekey,e.onChange,e.theme,e.type,e.tabindex,e.onExpired,e.onErrored,e.size,e.stoken,e.grecaptcha,e.badge,e.hl,function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl"]));return i.a.createElement("div",c({},t,{ref:this.handleRecaptchaRef}))},a}(i.a.Component);u.displayName="ReCAPTCHA",u.propTypes={sitekey:l.a.string.isRequired,onChange:l.a.func,grecaptcha:l.a.object,theme:l.a.oneOf(["dark","light"]),type:l.a.oneOf(["image","audio"]),tabindex:l.a.number,onExpired:l.a.func,onErrored:l.a.func,size:l.a.oneOf(["compact","normal","invisible"]),stoken:l.a.string,hl:l.a.string,badge:l.a.oneOf(["bottomright","bottomleft","inline"])},u.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var h=s("oXkQ"),p=s.n(h);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var m={},b=0;function g(){return"undefined"!=typeof window&&window.recaptchaOptions||{}}var f,k,y="onloadcallback",v=g(),w=(f=function(){var e=g(),t=e.lang?"&hl="+e.lang:"";return"https://"+(e.useRecaptchaNet?"recaptcha.net":"www.google.com")+"/recaptcha/api.js?onload="+y+"&render=explicit"+t},k=(k={callbackName:y,globalName:"grecaptcha",removeOnUnmount:v.removeOnUnmount||!1})||{},function(e){var t=e.displayName||e.name||"Component",s=function(t){var s,a;function n(e,s){var a;return(a=t.call(this,e,s)||this).state={},a.__scriptURL="",a}a=t,(s=n).prototype=Object.create(a.prototype),s.prototype.constructor=s,s.__proto__=a;var i=n.prototype;return i.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+b++),this.__scriptLoaderID},i.setupScriptURL=function(){return this.__scriptURL="function"==typeof f?f():f,this.__scriptURL},i.asyncScriptLoaderHandleLoad=function(e){var t=this;this.setState(e,(function(){return t.props.asyncScriptOnLoad&&t.props.asyncScriptOnLoad(t.state)}))},i.asyncScriptLoaderTriggerOnScriptLoaded=function(){var e=m[this.__scriptURL];if(!e||!e.loaded)throw new Error("Script is not loaded.");for(var t in e.observers)e.observers[t](e);delete window[k.callbackName]},i.componentDidMount=function(){var e=this,t=this.setupScriptURL(),s=this.asyncScriptLoaderGetScriptLoaderID(),a=k,n=a.globalName,r=a.callbackName,i=a.scriptId;if(n&&void 0!==window[n]&&(m[t]={loaded:!0,observers:{}}),m[t]){var o=m[t];return o&&(o.loaded||o.errored)?void this.asyncScriptLoaderHandleLoad(o):void(o.observers[s]=function(t){return e.asyncScriptLoaderHandleLoad(t)})}var l={};l[s]=function(t){return e.asyncScriptLoaderHandleLoad(t)},m[t]={loaded:!1,observers:l};var c=document.createElement("script");c.src=t,c.async=!0,i&&(c.id=i);var d=function(e){if(m[t]){var s=m[t].observers;for(var a in s)e(s[a])&&delete s[a]}};r&&"undefined"!=typeof window&&(window[r]=function(){return e.asyncScriptLoaderTriggerOnScriptLoaded()}),c.onload=function(){var e=m[t];e&&(e.loaded=!0,d((function(t){return!r&&(t(e),!0)})))},c.onerror=function(){var e=m[t];e&&(e.errored=!0,d((function(t){return t(e),!0})))},document.body.appendChild(c)},i.componentWillUnmount=function(){var e=this.__scriptURL;if(!0===k.removeOnUnmount)for(var t=document.getElementsByTagName("script"),s=0;s<t.length;s+=1)t[s].src.indexOf(e)>-1&&t[s].parentNode&&t[s].parentNode.removeChild(t[s]);var a=m[e];a&&(delete a.observers[this.asyncScriptLoaderGetScriptLoaderID()],!0===k.removeOnUnmount&&delete m[e])},i.render=function(){var t=k.globalName,s=this.props,a=(s.asyncScriptOnLoad,s.forwardedRef),n=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(s,["asyncScriptOnLoad","forwardedRef"]);return t&&"undefined"!=typeof window&&(n[t]=void 0!==window[t]?window[t]:void 0),n.ref=a,Object(r.createElement)(e,n)},n}(r.Component),a=Object(r.forwardRef)((function(e,t){return Object(r.createElement)(s,_({},e,{forwardedRef:t}))}));return a.displayName="AsyncScriptLoader("+t+")",a.propTypes={asyncScriptOnLoad:l.a.func},p()(a,e)})(u),E=s("MWbm"),C=s("t62R"),I=s("/yvb"),S=s("rHpw"),x=s("3XMw"),T=s.n(x);const A=T.a.c1df579e,O=T.a.b60eba9e,P=T.a.ba939777,N=T.a.bc6efc72;class D extends r.Component{constructor(e,t){super(e,t),n()(this,"_handlePass",(e=>{const{onChange:t}=this.props;t&&setTimeout((()=>t(e)),1e3)})),n()(this,"_handleConsent",(()=>{const{onConsent:e}=this.props;this.setState({termsAccepted:!0}),e&&e()})),this.state={termsAccepted:!1}}_renderConsentForm(){const{nextButtonDisabled:e}=this.props;return r.createElement(E.a,null,r.createElement(C.c,{style:R.guideCopy},O),r.createElement(E.a,{style:R.button},r.createElement(I.a,{disabled:e,onPress:this._handleConsent,size:"normalLarge",type:"secondary"},A)),r.createElement(C.c,{color:"gray600"},r.createElement(T.a.I18NFormatMessage,{$i18n:"hc37d3ba"},r.createElement(C.c,{link:"https://policies.google.com/privacy"},N))))}_renderRecaptcha(){const{withConsentForm:e}=this.props;return r.createElement(r.Fragment,null,e?r.createElement(E.a,{style:R.recaptchaTitle},r.createElement(C.c,{style:R.guideCopy},P)):null,r.createElement(E.a,{style:R.container},r.createElement(w,{onChange:this._handlePass,sitekey:"6LfOP30UAAAAAFBC4jbzu890rTdXBXBNHx9eVZEX"})))}render(){const{withConsentForm:e}=this.props,{termsAccepted:t}=this.state;return e&&!t?this._renderConsentForm():this._renderRecaptcha()}}const R=S.a.create((e=>({container:{margin:"auto",transitionProperty:"opacity",transitionDelay:"2s"},button:{paddingVertical:e.spaces.space20},guideCopy:{paddingTop:e.spaces.space12},recaptchaTitle:{paddingBottom:e.spaces.space20}})))},"N+xe":function(e,t,s){"use strict";s.r(t),s.d(t,"VerificationLanding",(function(){return A}));var a=s("KEM+"),n=s.n(a),r=(s("MvUL"),s("ERkP")),i=s("9D1O"),o=s("oEGd"),l=s("hqKg"),c=s("Hw0q");const d=Object(c.b)("user_identifier"),u=Object(c.b)("phone"),h=Object(c.b)("email"),p=Object(c.b)("pin_code"),_=Object(l.createSelector)(h,d,u,p,((e,t,s,a)=>({email:e,identifier:t,phone:s,pinCode:a}))),m={verificationLink:i.y};var b=Object(o.g)(_,m),g=s("kGix"),f=s("v//M"),k=s("3XMw"),y=s.n(k),v=s("fs1G"),w=s("YCSy"),E=s("MWbm"),C=s("cmUU"),I=s("rHpw");const S=y.a.b5474bd2,x=y.a.a9b8fb38,T=y.a.j24c37b2;class A extends r.Component{constructor(e){super(e),n()(this,"_render",(()=>r.createElement(C.a,{actionLabel:T,headline:this.state.title||"",onAction:this._handleCloseWindow,onClose:this._handleCloseWindow,subtext:this.state.message||"",withCloseButton:!1}))),n()(this,"_handleCloseWindow",(()=>{window&&window.close(),this.props.history.replace("/")})),this.state={title:void 0,message:void 0,fetchStatus:g.a.LOADING}}componentDidMount(){const{history:e,location:t,verificationLink:s,identifier:a,email:n,phone:r,pinCode:i}=this.props;return e.replace(t.pathname),s({user_identifier:a,email:n,phone:r,pin_code:i}).then((e=>this.setState({fetchStatus:e.success?g.a.LOADED:g.a.FAILED,title:e.title,message:e.message}))).catch((()=>this.setState({title:S,message:x,fetchStatus:g.a.FAILED})))}render(){const{history:e}=this.props;return r.createElement(w.a,{hideLogo:!0,history:e},r.createElement(E.a,{style:O.root},r.createElement(f.a,{fetchStatus:this.state.fetchStatus,onRequestRetry:v.a,render:this._render,renderFailure:this._render,retryable:!1})))}}const O=I.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,flexGrow:1,flexShrink:1}})));t.default=b(A)},NeAX:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return v})),s.d(t,"selectPreferences",(function(){return I})),s.d(t,"selectData",(function(){return S})),s.d(t,"selectUserPreferences",(function(){return x})),s.d(t,"selectPreferencesFetchStatus",(function(){return T})),s.d(t,"selectFetchDataStatus",(function(){return A})),s.d(t,"selectAge",(function(){return O})),s.d(t,"selectBirthdate",(function(){return P})),s.d(t,"selectHasExactAge",(function(){return N})),s.d(t,"selectGender",(function(){return D})),s.d(t,"selectLanguage",(function(){return R})),s.d(t,"selectSignupDetails",(function(){return F})),s.d(t,"selectTwitterInterests",(function(){return L})),s.d(t,"selectFetchTwitterInterestsStatus",(function(){return B})),s.d(t,"selectPartnerInterests",(function(){return U})),s.d(t,"selectFetchPartnerInterestsStatus",(function(){return j})),s.d(t,"clearLocations",(function(){return V})),s.d(t,"updateGender",(function(){return M})),s.d(t,"updateLanguage",(function(){return z})),s.d(t,"updateInterest",(function(){return H})),s.d(t,"fetchPreferencesIfNeeded",(function(){return G})),s.d(t,"updatePreferences",(function(){return W})),s.d(t,"updateSettings",(function(){return q})),s.d(t,"fetchDataIfNeeded",(function(){return X})),s.d(t,"createAudienceDownload",(function(){return Z})),s.d(t,"createDataDownload",(function(){return Q})),s.d(t,"fetchTwitterInterestsIfNeeded",(function(){return J})),s.d(t,"fetchPartnerInterestsIfNeeded",(function(){return te})),s.d(t,"syncSettings",(function(){return ne}));s("kYxP");var a=s("RqPI"),n=s("P1r1"),r=s("cmwl"),i=s("hqKg"),o=s("kGix"),l=s("YeIG"),c=s("Ssj5"),d=s("oEOe");const u="personalization",h="rweb/personalization",p=Object(d.a)(h,"FETCH_PREFERENCES"),_=Object(d.a)(h,"UPDATE_PREFERENCES"),m=Object(d.a)(h,"FETCH_DATA"),b=Object(d.a)(h,"UPDATE_COOKIES"),g=Object(d.a)(h,"FETCH_TWITTER_INTERESTS"),f=Object(d.a)(h,"FETCH_PARTNER_INTERESTS"),k=`${h}/${"CLEAR_LOCATIONS"}`;const y={preferences:{data:{},fetchStatus:o.a.NONE},data:{data:{},fetchStatus:o.a.NONE},twitter_interests:{data:{},fetchStatus:o.a.NONE},partner_interests:{data:{},fetchStatus:o.a.NONE}};function v(e=y,t){switch(t.type){case p.REQUEST:return{...e,preferences:{...e.preferences,fetchStatus:o.a.LOADING}};case p.SUCCESS:return{...e,preferences:{data:{...e.preferences.data,...t.payload},error:null,fetchStatus:o.a.LOADED}};case p.FAILURE:return{...e,preferences:{...e.preferences,error:t.payload,fetchStatus:o.a.FAILED}};case _.REQUEST:return{...e,preferences:{data:{...e.preferences.data,...t.payload},error:null,fetchStatus:o.a.LOADED}};case m.REQUEST:return{...e,data:{...e.data,fetchStatus:o.a.LOADING}};case m.SUCCESS:return{...e,data:{data:{...e.data.data,...t.payload},error:null,fetchStatus:o.a.LOADED}};case m.FAILURE:return{...e,data:{...e.data,error:t.payload,fetchStatus:o.a.FAILED}};case g.REQUEST:return{...e,twitter_interests:{...e.twitter_interests,fetchStatus:o.a.LOADING}};case g.SUCCESS:return{...e,twitter_interests:{data:{...e.twitter_interests.data,...t.payload},error:null,fetchStatus:o.a.LOADED}};case g.FAILURE:return{...e,twitter_interests:{...e.twitter_interests,error:t.payload,fetchStatus:o.a.FAILED}};case f.REQUEST:return{...e,partner_interests:{...e.partner_interests,fetchStatus:o.a.LOADING}};case f.SUCCESS:return{...e,partner_interests:{data:{...e.partner_interests.data,...t.payload},error:null,fetchStatus:o.a.LOADED}};case f.FAILURE:return{...e,partner_interests:{...e.partner_interests,error:t.payload,fetchStatus:o.a.FAILED}};case k:return{...e,data:{...e.data,data:{...e.data.data,location_history:[]}}};default:return e}}c.a.register({[u]:v});const w={allowCookieUse:"use_cookie_personalization",allowDeviceAccess:"allow_logged_out_device_personalization",allowLocationHistoryUse:"allow_location_history_personalization",allowPartnerships:"allow_sharing_data_for_third_party_personalization",allowPersonalization:"allow_ads_personalization"},E={allowCookieUse:"use_cookie_personalization",allowDeviceAccess:"link_logged_out_devices",allowPartnerships:"share_data_with_third_party",allowPersonalization:"allow_ads_personalization"},C={use_age_for_personalization:"age_preferences",use_gender_for_personalization:"gender_preferences"},I=e=>e.personalization.preferences.data,S=e=>e.personalization.data.data,x=Object(i.createSelector)(a.e,I,n.f,((e,t,s)=>{const[a,n]=e?[w,s]:[E,t];return Object.keys(a).reduce(((e,t)=>(e[t]=n[a[t]],e)),{})})),T=e=>{const t=I(e);return Object(l.a)(t)?e.personalization.preferences.fetchStatus:o.a.LOADED},A=e=>e.personalization.data.fetchStatus,O=e=>e.personalization.data.data.age?e.personalization.data.data.age:[],P=e=>e.personalization.data.data.birth_date?e.personalization.data.data.birth_date:"",N=e=>!!e.personalization.data.data.has_exact_age,D=e=>{const t=S(e),s=I(e),a=s.gender_preferences&&s.gender_preferences.gender_override;return a&&a.type?a:{type:t.gender,value:t.gender}},R=e=>e.personalization.data.data.languages?e.personalization.data.data.languages:[],F=e=>e.personalization.data.data.sign_up_details?e.personalization.data.data.sign_up_details:{},L=e=>e.personalization.twitter_interests.data,B=e=>e.personalization.twitter_interests.fetchStatus,U=e=>e.personalization.partner_interests.data,j=e=>e.personalization.partner_interests.fetchStatus,V=()=>(e,t)=>{const s=t(),a=I(s),n=Date.now(),r={location_preferences:{...a.location_preferences,override_times:[n]}};return e(W(r)).then((()=>e({type:k})))},M=e=>(t,s)=>{const a=s(),n={gender_preferences:{...I(a).gender_preferences,gender_override:e}};return t(W(n))},z=(e,t)=>(s,a)=>{if(Object(l.a)(e))return Promise.resolve();const n=a(),r=I(n),i=r.language_preferences.disabled_languages||[],o=i.indexOf(e),c=o>-1;if(c&&t)i.splice(o,1);else{if(c||t)return Promise.resolve();i.push(e)}const d={language_preferences:{...r.language_preferences,disabled_languages:i}};return s(W(d))},H=(e,t,s)=>(a,n)=>{if(Object(l.a)(e)||-1===["ads","partner"].indexOf(s))return Promise.resolve();const r="partner"===s,i=n(),o=I(i).interest_preferences,c=r?"disabled_partner_interests":"disabled_interests",d=o[c],u=d.indexOf(e),h=u>-1;if(h&&t)d.splice(u,1);else{if(h||t)return Promise.resolve();d.push(e)}const p={interest_preferences:{disabled_interests:o.disabled_interests,disabled_partner_interests:o.disabled_partner_interests,[c]:d}};return a(W(p))},G=()=>(e,t,{api:s})=>{const a=t().personalization.preferences;return a.fetchStatus!==o.a.LOADING&&a.fetchStatus!==o.a.LOADED?e(Y()):Promise.resolve()},Y=()=>(e,t,{api:s})=>Object(d.b)(e,{request:s.Personalization.fetchPreferences})({actionTypes:p,context:"FETCH_PERSONALIZATION_PREFERENCES"}),W=e=>(t,s,{api:a})=>{if(Object(l.a)(e))return Promise.resolve();return Object(d.c)(t,{params:{preferences:e},request:a.Personalization.updatePreferences})({actionTypes:_,context:"ACTION_UPDATE_PERSONALIZATION_PREFERENCES",payload:e})},q=e=>(t,s,{api:i,featureSwitches:o})=>{if(Object(l.a)(e))return Promise.resolve();const c=s(),d=a.e(c),u=d?w:E,h=Object.keys(e).reduce(((t,s)=>{if(s in u){t[u[s]]=e[s]}if(s in C){t[C[s]]={[s]:e[s]}}return t}),{});return d?t(n.H(h)).then((()=>{Object(r.a)().then((e=>{e.updateBranchTracking(o,i)})),t(ae(h))})):$(o,t,h,i)},$=(e,t,s,a)=>Object(d.c)(t,{params:{preferences:s},request:a.Personalization.updatePreferences})({actionTypes:_,context:"ACTION_UPDATE_PERSONALIZATION_PREFERENCES",payload:s}).then((()=>{Object(r.a)().then((t=>{t.updateBranchTracking(e,a)}))})),X=()=>(e,t,{api:s})=>{const a=t().personalization.data;return a.fetchStatus!==o.a.LOADING&&a.fetchStatus!==o.a.LOADED?e(K()):Promise.resolve()},K=()=>(e,t,{api:s})=>Object(d.b)(e,{request:s.Personalization.fetchData})({actionTypes:m,context:"FETCH_PERSONALIZATION_DATA"}),Z=()=>(e,t,{api:s})=>Object(d.d)(e,{request:s.Personalization.createAudienceDownload})("CREATE_AUDIENCE_DOWNLOAD"),Q=()=>(e,t,{api:s})=>Object(d.d)(e,{request:s.Personalization.createDataDownload})("CREATE_DATA_DOWNLOAD"),J=()=>(e,t,{api:s})=>{const a=t().personalization.twitter_interests;return a.fetchStatus!==o.a.LOADING&&a.fetchStatus!==o.a.LOADED?e(ee()):Promise.resolve()},ee=()=>(e,t,{api:s})=>Object(d.b)(e,{request:s.Personalization.fetchTwitterInterests})({actionTypes:g,context:"FETCH_PERSONALIZATION_TWITTER_INTERESTS"}),te=()=>(e,t,{api:s})=>{const a=t().personalization.partner_interests;return a.fetchStatus!==o.a.LOADING&&a.fetchStatus!==o.a.LOADED?e(se()):Promise.resolve()},se=()=>(e,t,{api:s})=>Object(d.b)(e,{request:s.Personalization.fetchPartnerInterests})({actionTypes:f,context:"FETCH_PERSONALIZATION_PARTNER_INTERESTS"}),ae=e=>(t,s,{api:a})=>{const n={};if(e.hasOwnProperty("use_cookie_personalization")&&(n.use_cookie_personalization=e.use_cookie_personalization),e.hasOwnProperty("allow_ads_personalization")&&(n.allow_ads_personalization=e.allow_ads_personalization),Object(l.a)(n))return Promise.resolve();return Object(d.b)(t,{params:n,request:a.Personalization.updateCookies})({actionTypes:b,context:"APP_UPDATE_PERSONALIZATION_COOKIES",params:n})},ne=()=>(e,t,{api:s})=>Object(d.d)(e,{request:s.Personalization.syncSettings})("SYNC_SETTINGS")},P68U:function(e,t,s){"use strict";var a=s("KEM+"),n=s.n(a),r=(s("kYxP"),s("ERkP")),i=s("rxPX"),o=s("AspN"),l=Object(i.a)().propsFromActions((()=>({addMedia:o.b,processMultipleMedia:o.d}))),c=s("2Daw"),d=s("VPdC");class u extends r.Component{constructor(...e){super(...e),n()(this,"_handleAddMediaFiles",(e=>{const{addMedia:t,location:s,onChange:a,onFailure:n,processMultipleMedia:r}=this.props,i=this._getAcceptedFileInputs(),o=Array.from(e).find((e=>i.includes(e.type)));o&&t([o],{location:s}).then((e=>{a&&a(e.map((e=>e.id))),r(e,{onFailure:n})}))})),n()(this,"_getAcceptedFileInputs",(()=>{const{acceptGifs:e,acceptVideo:t}=this.props;return Object(d.b)({acceptGifs:e,acceptVideo:t})}))}render(){const{accessibilityLabel:e,acceptGifs:t,acceptVideo:s,aspectRatio:a,borderRadius:n,currentContent:i,maskStyle:o,mediaItem:l,onCrop:d,onRemove:u,rootStyle:h}=this.props;return r.createElement(c.a,{acceptGifs:t,acceptVideo:s,accessibilityLabel:e,aspectRatio:a,borderRadius:n,currentContent:i,maskStyle:o,mediaItem:l,onAddMediaFiles:this._handleAddMediaFiles,onCrop:d,onRemove:u,rootStyle:h,withDragDrop:!0})}}n()(u,"defaultProps",{acceptGifs:!1,acceptVideo:!1});const h=l(u);t.a=h},P7wY:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return r}));var a=(e,t,s)=>{const a=new Date;let n=a.getFullYear()-e;const r=a.getMonth()+1-t;if(r<0)n-=1;else if(0===r){a.getDate()-s<0&&(n-=1)}return n};const n=(e,t,s)=>!!(e&&t&&s)&&a(e,t,s)<18,r=()=>(new Date).getFullYear()-120},Rl48:function(e,t){var s={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==s.call(e)}},S8sr:function(e,t,s){"use strict";s.d(t,"a",(function(){return f}));var a=s("KEM+"),n=s.n(a),r=s("ERkP"),i=s("nS1w"),o=s("t62R"),l=s("p+r5"),c=s("3XMw"),d=s.n(c),u=s("6XNv"),h=s("rHpw"),p=s("aITJ"),_=s("MWbm");const m=d.a.jf83d091,b=d.a.af4abf2f,g=d.a.b871f28f;class f extends r.Component{constructor(e){super(e),n()(this,"_handleSelectorChange",((e,t)=>{const{month:s,year:a,day:n}=this.props,r={day:n,month:s,year:a,[e]:parseInt(t,10)};this.props.onChange(r)})),n()(this,"_handleDayChange",(e=>{this._handleSelectorChange("day",e)})),n()(this,"_handleMonthChange",(e=>{this._handleSelectorChange("month",e)})),n()(this,"_handleYearChange",(e=>{this._handleSelectorChange("year",e)})),n()(this,"_handleDateChange",(e=>{const t=e.target.value.split("-"),s={year:parseInt(t[0],10),month:parseInt(t[1],10),day:parseInt(t[2],10)};this.props.onChange(s)}));const{day:t,maxSelectableYear:s,minSelectableYear:a,month:r,year:o}=e;this._monthOptions=i.c(),this._nativeDefaultValue=i.e(t,r,o),this._nativeMaxDate=i.e(31,12,s),this._nativeMinDate=i.e(1,1,a)}componentDidUpdate(e){const{month:t,year:s,day:a,onChange:n}=this.props,r=t&&t!==e.month,o=s&&s!==e.year;if(r||o){i.b(t,s).map((e=>parseInt(e.value,10))).includes(a)||n({month:t,year:s,day:void 0})}}render(){const{errorMessage:e}=this.props;return r.createElement(_.a,null,p.b.isMobileOS()?this._renderNativeDateInput():this._renderSelectors(),e?r.createElement(o.c,{color:"red500"},e):null)}_renderSelectors(){const{day:e,month:t,year:s,errors:a={},label:n,autofocus:o,monthSelectorTestID:l,daySelectorTestID:c,yearSelectorTestID:d,style:h,minSelectableYear:p,maxSelectableYear:f}=this.props,y=i.b(t,s),v=i.d(p,f,e,t);return r.createElement(_.a,{accessibilityLabel:n,accessibilityRole:"group",style:[k.selectorsContainer,h]},r.createElement(u.a,{autofocus:o,hasError:a.month,label:b,onChange:this._handleMonthChange,options:this._monthOptions,style:k.monthSelector,testID:l,value:t?`${t}`:"",withEmptyOption:!0}),r.createElement(u.a,{hasError:a.day,label:m,onChange:this._handleDayChange,options:y,style:k.daySelector,testID:c,value:e?`${e}`:"",withEmptyOption:!0}),r.createElement(u.a,{hasError:a.year,label:g,onChange:this._handleYearChange,options:v,style:k.yearSelector,testID:d,value:s?`${s}`:"",withEmptyOption:!0}))}_renderNativeDateInput(){const{label:e}=this.props;return r.createElement(l.a,{defaultValue:this._nativeDefaultValue,label:e,max:this._nativeMaxDate,min:this._nativeMinDate,name:e,numberOfLines:1,onChange:this._handleDateChange,style:k.dateInputRoot,type:"date"})}}const k=h.a.create((e=>({selectorsContainer:{flexDirection:"row",marginVertical:e.spaces.space16},monthSelector:{flexGrow:2,marginRight:e.spaces.space12},daySelector:{flexGrow:1,marginRight:e.spaces.space12},yearSelector:{flexGrow:1},dateInputRoot:{paddingHorizontal:0}})))},T8pk:function(e,t,s){"use strict";var a=s("ERkP"),n=s("Lsrn"),r=s("k/Ka");const i=(e={})=>Object(r.a)("svg",{...e,style:[n.a.root,e.style],viewBox:"0 0 24 24"},a.createElement("g",null,a.createElement("path",{d:"M19.708 22H4.292C3.028 22 2 20.972 2 19.708V7.375C2 6.11 3.028 5.083 4.292 5.083h2.146C7.633 3.17 9.722 2 12 2c2.277 0 4.367 1.17 5.562 3.083h2.146C20.972 5.083 22 6.11 22 7.375v12.333C22 20.972 20.972 22 19.708 22zM4.292 6.583c-.437 0-.792.355-.792.792v12.333c0 .437.355.792.792.792h15.416c.437 0 .792-.355.792-.792V7.375c0-.437-.355-.792-.792-.792h-2.45c-.317.05-.632-.095-.782-.382-.88-1.665-2.594-2.7-4.476-2.7-1.883 0-3.598 1.035-4.476 2.702-.16.302-.502.46-.833.38H4.293z"}),a.createElement("path",{d:"M12 8.167c-2.68 0-4.86 2.18-4.86 4.86s2.18 4.86 4.86 4.86 4.86-2.18 4.86-4.86-2.18-4.86-4.86-4.86zm2 5.583h-1.25V15c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-1.25H10c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h1.25V11c0-.414.336-.75.75-.75s.75.336.75.75v1.25H14c.414 0 .75.336.75.75s-.336.75-.75.75z"})));i.metadata={width:24,height:24},t.a=i},TEoO:function(e,t,s){"use strict";var a=s("ERkP"),n=s("5UID"),r=s("3GUV"),i=s("iBK2");const o=a.createElement(r.a,null),l=({accessibilityTitle:e,...t})=>{const s=a.createElement(i.b,t);return e?a.createElement(n.a,{title:e},s):s};l.defaultProps={footer:o},t.a=l},Ukpf:function(e,t,s){"use strict";const a={inject(e){const t=document.createElement("script");t.async=!0,t.src=e;const s=document.body;s&&s.appendChild(t)}};t.a=a},YCSy:function(e,t,s){"use strict";var a=s("KEM+"),n=s.n(a),r=(s("kYxP"),s("ERkP")),i=s("VAZu"),o=s("3XMw"),l=s.n(o),c=s("lUZE"),d=s("aITJ"),u=s("MWbm"),h=s("yw4N"),p=s("w9LO"),_=s("mw9i"),m=s("7N4s"),b=s("rHpw");const g=l.a.d2fb334b;class f extends r.Component{constructor(...e){super(...e),n()(this,"_handleViewportSet",(e=>{const{onViewportSet:t}=this.props;t&&t(e)}))}render(){const{children:e,hideAppBar:t,scrollPrompt:s}=this.props,{isModal:a}=this.context;return r.createElement(p.a,{style:[k.root,a&&k.rootModal]},t?null:this._renderAppBar(),r.createElement(_.a,{style:[k.container,a&&k.containerModal]},a?r.createElement(h.a,{onViewportSet:this._handleViewportSet,style:[k.viewport,d.b.isIE()&&k.viewportIE]},e):e,a?null:s),a?s:null)}_renderAppBar(){const{backButtonType:e,backLocation:t,hideBackButton:s,hideLogo:a,history:n,leftControl:o,onBackClick:l,rightControl:d,progressIndication:h}=this.props,{isModal:p}=this.context,_=h||a?void 0:r.createElement(u.a,{style:k.iconContainer},r.createElement(c.a,{accessibilityLabel:g,style:k.icon})),m=h?h.text.text:void 0;return r.createElement(i.a,{backButtonType:e,backLocation:t,centeredLogo:_,fixed:!p,hideBackButton:s||!l,history:n,leftControl:o,onBackClick:l,rightControl:d,title:m,withBottomBorder:!1})}}n()(f,"contextType",m.a),n()(f,"defaultProps",{hideAppBar:!1,hideBackButton:!1,hideLogo:!1});const k=b.a.create((e=>({root:{display:"flex",flexGrow:1},rootModal:{backgroundColor:e.colors.cellBackground,flexShrink:1},container:{flexGrow:1},containerModal:{flexShrink:1},iconContainer:{alignItems:"center",alignSelf:"stretch",display:"flex",flexGrow:1,justifyContent:"center",minWidth:e.spaces.space32},icon:{color:e.colors.brandColor,flexGrow:1,height:"1.75rem"},viewport:{flexGrow:1,flexShrink:1,overflow:"auto"},viewportIE:{flexBasis:"0%"}})));t.a=f},YlqV:function(e,t,s){"use strict";s.d(t,"d",(function(){return o})),s.d(t,"f",(function(){return l})),s.d(t,"c",(function(){return c})),s.d(t,"i",(function(){return d})),s.d(t,"b",(function(){return u})),s.d(t,"a",(function(){return p})),s.d(t,"e",(function(){return m})),s.d(t,"g",(function(){return b})),s.d(t,"j",(function(){return g})),s.d(t,"h",(function(){return f}));s("kYxP"),s("ERkP");var a=s("zrOZ"),n=s("6/RC"),r=s("SrIh"),i=s("q82E");function o(e,t,s){const{key:a,subtask_id:n}=t,r=e[n]&&e[n][a];return void 0===r?s:r}function l(e,t,s){return t.string?t.string:t.subtask_data_reference?o(e,t.subtask_data_reference,s):s}const c=e=>(e?e.split(","):[]).reduce(((e,t)=>{const[s,a]=t.split(":",2);return s&&a&&(e[s]=a),e}),{}),d=(e,t)=>({...e,...t?JSON.parse(t):{}}),u=e=>{switch(e){case i.a.Primary:return"primary";case i.a.Secondary:return"secondary";case i.a.Text:return"text";case i.a.DestructiveSecondary:return"destructiveSecondary";default:return Object(r.a)("Unknown Button Style ${style}"),"primary"}},h={subtask_id:null,subtask_back_navigation:null,progress_indication:null,alert_dialog:i.o.AlertDialog,alert_dialog_suppress_client_events:i.o.AlertDialogSupressClientEvents,app_download_cta:i.o.AppDownloadCTA,cta:i.o.CallToAction,check_logged_in_account:i.o.CheckLoggedInAccount,choice_selection:i.o.ChoiceSelection,contacts_live_sync_permission_prompt:i.o.ContactsLiveSyncPermissionPrompt,email_contacts_sync:i.o.EmailContactsSync,enter_date:i.o.EnterDate,enter_email:i.o.EnterEmail,enter_phone:i.o.EnterPhone,email_verification:i.o.EmailVerification,enter_password:i.o.EnterPassword,enter_text:i.o.EnterText,enter_username:i.o.EnterUsername,end_flow:i.o.EndFlow,fetch_temporary_password:i.o.FetchPassword,interest_picker:i.o.InterestPicker,generic_urt:i.o.GenericURT,menu_dialog:i.o.MenuDialog,notifications_permission_prompt:i.o.NotificationsPermissionPrompt,open_account:i.o.OpenAccount,open_home_timeline:i.o.OpenHomeTimeline,open_link:i.o.OpenLink,phone_verification:i.o.PhoneVerification,privacy_options:i.o.PrivacyOptions,recaptcha:i.o.Recaptcha,security_key:i.o.SecurityKey,select_avatar:i.o.SelectAvatar,select_banner:i.o.SelectBanner,settings_list:i.o.SettingsList,sign_up:i.o.Signup,sign_up_review:i.o.SignupReview,topics_selector:i.o.TopicsSelector,update_users:i.o.UpdateUsers,upload_media:i.o.UploadMedia,user_recommendations_list:i.o.UserRecommendations,user_recommendations_urt:i.o.UserRecommendationsURT,wait_spinner:i.o.WaitSpinner},p={contacts_live_sync_permission_prompt:n.canUseDOM&&"contacts"in navigator&&"ContactsManager"in window?1:0,email_verification:1,topics_selector:1,wait_spinner:1,cta:4},_=Object(a.a)([i.o.AlertDialogSupressClientEvents]),m=e=>e&&Object.keys(e).find((e=>h[e]))||null,b=e=>{const t=m(e);return t?h[t]:null},g=e=>{const t=b(e);return!!t&&_.has(t)},f=e=>e===i.k.Boolean||e===i.k.PreciseLocation},dEMF:function(e,t,s){"use strict";t.byteLength=function(e){var t=c(e),s=t[0],a=t[1];return 3*(s+a)/4-a},t.toByteArray=function(e){var t,s,a=c(e),i=a[0],o=a[1],l=new r(function(e,t,s){return 3*(t+s)/4-s}(0,i,o)),d=0,u=o>0?i-4:i;for(s=0;s<u;s+=4)t=n[e.charCodeAt(s)]<<18|n[e.charCodeAt(s+1)]<<12|n[e.charCodeAt(s+2)]<<6|n[e.charCodeAt(s+3)],l[d++]=t>>16&255,l[d++]=t>>8&255,l[d++]=255&t;2===o&&(t=n[e.charCodeAt(s)]<<2|n[e.charCodeAt(s+1)]>>4,l[d++]=255&t);1===o&&(t=n[e.charCodeAt(s)]<<10|n[e.charCodeAt(s+1)]<<4|n[e.charCodeAt(s+2)]>>2,l[d++]=t>>8&255,l[d++]=255&t);return l},t.fromByteArray=function(e){for(var t,s=e.length,n=s%3,r=[],i=16383,o=0,l=s-n;o<l;o+=i)r.push(d(e,o,o+i>l?l:o+i));1===n?(t=e[s-1],r.push(a[t>>2]+a[t<<4&63]+"==")):2===n&&(t=(e[s-2]<<8)+e[s-1],r.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"="));return r.join("")};for(var a=[],n=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=i.length;o<l;++o)a[o]=i[o],n[i.charCodeAt(o)]=o;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=e.indexOf("=");return-1===s&&(s=t),[s,s===t?0:4-s%4]}function d(e,t,s){for(var n,r,i=[],o=t;o<s;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(a[(r=n)>>18&63]+a[r>>12&63]+a[r>>6&63]+a[63&r]);return i.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},doI8:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var a=s("WpDa"),n=s("ZNT5");t.b=({timelineId:e,endpointUrl:t,endpointParams:s})=>Object(n.a)({timelineId:e,getEndpoint:e=>e.URT.fetchGeneric,getEndpointParams:e=>({endpointUrl:t,...s,...e}),context:"FETCH_TIMELINE",perfKey:"generic"});const r=e=>Object(n.a)({timelineId:`generic-graphql-timeline-${e}`,getEndpoint:e=>e.Graphql.fetchGenericTimelineById,getEndpointParams:t=>({timelineId:e,...t}),formatResponse:a.a,context:"FETCH_GENERIC_TIMELINE_GQL",perfKey:"genericGQL"})},fS8x:function(e,t,s){"use strict";var a=s("ERkP"),n=s("KEM+"),r=s.n(n),i=s("rxPX"),o=s("/NU0"),l=s("AspN");const c=(e,t)=>t.media?t.media:Object(o.a)(t.mediaId)?Object(l.h)(e,t.mediaId)[0]:void 0,d=(e,t)=>void 0!==t.mediaId?t.mediaId:t.media?t.media.id:null;var u=Object(i.a)().propsFromState((()=>({media:c,mediaId:d}))).propsFromActions((()=>({processMedia:l.c,updateMediaUpload:l.l}))).withAnalytics({page:"media",section:"edit"}),h=s("jHSc"),p=s("3XMw"),_=s.n(p),m=s("EeFI"),b=s("/yvb"),g=s("rHpw");const f=_.a.gd80afba,k=_.a.a753a87f;class y extends a.Component{constructor(e){super(e),r()(this,"_getMedia",(()=>{const{media:e}=this.props;return e&&e.mediaFile&&e.mediaFile.isImage?e:null})),r()(this,"_renderAppBarRightControl",(()=>{const{isProcessing:e}=this.state;return a.createElement(b.a,{disabled:e,onPress:this._handleApplyButtonClick,size:"normalCompact",type:"primary"},k)})),r()(this,"_handleBackClick",(()=>{const{analytics:e,onCancel:t}=this.props;e.scribe({action:"cancel"}),t&&t()})),r()(this,"_handleApplyButtonClick",(()=>{const{onCropDone:e}=this.props,t=this._cropper.current;if(t){const{analytics:s,media:a,mediaId:n,onDone:r,processMedia:i,updateMediaUpload:l}=this.props;this.setState({isProcessing:!0});const c=t.getCropData(),{originalMediaFile:d}=a||{},u=!d||0===c.top&&0===c.left&&c.width===d.width&&c.height===d.height;Object(o.a)(n)&&(e?(e(c),r()):(l({id:n,cropData:u?void 0:c}),i(n).then((()=>{this.setState({isProcessing:!1}),s.scribe({action:"done"}),r()}))))}})),this.state={isProcessing:!1},this._cropper=a.createRef(),e.media||e.onCancel()}render(){const{defaultAspectRatio:e,history:t,title:s,withAspectRatioOptions:n,withZoomControl:r}=this.props,i=this._getMedia();return a.createElement(h.b,{backButtonType:"back",containerStyle:v.root,documentTitle:s||f,history:t,onBackClick:this._handleBackClick,rightControl:this._renderAppBarRightControl(),title:s||f},a.createElement(m.a,{defaultAspectRatio:e,media:i,ref:this._cropper,withAspectRatioOptions:n,withZoomControl:r}))}}const v=g.a.create((e=>({root:{flexShrink:1,height:650}})));var w=u(y),E=s("X8FW");const C=g.a.create((e=>({modal:{width:600,maxWidth:"90vw"}})));t.a=e=>a.createElement(E.b,{clickMaskToClose:!1,location:e.location,modalSize:"fitChildren",style:C.modal},a.createElement(w,e))},gPQO:function(e,t,s){"use strict";s.r(t),s.d(t,"OcfScreen",(function(){return $r}));var a=s("97Jx"),n=s.n(a),r=s("KEM+"),i=s.n(r),o=(s("MvUL"),s("ERkP")),l=(s("kYxP"),s("+/5o")),c=s("eb3s"),d=s("k/Ka"),u=s("YlqV"),h=s("q82E"),p=s("t62R"),_=s("aWzz");const m=e=>Object(d.a)("span",e);class b extends o.PureComponent{constructor(...e){super(...e),i()(this,"_textArray",(()=>{const{entities:e,subtaskInputs:t,text:s,size:a,color:r,weight:i}=this.props;return e&&e.reduce(((l,c,d)=>{const{from_index:_,to_index:m,navigation_link:b,subtask_data_reference:g}=c,f=e[d-1]?e[d-1].to_index:0,k=o.createElement(p.c,{color:r,key:`${f},${_}`,size:a,weight:i},s&&s.slice(f,_));let y;const v=`${_},${m}`;if(b){const e=b.link_type===h.h.ChromelessWeb,t={key:v,size:a,weight:i,withInteractiveStyling:!0},r=e&&b.url?{link:{external:!0,pathname:b.url}}:{accessibilityRole:"button",color:"link",onClick:this._handleClick(b)};y=o.createElement(p.c,n()({},r,t),s&&s.slice(_,m))}else y=g?o.createElement(p.c,{color:r,key:v,size:a,weight:i},Object(u.d)(t,g)):o.createElement(p.c,{color:r,key:v,size:a,weight:i},s&&s.slice(_,m));const w=[k,y,d===e.length-1?o.createElement(p.c,{color:r,key:`${m}`,size:a,weight:i},s&&s.slice(m)):null].filter((e=>!!e));return l.concat(w)}),[])})),i()(this,"_handleClick",(e=>t=>{t.preventDefault();const{onClick:s,onNavigate:a}=this.props;a?a(e):s&&s()}))}render(){const{entities:e}=this.props;return e&&e.length>0?this._renderTextArray():this._renderText()}_renderTextArray(){const{align:e,style:t,testID:s}=this.props;return o.createElement(m,{align:e,style:t,testID:s},this._textArray())}_renderText(){const{align:e,text:t,style:s,color:a,size:n,weight:r,testID:i}=this.props;return o.createElement(p.c,{align:e,color:a,size:n,style:s,testID:i,weight:r},t)}}var g=b;class f extends o.Component{constructor(...e){super(...e),i()(this,"_handleConfirm",(()=>{const{subtask:e}=this.props;this._handleButtonClick(e.next_link)})),i()(this,"_handleCancel",(()=>{const{subtask:{cancel_link:e}}=this.props;e&&this._handleButtonClick(e)})),i()(this,"_handleButtonClick",(e=>{const{onNavigate:t,subtaskId:s,updateFlow:a}=this.props;a(s,{link:e.link_id}),t(e)}))}render(){const{subtask:e,onNavigate:t,subtaskInputs:s}=this.props,a=e.primary_text?o.createElement(g,n()({},e.primary_text,{nativeID:l.h,onNavigate:t,subtaskInputs:s})):void 0,r=e.secondary_text?o.createElement(g,n()({},e.secondary_text,{onNavigate:t,subtaskInputs:s})):void 0,{cancel_link:i,next_link:d}=e,u=i&&i.label;return o.createElement(c.a,{cancelButtonLabel:u,confirmButtonLabel:d&&d.label,headline:a,onCancel:this._handleCancel,onConfirm:this._handleConfirm,onMaskClick:this._handleCancel,text:r,withCancelButton:!!u})}}var k=f,y=s("fs1G"),v=s("YCSy"),w=s("MWbm"),E=s("TIdA"),C=s("A91F"),I=s("cmUU");class S extends o.Component{constructor(e){super(e),i()(this,"_handleCtaClick",(e=>{const{onNavigate:t,subtaskId:s,updateFlow:a}=this.props;a(s,{link:e.link_id}),t(e)})),i()(this,"_handlePrimaryActionClick",(()=>{this.setState({downloadLinkClicked:!0}),this._handleCtaClick(this.props.subtask.primary_action_link)})),i()(this,"_handleSecondaryActionClick",(()=>{const{subtask:{secondary_action_link:e}}=this.props;e&&this._handleCtaClick(e)})),this.state={downloadLinkClicked:!1}}render(){const{passthroughOcfScreenProps:e,onNavigate:t,subtask:s,subtaskInputs:a}=this.props,{downloadLinkClicked:r}=this.state,i=s.primary_text?o.createElement(g,n()({},s.primary_text,{nativeID:l.h,onNavigate:t,subtaskInputs:a})):null,c=!r||!s.primary_action_text_after_click,d=r&&s.primary_action_text_after_click||s.primary_action_link.label,h=s.primary_image_url?o.createElement(E.a,{accessibilityLabel:"",aspectMode:C.a.exact(1),image:s.primary_image_url||""}):null,p=s.secondary_text?o.createElement(g,n()({},s.secondary_text,{onNavigate:t,subtaskInputs:a})):null,_=o.createElement(w.a,null,h,p);return o.createElement(v.a,n()({hideLogo:!0},e),o.createElement(I.a,{actionLabel:d||"",actionType:Object(u.b)(s.primary_action_style),headline:i,onAction:c?this._handlePrimaryActionClick:y.a,onClose:y.a,onSecondaryAction:this._handleSecondaryActionClick,secondaryActionLabel:(s.secondary_action_link||{}).label,secondaryActionType:s.secondary_action_style&&Object(u.b)(s.secondary_action_style),subtext:_,withCloseButton:!1}),this.props.errorDialog)}}var x=s("ZS3b"),T="OCF_CallToAction_Button",A=s("oSwX"),O=s("jV+4"),P=s("rHpw");class N extends o.Component{constructor(...e){super(...e),i()(this,"_getCtaButtonProps",(()=>{const{subtask:e}=this.props,[{navigation_link:t,style:s}={},{navigation_link:a,style:n}={},{navigation_link:r,style:i}={}]=e.buttons||[],o=t||e.primary_action_link,l=s||e.primary_action_style,c={actionLabel:o.label||"",actionType:l&&Object(u.b)(l),onAction:o&&this._handleCtaClick(o)},d=a||e.secondary_action_link,h=n||e.secondary_action_style;return{...c,...{secondaryActionLabel:d?d.label:void 0,secondaryActionType:h&&Object(u.b)(h),onSecondaryAction:d&&this._handleCtaClick(d)},...{tertiaryActionLabel:(r||{}).label,tertiaryActionType:i&&Object(u.b)(i),onTertiaryAction:r&&this._handleCtaClick(r)}}})),i()(this,"_getCtaText",(()=>{const{subtask:{header:e,primary_text:t,secondary_text:s,detail_text:a},onNavigate:r,subtaskInputs:i}=this.props;return{primaryText:o.createElement(g,n()({},e&&e.primary_text||t,{nativeID:l.h,onNavigate:r,subtaskInputs:i})),secondaryText:e||s?o.createElement(g,n()({},e&&e.secondary_text||s,{onNavigate:r,subtaskInputs:i})):null,detailText:a?o.createElement(g,n()({},a,{onNavigate:r,subtaskInputs:i})):null}})),i()(this,"_getCtaHeader",(()=>{const{subtask:{header:e}}=this.props;if(null!=e&&e.user){const{user:t}=e;return o.createElement(w.a,{style:D.headerContainer},o.createElement(A.default,{size:"xxLarge",style:D.userAvatar,uri:t.profile_image_url_https}),o.createElement(O.a,{isProtected:t.protected,isVerified:t.verified,name:t.name,screenName:t.screen_name,style:D.userName,withStackedLayout:!0}))}return null})),i()(this,"_handleCtaClick",(e=>()=>{const{onNavigate:t,subtaskId:s,updateFlow:a}=this.props;a(s,{link:e.link_id}),t(e)}))}render(){const{passthroughOcfScreenProps:e,subtask:t}=this.props,{onBackClick:s}=e,{primaryText:a,secondaryText:r,detailText:i}=this._getCtaText();let l,c;if(t.header_image){const e=t.header_image.image.image_info,s={url:e.url,height:e.height,width:e.width};l=({style:t})=>o.createElement(w.a,{style:t},o.createElement(E.a,{accessibilityLabel:e.alt_text,image:s})),c="illustration"}const d=t.text_alignment&&"left"===t.text_alignment?"left":"center";return o.createElement(v.a,n()({hideAppBar:!s,hideLogo:!0},e),o.createElement(I.a,n()({children:this._getCtaHeader(),contentStyle:t.header&&D.textContent,footer:i,graphic:l,graphicDisplayMode:c,headline:a,onClose:y.a,primaryButtonTestID:T,subtext:r,subtextAlign:d,withCloseButton:!1},this._getCtaButtonProps())),this.props.errorDialog)}}const D=P.a.create((e=>({headerContainer:{alignItems:"center",marginTop:e.spaces.space8,marginBottom:e.spaces.space16},textContent:{marginTop:e.spaces.space16},userAvatar:{marginBottom:e.spaces.space8},userName:{alignItems:"center"}})));class R extends o.Component{constructor(...e){super(...e),i()(this,"_executeSubtaskAction",(()=>{const{navigationLink:e,subtaskAction:t,onNavigate:s,onError:a}=this.props;try{t().then((()=>s(e,!0))).catch(a)}catch(e){a(e)}}))}componentDidMount(){this._executeSubtaskAction()}componentDidUpdate(e){const{subtaskId:t}=this.props;t!==e.subtaskId&&this._executeSubtaskAction()}render(){return null}}i()(R,"defaultProps",{onError:y.a});var F=s("v6aA");class L extends o.PureComponent{render(){const{subtask:e,subtaskId:t,onNavigate:s,updateFlow:a}=this.props,{loggedInUserId:n}=this.context,{user_id:r,true_link:i,false_link:l}=e,c=n===r;return o.createElement(R,{navigationLink:c?i:l,onNavigate:s,subtaskAction:()=>(a(t,{link:c?i.link_id:l.link_id}),Promise.resolve()),subtaskId:t})}}i()(L,"contextType",F.a);var B=L,U=P.a.create((e=>({header:{marginBottom:e.spaces.space12},centerText:{textAlign:"center"},contentArea:{marginHorizontal:e.spaces.space32},checkboxText:{flexShrink:1,paddingRight:e.spaces.space12,width:"100%"},headline:{marginVertical:e.spaces.space16},option:{marginTop:e.spaces.space12,flexDirection:"row",justifyContent:"space-between"},primaryButton:{marginTop:e.spaces.space16},subHeader:{marginBottom:e.spaces.space16},formTextInput:{paddingHorizontal:0}}))),j=s("XiMS"),V=s("/yvb"),M=s("V2ml");const z="multi_select",H="single_select";class G extends o.Component{constructor(...e){super(...e),i()(this,"state",{selectedChoices:[]}),i()(this,"_renderRightControl",(()=>o.createElement(w.a,{style:Y.buttonContainer},this._renderCancelButton(),this._renderNextButton()))),i()(this,"_handleCancelButtonClick",(()=>{const{subtask:{skip_link:e},subtaskId:t,onNavigate:s,updateFlow:a}=this.props;e&&(a(t,{link:e.link_id}),s(e))})),i()(this,"_handleNextButtonClick",(()=>{const{subtask:{next_link:e},subtaskId:t,onNavigate:s,updateFlow:a}=this.props,{selectedChoices:n}=this.state;e&&(a(t,{link:e.link_id,selected_choices:n}),s(e))})),i()(this,"_handleRadioChange",((e,t)=>{this.setState({selectedChoices:[t]})})),i()(this,"_onCheckboxChange",(e=>t=>{this._handleMultiSelection(e,t)}))}componentDidUpdate(e){e.subtaskId!==this.props.subtaskId&&this.setState({selectedChoices:[]})}render(){const{passthroughOcfScreenProps:e,subtask:t,subtaskInputs:s}=this.props;return o.createElement(v.a,n()({},e,{rightControl:this._renderRightControl()}),o.createElement(w.a,{style:U.contentArea},t.primary_text&&o.createElement(g,n()({size:"xLarge",style:U.headline,weight:"bold"},t.primary_text,{subtaskInputs:s})),t.secondary_text&&o.createElement(g,n()({color:"gray600"},t.secondary_text,{subtaskInputs:s})),o.createElement(w.a,null,this._renderChoices())))}_renderCheckboxQuestion(e){const{subtaskInputs:t}=this.props,{selectedChoices:s}=this.state,a=s.indexOf(e.id)>-1;return o.createElement(w.a,{accessibilityRole:"label",key:e.id,style:[U.option,Y.checkboxRow,Y.cursor]},o.createElement(g,n()({},e.text,{style:U.checkboxText,subtaskInputs:t})),o.createElement(j.a,{checked:a,onChange:this._onCheckboxChange(e.id)}))}_renderCancelButton(){const{subtask:e}=this.props;return e.skip_link?o.createElement(V.a,{onPress:this._handleCancelButtonClick,size:"normalCompact",style:Y.skipButton,type:"text"},e.skip_link.label):null}_renderNextButton(){const{subtask:e}=this.props,t=this._verifyBothTypesValidity();return e.next_link?o.createElement(V.a,{disabled:!t,onPress:this._handleNextButtonClick,size:"normalCompact",type:"primary"},e.next_link.label):null}_renderChoices(){const{subtask:e}=this.props,{selection_type:t,choices:s}=e;if(s){if(t===z)return o.createElement(o.Fragment,null,s.map((e=>this._renderCheckboxQuestion(e))));if(t===H){const e=s.map((e=>({label:e.text.text,value:e.id})));return o.createElement(M.a,{name:"single-choice",onChange:this._handleRadioChange,options:e,value:this.state.selectedChoices[0]})}}}_verifyBothTypesValidity(){const{subtask:e}=this.props,{selection_type:t}=e,{selectedChoices:s}=this.state;if(e&&t){if(t===z)return this._verifyMultiChoiceValidity(s);if(t===H)return 1===s.length}}_verifyMultiChoiceValidity(e){const{subtask:t}=this.props,{next_link_options:s}=t;if(s){const{min_enable_count:t,max_enable_count:a}=s,n=e.length,r=a&&n>a;return!(t&&n<t)&&!r}return!1}_handleMultiSelection(e,t){const{selectedChoices:s}=this.state;let a;a=s&&s.includes(e)?s.filter((t=>t!==e)):s.concat([e]),this.setState({selectedChoices:a})}}const Y=P.a.create((e=>({buttonContainer:{flexDirection:"row"},skipButton:{marginRight:e.spaces.space12},checkboxRow:{justifyContent:"space-between"},cursor:{cursor:"pointer"}})));var W=s("zh9S"),q=s("9D1O"),$=s("1YZw"),X=s("oEGd"),K=s("0KEI"),Z=s("hqKg"),Q=s("If64"),J=s("G6rE"),ee=s("RqPI");const te=e=>(t,s)=>{const a=s.location.query[e];return Array.isArray(a)?a[0]:a},se=te("country_code"),ae=Object(Z.createSelector)((ne="input",re={},(e,t)=>t.location.state&&t.location.state[ne]||re),te("input_flow_data"),u.i);var ne,re;const ie=te("return_path"),oe=te("is_native"),le=te("test_country_code"),ce=te("target_user_id"),de=Object(Z.createSelector)(q.i,se,((e,t)=>{const s=te("overrides")(e,t);return Object(u.c)(s)}),((e,t)=>t.flowName||t.location.pathname.slice(t.match.path.length)),ae,ie,oe,le,ce,q.s,q.l,q.k,q.n,Q.a,q.r,q.j,q.o,q.p,q.q,((e,t,s,a,n,r,i,o,l,c,d,u,h,p,_,m,b,g,f)=>({currentSubtask:e,countryCode:t,debugOverrides:s,isNative:i,testCountryCode:o,flowName:a,inputFlowData:n,returnPath:r,subtasks:c,flowToken:d,fetchStatus:u,previousNavigableSubtaskId:h,subtaskInputs:_,failureMessage:m,shouldAbort:b,shouldEndFlow:g,startLocation:p,submitFailed:f,targetUserId:l}))),ue={addToast:$.b,callInteractiveSpinnerPath:q.a,clearFlow:q.c,createLocalApiErrorHandler:Object(K.d)("OCF_FLOW"),removeContacts:q.h,fetchTemporaryPassword:q.d,fetchUsers:J.e.fetchMany,logNymizerSignup:(e={})=>(t,s,{api:a})=>a.Nymizer.logSignup(e),navigateSubtask:q.g,startFlow:q.u,submitFlow:q.v,updateFlow:q.x,googleAnalyticsPageView:W.a,googleAnalyticsSendEvent:W.b,scribeAction:W.c,scribePageImpression:W.d,verifyCredentials:ee.n};var he=Object(X.g)(de,ue),pe=s("7JQg");const _e={createLocalApiErrorHandler:Object(K.d)("CONTACTS_SYNC"),uploadAddressBook:e=>(t,s,{api:a})=>a.Contacts.uploadAddressBook(e)};var me=Object(X.b)(_e),be=s("SrIh"),ge=s("Irs7");class fe extends o.Component{constructor(...e){super(...e),i()(this,"_handleCtaClick",(e=>{const{onNavigate:t,subtaskId:s,updateFlow:a}=this.props;a(s,{link:e.link_id}),t(e)})),i()(this,"_handlePrimaryActionClick",(()=>{try{window.navigator.contacts.select(["name","email","tel"],{multiple:!0}).then(this._handleContactResults)}catch(e){Object(be.a)(e),this._handleSecondaryActionClick()}})),i()(this,"_handleContactResults",(e=>{const{analytics:t,createLocalApiErrorHandler:s,uploadAddressBook:a}=this.props,n=e.map((({name:e,email:t,tel:s})=>({name:e[0]||"",email_addresses:t,phone_numbers:s})));if(0===n.length)return t.scribeAction("cancel");t.scribe({action:"success",data:{event_value:n.length}}),a({contacts:n}).catch(s()),this._handleCtaClick(this.props.subtask.next_link)})),i()(this,"_handleSecondaryActionClick",(()=>{const{subtask:{skip_link:e}}=this.props;e&&this._handleCtaClick(e)}))}componentDidMount(){"contacts"in navigator&&"ContactsManager"in window||this._handleSecondaryActionClick()}render(){const{onNavigate:e,passthroughOcfScreenProps:t,subtask:s,subtaskInputs:a}=this.props,r=s.detail_text?o.createElement(g,n()({},s.detail_text,{onNavigate:e,subtaskInputs:a})):null;return o.createElement(v.a,n()({hideLogo:!0},t),o.createElement(I.a,{actionLabel:s.next_link.label||"",footer:r,headline:s.primary_text||"",onAction:this._handlePrimaryActionClick,onClose:y.a,onTertiaryAction:this._handleSecondaryActionClick,subtext:"",tertiaryActionLabel:(s.skip_link||{}).label,withCloseButton:!1}))}}var ke=Object(ge.a)(me(fe),{element:"contacts_sync"}),ye=s("6/RC");const ve=Object(Z.createSelector)(((e,t)=>Array.isArray(t.location.query.error)?t.location.query.error[0]:t.location.query.error),((e,t)=>!!t.location.query.state),((e,t)=>({importError:e,startImport:t}))),we={createLocalApiErrorHandler:Object(K.d)("EMAIL_CONTACTS_SYNC"),importStatus:q.e,scribeAction:W.c,syncContacts:q.w};var Ee=Object(X.g)(ve,we),Ce=s("kGix"),Ie=s("v//M"),Se=s("3XMw"),xe=s.n(Se),Te=s("lUZE"),Ae=s("8jkQ");const Oe=xe.a.cea71013,Pe=()=>null;class Ne extends o.Component{constructor(e){super(e),i()(this,"_startContactImports",(e=>{this._scribeOAuthAction("accepted");const{createLocalApiErrorHandler:t,syncContacts:s}=this.props;s(e).then((e=>this._pollImportStatus())).catch((e=>{t()(e),this.setState({importFinished:!0})}))})),i()(this,"_handlePrimaryActionClick",(()=>{const{subtask:{authorization_url:e,open_in_new_tab:t}}=this.props;if(t&&ye.canUseDOM){const t=`width=500,height=500,top=0,left=${window.innerWidth-500},toolbar=no,location=yes`;window.open(e,"twitter_oauth",t).focus()}else Ae.b.navigateTo(e)})),i()(this,"_handleTertiaryActionClick",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:a}=this.props,{skip_link:n}=t;a(s,{link:n.link_id}),e(n)})),i()(this,"_scribeOAuthAction",(e=>{const{scribeAction:t}=this.props;t({page:"onboarding",section:"email_contacts_sync",component:"oauth_prompt",element:"permission",action:e})})),i()(this,"_handleEvent",(e=>{if(e.origin===`https://${window.location.hostname}`){const t={callback_url:`https://${window.location.hostname}${window.location.pathname}`,...e.data};!t.error&&t.state&&this._startContactImports(t)}})),i()(this,"_pollImportStatus",((e=1)=>{if(e>10)this.setState({importFinished:!0});else{const{createLocalApiErrorHandler:t,importStatus:s}=this.props;this._timer=setTimeout((()=>{s().then((t=>{switch(t.status){case h.b.Success:this.setState({importFinished:!0});break;case h.b.NotFound:this._pollImportStatus(e+1);break;default:this.setState({importFinished:!0})}})).catch((e=>{t()(e),this.setState({importFinished:!0})}))}),1e3)}})),this.state={importFinished:void 0},this._navigating=!1,window.addEventListener("message",this._handleEvent,!1)}componentDidMount(){const{passthroughOcfScreenProps:{history:e},importError:t,location:s,onNavigate:a,startImport:n,subtask:r,subtaskId:i,updateFlow:o}=this.props;this._showLoadingSpinner=n;const{decline_link:l}=r;if("access_denied"===t)this._scribeOAuthAction("declined"),l&&(o(i,{link:l.link_id}),a(l));else if(n){const{error:t,state:a}=s.query,n={callback_url:`https://${window.location.hostname}${s.pathname}`};t&&"string"==typeof t&&(n.error=t),a&&"string"==typeof a&&(n.state=a),e&&e.replace(s.pathname),this._startContactImports(n)}}componentWillUnmount(){this._timer&&clearTimeout(this._timer),window.removeEventListener("message",this._handleEvent,!1)}componentDidUpdate(){const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:a}=this.props,{importFinished:n}=this.state,{next_link:r}=t;!this._navigating&&n&&(this._navigating=!0,a(s,{link:r.link_id}),e(r))}render(){const{errorDialog:e,onNavigate:t,passthroughOcfScreenProps:s,subtask:a,subtaskInputs:r}=this.props,{accept_text:i,detail_text:c,primary_text:d,skip_link:u,secondary_text:h}=a,p=o.createElement(g,n()({},d,{nativeID:l.h,onNavigate:t,subtaskInputs:r})),_=h?o.createElement(g,n()({},h,{onNavigate:t,subtaskInputs:r})):null,m=c?o.createElement(g,n()({},c,{onNavigate:t,subtaskInputs:r})):null;return this._showLoadingSpinner?o.createElement(Ie.a,{fetchStatus:Ce.a.LOADING,loadingMessage:Oe,onRequestRetry:y.a,render:Pe,retryable:!1}):o.createElement(v.a,n()({hideLogo:!0},s),o.createElement(I.a,{actionLabel:i,footer:m,graphic:Te.a,graphicStyle:De.twitterIcon,headline:p,onAction:this._handlePrimaryActionClick,onClose:y.a,onTertiaryAction:this._handleTertiaryActionClick,subtext:_,tertiaryActionLabel:u.label,withCloseButton:!1}),e)}}const De=P.a.create((e=>({twitterIcon:{color:e.colors.brandColor}})));var Re=Ee(Ne);const Fe=Object(Z.createSelector)(q.m,q.t,((e,t)=>({navigationContext:e,verificationSendFailureMessage:t}))),Le={createLocalApiErrorHandler:Object(K.d)("OCF_FLOW_EMAIL_VERIFICATION"),getVerificationStatus:q.f,verifyIdentifier:q.z};var Be=Object(X.g)(Fe,Le),Ue=s("p+r5"),je=s("k49u"),Ve=s("OIs+");const Me=xe.a.e4ff75a9,ze=xe.a.e4f6bd9e,He={[Ve.a.Offline]:Me},Ge=(e,t,s)=>{let a;const n={[je.a.AccessDeniedByBouncer]:{customAction:t=>{Object(K.c)(t,{flow:e})}}};if(s)a={...n,customErrorHandler:({errors:[a]})=>(a.code===je.a.AccessDeniedByBouncer?Object(K.c)(a,{flow:e}):s(t||a.code&&He[a.code]||ze),[])};else if(t){const e={toast:{text:t}};a={[je.a.ValidationFailure]:e,[je.a.OnboardingFlowRetriableFailure]:e,[je.a.OnboardingFlowFailure]:e,defaultToast:{text:t},showToast:!0,...n}}else a={...n,[Ve.a.Offline]:{toast:{text:He[Ve.a.Offline]}},defaultToast:{text:ze},showToast:!0};return a},Ye="email";class We extends o.Component{constructor(e){super(e),i()(this,"_sendEmailVerificationRequest",(()=>{const{createLocalApiErrorHandler:e,subtask:t,verifyIdentifier:s,onNavigate:a,subtaskInputs:n}=this.props,r=t.email&&Object(u.f)(n,t.email)||void 0,i=t.name&&Object(u.f)(n,t.name)||void 0;return s({email:r,display_name:i}).then((e=>{this.setState({email:r})})).catch((s=>{const{flowName:n,verificationSendFailureMessage:r}=this.props;e(Ge(n,r||ze))(s),a(t.fail_link)}))})),i()(this,"_handleCodeUpdated",(e=>{this.setState({pinCode:e.target.value})})),i()(this,"_startStatusPolling",(()=>{const{createLocalApiErrorHandler:e,getVerificationStatus:t,subtask:s,subtaskInputs:a}=this.props,n=s.email.subtask_data_reference,r=n?a[n.subtask_id][n.key]:void 0;this._timer=setTimeout((()=>{t({email:r}).then((e=>{e.verified?(this.setState({pinCode:e.pin_code}),this._clearTimer(),this._handleDoneButtonClick()):(this._clearTimer(),this._startStatusPolling())})).catch((t=>{e()(t),this._clearTimer(),this._startStatusPolling()}))}),1e3)})),i()(this,"_clearTimer",(()=>{this._timer&&clearTimeout(this._timer)})),i()(this,"_handleDoneButtonClick",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:a}=this.props,{email:n,pinCode:r}=this.state;a(s,{code:r,email:n,link:t.next_link.link_id}),e(t.next_link)}));const{subtaskId:t,subtaskInputs:s}=e,a=Object(u.d)(s,{key:Ye,subtask_id:t},"")||"";this.state={email:a,pinCode:""}}componentDidMount(){const{subtask:{verification_status_polling_enabled:e}}=this.props;return e&&this._startStatusPolling(),this._sendEmailVerificationRequest()}componentWillUnmount(){this._clearTimer()}render(){const{onNavigate:e,passthroughOcfScreenProps:t,subtask:s,subtaskInputs:a,progressIndication:r}=this.props,i=o.createElement(V.a,{disabled:!this.state.pinCode,onPress:this._handleDoneButtonClick,size:"normalCompact",type:"primary"},s.next_link.label),c=o.createElement(g,n()({},s.detail_text,{color:"link",onNavigate:e,style:qe.detailLink,subtaskInputs:a}));return o.createElement(v.a,n()({},t,{progressIndication:r,rightControl:i}),o.createElement(w.a,null,o.createElement(w.a,{style:U.contentArea},s.primary_text&&o.createElement(g,n()({},s.primary_text,{nativeID:l.h,onNavigate:e,size:"xLarge",style:U.headline,subtaskInputs:a,weight:"bold"})),s.secondary_text&&o.createElement(g,n()({},s.secondary_text,{color:"gray600",onNavigate:e,subtaskInputs:a})),o.createElement(Ue.a,{autoFocus:!0,helperText:s.detail_text&&c,label:s.hint_text,name:"verfication_code",onChange:this._handleCodeUpdated,style:U.formTextInput,value:this.state.pinCode}))),this.props.errorDialog)}}const qe=P.a.create((e=>({detailLink:{marginTop:e.spaces.space16}})));var $e=Be(We),Xe=s("IMA+");var Ke=e=>{const{onNavigate:t,primaryTextProp:s,secondaryTextProp:a,header:r,subtaskInputs:i}=e;let c,d,u;return r?(u=r.user,c=r.primary_text,d=r.secondary_text):(c=s,d=a),o.createElement(w.a,null,c?o.createElement(g,n()({},c,{nativeID:l.h,onNavigate:t,size:"xLarge",style:U.headline,subtaskInputs:i,weight:"bold"})):null,d?o.createElement(g,n()({},d,{color:"gray600",onNavigate:t,style:U.subHeader,subtaskInputs:i})):null,u?o.createElement(Xe.a,{avatarUri:u.profile_image_url_https,displayMode:"UserCompact",name:u.name,screenName:u.screen_name,userId:u.id_str}):null)},Ze=s("S8sr");class Qe extends o.Component{constructor(e){super(e),i()(this,"_handleDateChange",(e=>{this.setState({date:e,isDateValid:this._isCompleteDate(e)})})),i()(this,"_isCompleteDate",(e=>!!(e&&e.year&&e.month&&e.day))),i()(this,"_handleDoneButtonClick",(()=>{const{onNavigate:e,subtask:{next_link:t},subtaskId:s,updateFlow:a}=this.props,{date:n,isDateValid:r}=this.state;n&&r&&(a(s,{date:n,link:t.link_id}),e(t))})),i()(this,"_handleSkipButtonClick",(()=>{const{onNavigate:e,subtask:{skip_link:t},subtaskId:s,updateFlow:a}=this.props;t&&a(s,{link:t.link_id}),t&&e(t)}));const{subtaskId:t,subtaskInputs:s}=this.props,a={day:void 0,month:void 0,year:void 0},n=Object(u.d)(s,{key:"date",subtask_id:t},void 0)||a;this.state={date:n,isDateValid:this._isCompleteDate(n)}}render(){const{errorDialog:e,onNavigate:t,passthroughOcfScreenProps:s,subtask:a,subtaskInputs:r}=this.props,{detail_text:i,hint_text:l,max_date:c,min_date:d,next_link:u,skip_link:h}=a,{date:p={},isDateValid:_}=this.state,m=o.createElement(V.a,{disabled:!h||!_,onPress:this._handleDoneButtonClick,size:"normalCompact",type:"primary"},u.label),b=h&&o.createElement(V.a,{onPress:this._handleSkipButtonClick,size:"normalCompact",type:"text"},h.label);return o.createElement(v.a,n()({},s,{rightControl:h?b:m}),o.createElement(w.a,{style:[U.contentArea,U.centerText]},o.createElement(Ke,{header:a.header,onNavigate:t,subtaskInputs:r}),o.createElement(Ze.a,{autofocus:!0,day:p.day,label:l,maxSelectableYear:c.year,minSelectableYear:d.year,month:p.month,onChange:this._handleDateChange,year:p.year}),i?o.createElement(g,n()({},i,{color:"gray600",onNavigate:t,subtaskInputs:r})):null),e)}}var Je=s("RgK2"),et=s.n(Je),tt=s("3zvM"),st=s("lMB6"),at=s("FgXs");const nt=e=>({valid:!0});function rt(e={}){const{localValidator:t=nt,...s}=e,a=Object(tt.e)({customActions:{clear:{reducer:(e,t)=>({})}},...s});a.clear=()=>e=>e({type:a.customActionTypes.clear.SUCCESS}),a.validate=(e,s)=>n=>{const r=t(e,s);return r.valid?n(a.fetchOneIfNeeded(e,s)):(n(a.add({[e]:r})),Promise.resolve())};return a.selectEntitiesWithFetchStatus=Object(Z.createSelector)(a.selectAll,(e=>a.selectState(e).fetchStatus||et.a),((e,t)=>Object(at.a)(t,((t,s)=>{const a=e[s]||{};return{...a,valid:!!a.valid||t===Ce.a.FAILED,isLoading:t===Ce.a.LOADING}})))),st.a.register(a)}const it=new RegExp("^[a-zA-Z0-9_\\-+\\.!\\&]+@(?:[a-zA-Z0-9\\-_]+\\.)+[a-zA-Z]{2,63}$"),ot=xe.a.hc72e1fc;var lt=rt({namespace:"emailValidity",fetchOneContext:"FETCH_EMAIL_VALIDITY",fetchOneEndpoint:e=>e.Validity.isEmailAvailable,fetchOneParams:([e],t)=>({email:e,...t}),localValidator:e=>{const t=it.test(e);return{errorMessage:ot,valid:t}}}),ct=s("rxPX");const dt=(e,t)=>t.module.selectEntitiesWithFetchStatus(e);var ut=Object(ct.a)().propsFromState((()=>({validity:dt}))).propsFromActions((({module:e})=>({clearValidity:e.clear,createLocalApiErrorHandler:Object(K.d)("VALIDITY_FIELD_CONTEXT"),validate:e.validate}))),ht=s("VY6S"),pt=s("mN6z");class _t extends o.Component{constructor(e,t){super(e,t),i()(this,"_setInputRef",(e=>{this._input=e})),i()(this,"_handleValueChange",(e=>{const{onChange:t,validationParams:s}=this.props,a=e.target.value.trim();this._validateDebounced({value:a,...s}),this.setState({value:a}),t&&t(e)})),i()(this,"_getIsValid",((e,t)=>!!(t&&e[t]&&e[t].valid)));const s=e.defaultValue||"";this.state={value:s,isValid:this._getIsValid(e.validity,s)},this._validateDebounced=Object(ht.a)((({value:e,...t})=>this.props.validate(e,t).catch(this.props.createLocalApiErrorHandler())),500)}componentWillUnmount(){this.props.clearValidity(),this._validateDebounced.clear(),this.props.onRef(null)}componentDidMount(){const{defaultValue:e,validationParams:t}=this.props;e&&this._validateDebounced({value:e,...t}),this.props.onValidityChange(this.state.isValid),this.props.onRef({clear:()=>this.clear(),focus:()=>this.focus(),isValid:()=>this.isValid(),getValue:()=>this.getValue()})}UNSAFE_componentWillUpdate(e,t){const{validity:s}=this.props,{value:a}=this.state;if(s!==e.validity||a!==t.value){const s=this._getIsValid(e.validity,t.value);this.state.isValid!==s&&this.setState({isValid:s})}}componentDidUpdate(e,t){const{value:s}=this.state,a=t.isValid!==this.state.isValid,n=!Object(pt.a)(e.validationParams,this.props.validationParams);a?this.props.onValidityChange(this.state.isValid):s&&n&&(this.props.clearValidity(),this._validateDebounced({value:s,...this.props.validationParams}))}render(){const{autoComplete:e,autoFocus:t,editable:s,label:a,name:n,style:r,type:i,validity:l}=this.props,{value:c}=this.state,d=c&&l[c]?l[c].errorMessage:"";return o.createElement(Ue.a,{autoComplete:e,autoFocus:t,editable:s,errorText:d,invalid:!!d,label:a,name:n,onChange:this._handleValueChange,ref:this._setInputRef,style:r,type:i,value:this.state.value})}clear(){this.setState({value:"",isValid:!1})}isValid(){return this.state.isValid}getValue(){return this.state.value}focus(){this._input&&this._input.focus()}}i()(_t,"defaultProps",{label:""});var mt=ut(_t),bt=s("H9wA");_.string,_.bool,_.string,_.bool,_.string,_.string.isRequired,_.func,_.func.isRequired,_.func.isRequired,bt.a.style,_.string,_.func.isRequired,_.func.isRequired,_.object.isRequired,_.func.isRequired,_.object.isRequired;var gt=e=>{const{onRef:t,...s}=e;return o.createElement(mt,n()({module:lt,onRef:t,type:"email"},s))};const ft=xe.a.c52be451,kt=xe.a.cfd2f35d,yt=xe.a.gea6cc19,vt=xe.a.i769e50a,wt=xe.a.ec129eb6,Et=xe.a.f1b50489,Ct=xe.a.deaf5b15;class It extends o.Component{constructor(...e){super(...e),i()(this,"state",{showRemoveContactsDialog:!1,disableRemoveContactsButton:!1}),i()(this,"_handleRemoveContactsClick",(()=>{this.setState({showRemoveContactsDialog:!0})})),i()(this,"_handleRemoveContactsConfirm",(()=>{this.setState({showRemoveContactsDialog:!1}),this._handleRemoveContacts()})),i()(this,"_handleRemoveContacts",(()=>{const{addToast:e,removeContacts:t}=this.props;t&&t().then((()=>{this.setState({disableRemoveContactsButton:!0}),e({text:wt,withClearButton:!0})})).catch((()=>{e({action:{label:Ct,onAction:this._handleRemoveContacts},text:Et,withAutoDismiss:!0})}))})),i()(this,"_handleRemoveContactsCancel",(()=>{this.setState({showRemoveContactsDialog:!1})}))}render(){var e;const{onNavigate:t,removeContactsSetting:s,subtaskInputs:a}=this.props,{disableRemoveContactsButton:r}=this.state;return o.createElement(w.a,null,o.createElement(g,n()({},s.primary_text,{onNavigate:t,style:St.header,subtaskInputs:a})),o.createElement(g,n()({},s.secondary_text,{color:"gray600",onNavigate:t,size:"small",style:St.subtext,subtaskInputs:a})),o.createElement(w.a,null,null!=(e=s.value_data)&&e.action_data?o.createElement(V.a,{disabled:r,onPress:this._handleRemoveContactsClick,type:"destructiveText"},s.value_data.action_data.link.label):null,this._maybeRenderRemoveContactsDialog()))}_maybeRenderRemoveContactsDialog(){return this.state.showRemoveContactsDialog?o.createElement(c.a,{cancelButtonLabel:kt,confirmButtonLabel:ft,headline:yt,onCancel:this._handleRemoveContactsCancel,onConfirm:this._handleRemoveContactsConfirm,onMaskClick:this._handleRemoveContactsCancel,text:vt}):null}}const St=P.a.create((e=>({header:{marginTop:e.spaces.space12,marginBottom:e.spaces.space12},subtext:{marginBottom:e.spaces.space20}})));var xt=It;class Tt extends o.Component{constructor(e){super(e),i()(this,"_handleActionClick",(()=>{var e,t;const{onNavigate:s,settingValue:a}=this.props,n=null==(e=a.value_data)||null==(t=e.action_data)?void 0:t.link;n&&s(n)})),i()(this,"_getSettingValueFromSubtaskInputs",(e=>{const{subtaskId:t,subtaskInputs:s}=this.props,{value_identifier:a,value_type:n}=e,r=(Object(u.d)(s,{key:h.j,subtask_id:t},[])||[]).find((e=>e.key===a));let i;var o;r&&Object(u.h)(n)&&(i=null==(o=r.response_data.boolean_data)?void 0:o.result);return i})),i()(this,"_handleSettingGroupClick",(()=>{const{onSettingGroupClick:e,settingValue:t}=this.props;e&&e(t)})),i()(this,"_handleSettingToggle",(()=>{const{onSettingToggle:e,settingValue:t}=this.props,{value_identifier:s}=t;s&&(this.setState({...this.state,[s]:!this.state[s]}),e&&e(t))})),i()(this,"_addToast",(e=>{this.props.addToast&&this.props.addToast(e)}));const{settingValue:t}=e,{value_data:s,value_identifier:a,value_type:n}=t;if(a&&Object(u.h)(n)){let e=this._getSettingValueFromSubtaskInputs(t);var r;if(void 0===e)e=null==s||null==(r=s.boolean_data)?void 0:r.initial_value;this.state={[a]:e}}}render(){const{value_type:e}=this.props.settingValue;switch(e){case h.k.Action:return this._renderAction();case h.k.Boolean:case h.k.PreciseLocation:return this._renderSettingOption();case h.k.SettingsGroup:return this._renderSettingsGroup();case h.k.StaticText:return this._renderHeader();case h.k.DestructiveAction:return this._renderDestructiveAction();default:return null}}_renderHeader(){const{onNavigate:e,settingValue:t,subtaskInputs:s}=this.props,{primary_text:a}=t;return o.createElement(w.a,{style:At.header},o.createElement(g,n()({},a,{onNavigate:e,size:"large",subtaskInputs:s,weight:"bold"})))}_renderDestructiveAction(){const{onNavigate:e,removeContacts:t,settingValue:s,subtaskInputs:a}=this.props;return o.createElement(w.a,{style:{marginBottom:P.a.theme.spaces.space16}},o.createElement(xt,{addToast:this._addToast,onNavigate:e,removeContacts:t,removeContactsSetting:s,subtaskInputs:a}))}_renderAction(){var e,t;const{onNavigate:s,settingValue:a,subtaskInputs:r}=this.props,i=null==(e=a.value_data)||null==(t=e.action_data)?void 0:t.link.label;return o.createElement(w.a,null,o.createElement(g,n()({},a.primary_text,{onNavigate:s,style:At.header,subtaskInputs:r})),o.createElement(g,n()({},a.secondary_text,{color:"gray600",onNavigate:s,size:"small",subtaskInputs:r})),i?o.createElement(w.a,null,o.createElement(V.a,{onPress:this._handleActionClick,type:"text"},i)):null)}_renderSettingOption(){const{onNavigate:e,settingValue:t,showDividers:s,subtaskInputs:a}=this.props,{primary_text:r,secondary_text:i,value_identifier:l}=t;return o.createElement(w.a,{accessibilityRole:"label",focusable:!0,style:[U.option,s&&At.optionDivider]},o.createElement(w.a,{style:U.checkboxText},o.createElement(g,n()({},r,{onNavigate:e,subtaskInputs:a})),i?o.createElement(g,n()({},i,{color:"gray600",onNavigate:e,size:"small",style:At.secondaryText,subtaskInputs:a})):null),l?o.createElement(j.a,{checked:this.state[l],onChange:this._handleSettingToggle}):null)}_renderSettingsGroup(){var e,t;const{onNavigate:s,settingValue:a,subtaskInputs:r}=this.props,{primary_text:i,secondary_text:l,value_data:c}=a,d=null==c||null==(e=c.settings_group_data)?void 0:e.settings,u=null==c||null==(t=c.settings_group_data)?void 0:t.status_text_quantity_pairs;return o.createElement(w.a,{accessibilityRole:"button",onClick:this._handleSettingGroupClick,style:At.settingGroup},o.createElement(g,n()({},i,{onNavigate:s,subtaskInputs:r})),d&&u?this._renderQuantityStatus(d,u):null,l?o.createElement(g,n()({},l,{color:"gray600",onNavigate:s,size:"small",subtaskInputs:r})):null)}_renderQuantityStatus(e,t){const{onNavigate:s,subtaskInputs:a}=this.props,r=e.reduce(((e,t)=>e+(this._getSettingValueFromSubtaskInputs(t)?1:0)),0);let i;return t.forEach((e=>{r>=e.threshold&&(i=o.createElement(g,n()({},e.text,{color:"gray600",onNavigate:s,size:"small",style:At.quantityStatusText,subtaskInputs:a})))})),i}}const At=P.a.create((e=>({header:{marginTop:e.spaces.space32},secondaryText:{marginTop:e.spaces.space12},quantityStatusText:{marginTop:e.spaces.space2,marginBottom:e.spaces.space12},optionDivider:{paddingBottom:e.spaces.space12,borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},settingGroup:{marginTop:e.spaces.space12}})));class Ot extends o.Component{constructor(e){super(e),i()(this,"_renderEmailTextField",(()=>o.createElement(gt,{autoComplete:"email",defaultValue:this.state.email,label:this.props.subtask.hint_text,name:"email",onRef:this._handleSetInputRef,onValidityChange:this._handleUpdateValidity,style:Pt.emailTextField}))),i()(this,"_renderDiscoverabilitySetting",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,subtaskInputs:a}=this.props;return t.discoverability_setting?o.createElement(Tt,{onNavigate:e,onSettingToggle:this._handleDiscoverabilitySettingToggle,settingValue:t.discoverability_setting,subtaskId:s,subtaskInputs:a}):null})),i()(this,"_handleDiscoverabilitySettingToggle",(e=>{const t=this.state.discoverabilityValue;this.setState({discoverabilityValue:!t})})),i()(this,"_handleDoneButtonClick",(()=>{const{subtask:e}=this.props,{discoverabilityValue:t}=this.state,s={discoverability_value:t,email:this._getIdentifierValue(),link:e.next_link.link_id};this._handleButtonClick(e.next_link,s)})),i()(this,"_handleSkipButtonClick",(()=>{const{subtask:e}=this.props;e.skip_link&&this._handleButtonClick(e.skip_link,{link:e.skip_link.link_id})})),i()(this,"_handleButtonClick",((e,t)=>{const{onNavigate:s,subtaskId:a,updateFlow:n}=this.props;n(a,t),s(e)})),i()(this,"_handleSetInputRef",(e=>{this._input=e})),i()(this,"_handleUpdateValidity",(()=>{const e=this._input&&this._input.isValid();this.setState({isValid:!!e})})),i()(this,"_getIdentifierValue",(()=>this._input&&this._input.getValue()||void 0));const{subtask:t,subtaskId:s,subtaskInputs:a}=e,n=t.discoverability_setting&&t.discoverability_setting.value_data&&t.discoverability_setting.value_data.boolean_data&&t.discoverability_setting.value_data.boolean_data.initial_value,r=Object(u.d)(a,{key:"discoverability_value",subtask_id:s},void 0)||n,l=Object(u.d)(a,{key:"email",subtask_id:s},"")||void 0;this.state={discoverabilityValue:r,email:l,isValid:!!l}}render(){const{onNavigate:e,passthroughOcfScreenProps:t,progressIndication:s,subtask:a,subtaskInputs:r}=this.props,{primary_text:i,secondary_text:c,next_link:d,skip_link:u}=a,h=this.state.isValid||!u?o.createElement(V.a,{disabled:!this.state.isValid,onPress:this._handleDoneButtonClick,size:"normalCompact",type:"primary"},d.label):o.createElement(V.a,{onPress:this._handleSkipButtonClick,size:"normalCompact",type:"text"},u.label);return o.createElement(v.a,n()({},t,{progressIndication:s,rightControl:h}),o.createElement(w.a,null,o.createElement(w.a,{style:U.contentArea},i&&o.createElement(g,n()({},i,{nativeID:l.h,onNavigate:e,size:"xLarge",style:U.headline,subtaskInputs:r,weight:"bold"})),c&&o.createElement(g,n()({},c,{color:"gray600",onNavigate:e,subtaskInputs:r})),o.createElement(w.a,{style:Pt.textFieldArea},this._renderEmailTextField()),this._renderDiscoverabilitySetting())),this.props.errorDialog)}}const Pt=P.a.create((e=>({textFieldArea:{marginTop:e.spaces.space20},emailTextField:{paddingHorizontal:0,paddingVertical:e.spaces.space16}}))),Nt={scribeAction:W.c};var Dt=Object(X.b)(Nt),Rt=s("/Dbh");const Ft=xe.a.d5568440;var Lt=rt({namespace:"passwordValidity",fetchOneContext:"FETCH_PASSWORD_VALIDITY",fetchOneEndpoint:e=>e.Validity.fetchPasswordStrength,fetchOneParams:([e],t)=>({password:e,...t}),localValidator:(e,t)=>{const s=!(!t||!t.username)&&e===t.username,a=e.length>=Rt.b,n=e.length<=Rt.a;let r=Ft;return a?n||(r=K.a):r=K.b,{errorMessage:!s&&a&&n?void 0:r,valid:a&&n&&!s}}});const Bt=Object(Z.createSelector)(Lt.selectEntitiesWithFetchStatus,(e=>({validityMap:e}))),Ut={clearPasswordValidity:Lt.clear,createLocalApiErrorHandler:Object(K.d)("PASSWORD_FIELD_CONTEXT"),scribeAction:W.c,validator:Lt.validate};var jt=Object(X.g)(Bt,Ut);const Vt=xe.a.dec3c9b8,Mt={page:"onboarding",component:"password_entry"},zt=xe.a.fa69a1ca,Ht=xe.a.aacf5085;class Gt extends o.Component{constructor(e){super(e),i()(this,"_validate",((e,t)=>{this.props.validator(e,t).catch(this.props.createLocalApiErrorHandler()).then(this._onValidationUpdated(e))})),i()(this,"_validateDebounced",Object(ht.a)(this._validate,500)),i()(this,"_onValidationUpdated",(e=>()=>{const{validityMap:t,scribeAction:s,onPasswordValidated:a,customValidator:n}=this.props;let{valid:r=!1}=e&&t[e]?t[e]:{};n&&"string"==typeof e&&0===e.length&&(r=n().valid),this.setState({valid:r}),s({...Mt,element:"entered_password",action:r?"valid":"invalid"}),a(r)})),i()(this,"_renderFormTextInput",(()=>{const{autoComplete:e,validityMap:t,label:s,customValidator:a}=this.props,{revealed:n,password:r}=this.state;let{valid:i}=this.state,{errorMessage:l=""}=t[r]||{};a&&0===l.length&&(l=a().errorMessage,i=a().valid);const c=o.createElement(p.c,{accessibilityRole:"button",color:"link",onPress:this._handleVisibilityToggle,style:Yt.toggleLink},n?Ht:zt);return o.createElement(Ue.a,{autoComplete:e,errorText:l,helperText:c,invalid:!i,label:s||Vt,name:"password",onChange:this._handlePasswordUpdated,style:U.formTextInput,type:n?"text":"password",value:r})})),i()(this,"_handleVisibilityToggle",(()=>{this.setState({revealed:!this.state.revealed})})),i()(this,"_handlePasswordUpdated",(e=>{const{onPasswordChange:t,skipPasswordValidation:s,userIdentifier:a}=this.props,n=e.target.value;s||this._validateDebounced(n,{username:a}),this.setState({password:n}),t(n)}));const{defaultValue:t}=e;this.state={revealed:!1,password:t||"",valid:!0}}componentWillUnmount(){this.props.clearPasswordValidity(),this._validateDebounced.clear()}render(){const{userIdentifier:e}=this.props;return o.createElement(w.a,{style:U.formTextInput},e?o.createElement("input",{name:"username",type:"hidden",value:e}):null,this._renderFormTextInput())}}i()(Gt,"defaultProps",{autoComplete:"on",onPasswordChange:y.a,onPasswordValidated:y.a,skipPasswordValidation:!1});const Yt=P.a.create((e=>({toggleLink:{marginTop:e.spaces.space4}})));var Wt=jt(Gt);const qt=xe.a.d1f6d336,$t=xe.a.a3841918,Xt=xe.a.f70cd5ed;class Kt extends o.Component{constructor(e){super(e),i()(this,"renderIdentifier",(()=>{const{subtask:e}=this.props,{user_identifier_display_type:t,phone_number:s,username:a,email:n}=e;let r,i;return"phone_number"===t&&(r=s,i=Xt),"username"===t&&(r=a,i=qt),"email"===t&&(r=n,i=$t),r&&i?o.createElement(Ue.a,{editable:!1,label:i,name:r,style:U.formTextInput}):null})),i()(this,"_validatePasswordConfirmation",(()=>{const{subtask:e}=this.props,{show_password_confirmation:t,password_confirmation_mismatch_message:s}=e;if(t&&null!=s&&s.text){const{password:e,passwordConfirmation:t}=this.state;if(e!==t)return{valid:!1,errorMessage:s.text}}return{valid:!0,errorMessage:void 0}})),i()(this,"_handleDoneButtonClick",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:a}=this.props;this._saveCredentialsIfNeeded().then((()=>{a(s,{password:this.state.password,link:t.next_link.link_id}),e(t.next_link)})).catch((()=>{this._scribeSmartLockError(),a(s,{password:this.state.password,link:t.next_link.link_id}),e(t.next_link)}))})),i()(this,"_handleSkipButtonClick",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:a}=this.props,n=t.skip_link;n&&(a(s,{link:n.link_id}),e(n))})),i()(this,"_scribeSmartLockError",(()=>{const{scribeAction:e}=this.props;e({page:"onboarding",section:"enter_password",component:"smart_lock",element:"prompt",action:"error"})})),i()(this,"_handlePasswordChange",(e=>{this.setState({password:e})})),i()(this,"_handlePasswordConfirmationChange",(e=>{this.setState({passwordConfirmation:e})})),i()(this,"_handleValidationChange",(e=>{const{subtask:t}=this.props,{show_password_confirmation:s}=t;if(s){const t=this._validatePasswordConfirmation().valid;this.setState({isPasswordValid:e&&t})}else this.setState({isPasswordValid:e})})),i()(this,"_saveCredentialsIfNeeded",(()=>{const{subtask:e}=this.props,{email:t,phone:s,username:a,skip_password_validation:n}=e,{password:r}=this.state,i=!!window.PasswordCredential,o=a||t||s;if(o&&i&&!n&&navigator.credentials){const e=new window.PasswordCredential({id:o,password:r});return navigator.credentials.store(e)}return Promise.resolve()})),this.state={}}render(){const{errorDialog:e,onNavigate:t,passthroughOcfScreenProps:s,subtask:a,subtaskInputs:r,progressIndication:i}=this.props,{isPasswordValid:l,password:c}=this.state,d=!(c&&c.length),u=l||a.skip_password_validation&&!d,h=u||!a.skip_link?o.createElement(V.a,{disabled:!u,onPress:this._handleDoneButtonClick,size:"normalCompact",type:"primary"},a.next_link.label):o.createElement(V.a,{onPress:this._handleSkipButtonClick,size:"normalCompact",type:"text"},a.skip_link.label),{user_identifier_display_type:p,show_password_confirmation:_}=a;return o.createElement(v.a,n()({},s,{progressIndication:i,rightControl:h}),o.createElement(w.a,{style:U.contentArea},o.createElement(Ke,{header:a.header,onNavigate:t,primaryTextProp:a.primary_text,secondaryTextProp:a.secondary_text,subtaskInputs:r}),p?this.renderIdentifier():null,o.createElement(Wt,{label:a.hint,onPasswordChange:this._handlePasswordChange,onPasswordValidated:this._handleValidationChange,skipPasswordValidation:a.skip_password_validation,userIdentifier:a.username}),_?o.createElement(Wt,{customValidator:this._validatePasswordConfirmation,label:a.password_confirmation_hint,onPasswordChange:this._handlePasswordConfirmationChange,onPasswordValidated:this._handleValidationChange,userIdentifier:a.username}):null),e)}}var Zt=Dt(Kt);const Qt=new RegExp("^\\+?[0-9\\-\\.\\(\\)\\s]{7,1000}$"),Jt=xe.a.cd24fe6f;var es=rt({namespace:"phoneNumberValidity",fetchOneContext:"FETCH_PHONE_VALIDITY",fetchOneEndpoint:e=>e.Validity.isPhoneNumberAvailable,fetchOneParams:([e],t)=>({raw_phone_number:e,...t}),localValidator:e=>{const t=Qt.test(e);return{errorMessage:Jt,valid:t}}});var ts=e=>{const{countryCode:t,onRef:s,...a}=e,r={country_code:t};return o.createElement(mt,n()({module:es,onRef:s,type:"tel",validationParams:r},a))},ss=s("6XNv");const as=xe.a.gf8388fe;class ns extends o.Component{constructor(e){super(e),i()(this,"_renderCountryCodes",(()=>{const{country_codes:e}=this.props.subtask;if(e&&e.length){const t=e.map((e=>({label:e.text.text,value:e.id})));return o.createElement(ss.a,{helperText:void 0,label:as,onChange:this._handleCountryChange,options:t,value:this.state.countryCode||""})}return null})),i()(this,"_handleCountryChange",(e=>{this.setState({countryCode:e})})),i()(this,"_renderPhoneTextField",(()=>o.createElement(ts,{autoComplete:"tel",countryCode:this.state.countryCode,defaultValue:this.state.phoneNumber,label:this.props.subtask.hint_text,name:"phone_number",onRef:this._handleSetInputRef,onValidityChange:this._handleUpdateValidity,style:rs.phoneTextField}))),i()(this,"_renderDiscoverabilitySetting",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,subtaskInputs:a}=this.props;return t.discoverability_setting?o.createElement(Tt,{onNavigate:e,onSettingToggle:this._handleDiscoverabilitySettingToggle,settingValue:t.discoverability_setting,subtaskId:s,subtaskInputs:a}):null})),i()(this,"_handleDiscoverabilitySettingToggle",(e=>{const t=this.state.discoverabilityValue;this.setState({discoverabilityValue:!t})})),i()(this,"_handleDoneButtonClick",(()=>{const{subtask:e}=this.props,{countryCode:t,discoverabilityValue:s}=this.state,a={country_code:t,discoverability_value:s,phone_number:this._getIdentifierValue(),link:e.next_link.link_id};this._handleButtonClick(e.next_link,a)})),i()(this,"_handleSkipButtonClick",(()=>{const{subtask:e}=this.props;e.skip_link&&this._handleButtonClick(e.skip_link,{link:e.skip_link.link_id})})),i()(this,"_handleButtonClick",((e,t)=>{const{onNavigate:s,subtaskId:a,updateFlow:n}=this.props;n(a,t),s(e)})),i()(this,"_handleSetInputRef",(e=>{this._input=e})),i()(this,"_handleUpdateValidity",(()=>{const e=this._input&&this._input.isValid();this.setState({isValid:!!e})})),i()(this,"_getIdentifierValue",(()=>this._input&&this._input.getValue()||void 0));const{subtask:t,subtaskId:s,subtaskInputs:a}=e,n=t.discoverability_setting&&t.discoverability_setting.value_data&&t.discoverability_setting.value_data.boolean_data&&t.discoverability_setting.value_data.boolean_data.initial_value,r=Object(u.d)(a,{key:"country_code",subtask_id:s},t.default_country_code)||void 0,l=Object(u.d)(a,{key:"discoverability_value",subtask_id:s},void 0)||n,c=Object(u.d)(a,{key:"phone_number",subtask_id:s},"")||void 0;this.state={countryCode:r,discoverabilityValue:l,phoneNumber:c,isValid:!!c}}render(){const{onNavigate:e,passthroughOcfScreenProps:t,progressIndication:s,subtask:a,subtaskInputs:r}=this.props,{primary_text:i,secondary_text:c,next_link:d,skip_link:u}=a,h=this.state.isValid||!u?o.createElement(V.a,{disabled:!this.state.isValid,onPress:this._handleDoneButtonClick,size:"normalCompact",type:"primary"},d.label):o.createElement(V.a,{onPress:this._handleSkipButtonClick,size:"normalCompact",type:"text"},u.label);return o.createElement(v.a,n()({},t,{progressIndication:s,rightControl:h}),o.createElement(w.a,null,o.createElement(w.a,{style:U.contentArea},i&&o.createElement(g,n()({},i,{nativeID:l.h,onNavigate:e,size:"xLarge",style:U.headline,subtaskInputs:r,weight:"bold"})),c&&o.createElement(g,n()({},c,{color:"gray600",onNavigate:e,subtaskInputs:r})),o.createElement(w.a,{style:rs.textFieldArea},this._renderCountryCodes(),this._renderPhoneTextField()),this._renderDiscoverabilitySetting())),this.props.errorDialog)}}const rs=P.a.create((e=>({textFieldArea:{marginTop:e.spaces.space20},phoneTextField:{paddingHorizontal:0,paddingVertical:e.spaces.space16}})));var is=s("Lam0");class os extends o.Component{constructor(...e){super(...e),i()(this,"_handleRecaptchaStateChange",(e=>{const{subtaskId:t,subtask:s,updateFlow:a,onNavigate:n}=this.props,{next_link:r}=s;e&&(a(t,{link:r.link_id,recaptcha_response:e}),n(r))})),i()(this,"_handleSkipButtonClick",(()=>{const{onNavigate:e,subtask:{skip_link:t},subtaskId:s,updateFlow:a}=this.props;t&&a(s,{link:t.link_id}),t&&e(t)}))}render(){const{errorDialog:e,onNavigate:t,passthroughOcfScreenProps:s,subtask:a,subtaskInputs:r}=this.props,{primary_text:i,secondary_text:c,skip_link:d}=a,u=d&&o.createElement(V.a,{onPress:this._handleSkipButtonClick,size:"normalCompact",type:"text"},d.label);return o.createElement(v.a,n()({},s,{rightControl:u}),o.createElement(w.a,{style:U.contentArea},i?o.createElement(g,n()({},i,{nativeID:l.h,onNavigate:t,size:"xLarge",style:U.headline,subtaskInputs:r,weight:"bold"})):null,c?o.createElement(g,n()({},c,{color:"gray600",onNavigate:t,subtaskInputs:r})):null,o.createElement(is.a,{nextButtonDisabled:!1,onChange:this._handleRecaptchaStateChange,withConsentForm:!1})),e)}}class ls extends o.Component{constructor(e){super(e),i()(this,"_handleDoneButtonClick",(()=>{const{onNavigate:e,subtask:{next_link:t},subtaskId:s,updateFlow:a}=this.props;a(s,{...this.state,link:t.link_id}),e(t)})),i()(this,"_handleSkipButtonClick",(()=>{const{onNavigate:e,subtask:{skip_link:t},subtaskId:s,updateFlow:a}=this.props;t&&a(s,{link:t.link_id}),t&&e(t)})),i()(this,"_handleEntryUpdated",(e=>{const{value:t=""}=e.target;this.setState({text:t})})),i()(this,"_getAutoCompleteFromKeyboardType",(e=>{switch(e){case h.f.Email:return"email";case h.f.Telephone:return"tel";default:return}})),i()(this,"_getPropsFromKeyboardType",(e=>{switch(e){case h.f.Email:return"email";case h.f.Number:return"number";case h.f.Password:return"password";case h.f.Telephone:return"tel";default:return"text"}})),this.state={text:this.props.subtask.default_text||""}}render(){const{errorDialog:e,onNavigate:t,passthroughOcfScreenProps:s,subtask:a,subtaskInputs:r}=this.props,{keyboard_type:i,hint_text:l,max_length:c,multiline:d,next_link:u,skip_link:h,detail_text:p}=a,_=o.createElement(V.a,{disabled:!h&&!this.state.text,onPress:this._handleDoneButtonClick,size:"normalCompact",type:"primary"},u.label),m=h&&o.createElement(V.a,{onPress:this._handleSkipButtonClick,size:"normalCompact",type:"text"},h.label);return o.createElement(v.a,n()({},s,{rightControl:this.state.text||!h?_:m}),o.createElement(w.a,{style:U.contentArea},o.createElement(Ke,{header:a.header,onNavigate:t,primaryTextProp:a.primary_text,secondaryTextProp:a.secondary_text,subtaskInputs:r}),o.createElement(Ue.a,{autoComplete:this._getAutoCompleteFromKeyboardType(i),label:l||"",maxLength:c,multiline:d,name:"text",onChange:this._handleEntryUpdated,style:U.formTextInput,type:this._getPropsFromKeyboardType(i),value:this.state.text}),p?o.createElement(g,n()({},p,{color:"gray600",onNavigate:t,subtaskInputs:r})):null),e)}}var cs=s("LXAX");const ds=Object(Z.createSelector)(J.e.selectLoggedInUser,cs.b,q.m,((e,t,s)=>({loggedInUser:e,navigationContext:s,isUsernameValid:t.valid,validationError:t.desc}))),us={fetchUsernameAvailability:cs.a};var hs=Object(X.g)(ds,us),ps=s("EweD");const _s=xe.a.d1f6d336;class ms extends o.Component{constructor(e){super(e),i()(this,"_maybeRenderDetailTexts",(()=>{const{subtask:e,subtaskInputs:t}=this.props,{currentDetailTextIndex:s}=this.state;return e.detail_texts&&e.detail_texts.length?o.createElement(g,n()({},e.detail_texts[s],{color:"link",onNavigate:this._handleDetailTextClick,style:bs.detailLink,subtaskInputs:t})):void 0})),i()(this,"_handleDetailTextClick",(e=>{const{analytics:t,onNavigate:s}=this.props;"show_more_usernames"===e.link_id?(this._updateCurrentDetailTextIndex(),t.scribe({element:"show_more",action:"click"})):(this._selectUsername(e.link_id,this._fetchUsernameStatus),t.scribe({element:"suggestion",action:"click"})),s(e)})),i()(this,"_handleUsernameUpdated",(e=>{const t=e.target.value;this._selectUsername(t,this._fetchUsernameStatusDebounced)})),i()(this,"_selectUsername",((e,t)=>{this.setState({username:e}),t(e)})),i()(this,"_handleNextButtonClick",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:a}=this.props,{username:n}=this.state;t.next_link&&(a(s,{username:n,link:t.next_link.link_id}),e(t.next_link))})),i()(this,"_handleSkipButtonClick",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:a}=this.props,n=t.skip_link;n&&(a(s,{link:n.link_id}),e(n))})),i()(this,"_fetchUsernameStatus",(e=>{const{analytics:t,fetchUsernameAvailability:s,loggedInUser:a}=this.props;a&&s({email:a.email&&a.email[0]&&a.email[0].address,full_name:a.name,suggest:!1,username:e}).then((e=>{e&&!e.valid&&"taken"===e.reason&&t.scribe({element:"username",action:"taken"})}))})),i()(this,"_updateCurrentDetailTextIndex",(()=>{this.setState({currentDetailTextIndex:this.state.currentDetailTextIndex+1})}));const{loggedInUser:t,subtaskId:s,subtaskInputs:a}=e,r=Object(u.d)(a,{key:"username",subtask_id:s},"")||(t?t.screen_name:"");this.state={currentDetailTextIndex:0,username:r},this._fetchUsernameStatusDebounced=Object(ht.a)(((...e)=>this._fetchUsernameStatus(...e)),250)}componentDidMount(){const{action:e,text:t}=this.props.navigationContext||{};"set_text"===e&&t&&this._selectUsername(t,this._fetchUsernameStatus)}render(){const{isUsernameValid:e,loggedInUser:t,onNavigate:s,passthroughOcfScreenProps:a,subtask:r,subtaskInputs:i,progressIndication:c,validationError:d}=this.props,{username:u}=this.state,h=(t&&t.screen_name&&t.screen_name.toLowerCase())===(u&&u.toLowerCase()),p=o.createElement(V.a,{disabled:!e,onPress:this._handleNextButtonClick,size:"normalCompact",type:"primary"},r.next_link.label),_=r.skip_link&&o.createElement(V.a,{onPress:this._handleSkipButtonClick,size:"normalCompact",type:"primary"},r.skip_link.label),m=u&&!h?p:_||p;return o.createElement(v.a,n()({},a,{progressIndication:c,rightControl:m}),o.createElement(o.Fragment,null,o.createElement(w.a,{style:U.contentArea},o.createElement(g,n()({},r.primary_text,{nativeID:l.h,onNavigate:s,size:"xLarge",style:U.headline,subtaskInputs:i,weight:"bold"})),o.createElement(g,n()({},r.secondary_text,{color:"gray600",onNavigate:s,subtaskInputs:i})),o.createElement(Ue.a,{Icon:ps.a,autoComplete:"off",autoCorrect:!1,autoFocus:!0,errorText:d,invalid:!!u&&!h&&!e,label:r.hint||_s,name:"username",onChange:this._handleUsernameUpdated,showValidationIcon:!!u,spellCheck:"false",style:U.formTextInput,value:u}),this._maybeRenderDetailTexts())),this.props.errorDialog)}}const bs=P.a.create((e=>({detailLink:{marginTop:e.spaces.space16}})));var gs=Object(ge.a)(hs(ms),{section:"enter_username"}),fs=s("v84o"),ks=s("doI8"),ys=s("oQhu"),vs=s("BV3T"),ws=s("VTxf"),Es=s("fTQJ"),Cs=s("wgnn"),Is=s("ywYn");const Ss=e=>{switch(e){case Cs.a.NOT_FOUND:return o.createElement(ws.a,null);case Cs.a.NOT_ALLOWED:return o.createElement(vs.a,null);default:return Object(be.a)(`Unhandled timeline unavailable reason in Ocf GenericURT screen: ${e}`),null}};class xs extends o.Component{constructor(...e){super(...e),i()(this,"_getModule",Object(ys.a)((()=>{const{graphql_timeline_query:e,timeline_source:t}=this.props.subtask;return e?Object(ks.a)(e.timeline_key):Object(fs.a)({urtUrl:{url:t||"",urlType:Is.a.UrtEndpoint}})}))),i()(this,"_handleNextButtonClick",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:a}=this.props;a(s,{link:t.next_link.link_id}),e(t.next_link)}))}render(){var e,t;const{passthroughOcfScreenProps:s,onNavigate:a,subtask:r,subtaskInputs:i,errorDialog:c}=this.props,d=o.createElement(V.a,{onPress:this._handleNextButtonClick,size:"normalCompact",type:"primary"},r.next_link.label),u=o.createElement(v.a,n()({},s,{rightControl:d}),o.createElement(w.a,{style:U.contentArea},null!=(e=r.header)&&e.primary_text?o.createElement(g,n()({},r.header.primary_text,{nativeID:l.h,onNavigate:a,size:"xLarge",style:U.headline,subtaskInputs:i,weight:"bold"})):null,null!=(t=r.header)&&t.secondary_text?o.createElement(g,n()({},r.header.secondary_text,{onNavigate:a,style:U.subHeader,subtaskInputs:i})):null,o.createElement(w.a,null,r.graphql_timeline_query||r.timeline_source?o.createElement(Es.a,{module:this._getModule(),renderUnavailable:Ss,title:""}):null)),c);return r.scribe_config?o.createElement(pe.b,{namespace:r.scribe_config},u):u}}var Ts=s("zrOZ");const As="selected_custom_interests",Os="selected_interest_ids",Ps=(e,t)=>{const s=Object(q.r)(e);return(Object(u.d)(s,{key:As,subtask_id:t.subtaskId},[])||[]).map((e=>({topic:e.custom_interest,ttt_token:e.ttt_token})))},Ns=Object(Z.createSelector)(Ps,((e,t)=>Ps(e,t).map((e=>e.topic))),((e,t)=>{const s=Object(q.r)(e);return Object(u.d)(s,{key:Os,subtask_id:t.subtaskId},[])||void 0}),((e,t,s)=>({initialCustomInterests:e,initialCustomInterestIds:t,initialSelectedInterestIds:s})));var Ds=Object(X.c)(Ns),Rs=s("2dXj"),Fs=s("aV/s"),Ls=s("GZwR");const Bs=[Ls.a.Topics];class Us extends o.Component{constructor(e){super(e),i()(this,"_maybeRenderCustomInterests",(()=>{const{subtask:e}=this.props,{custom_interests_header:t}=e,{customInterests:s,shouldRenderCustomInterests:a}=this.state;if(a)return o.createElement(w.a,null,o.createElement(w.a,{style:js.group,testID:"custom"},o.createElement(p.c,{size:"large",style:js.groupHeader,weight:"bold"},t),o.createElement(w.a,{style:js.pillsContainer},s.map((e=>this._renderCustomInterest(e.topic))))))})),i()(this,"_renderGroup",(e=>{let t;if(e.show_more){const s=e.show_more.initial_to_show+(e.expanded?e.show_more.extra_to_show:0);t=e.items.slice(0,s)}else t=e.items;return o.createElement(w.a,{key:`group_${e.header}`,style:js.group,testID:"group"},o.createElement(p.c,{size:"large",style:js.groupHeader,weight:"bold"},e.header),o.createElement(w.a,{style:js.pillsContainer},t.map(this._renderSelectionPill),this._maybeRenderShowMoreButton(e)))})),i()(this,"_maybeRenderShowMoreButton",(e=>{const t=e.show_more;return t&&e.items.length>t.initial_to_show&&!e.expanded?o.createElement(Fs.a,{compact:!0,key:`showMore_${e.header}`,mode:"expand",onClick:this._handleShowMore(e),style:js.selectionPillStyles,text:t.text}):null})),i()(this,"_renderCustomInterest",(e=>{const{selectedCustomInterestIds:t}=this.state;return o.createElement(Fs.a,{compact:!0,key:`selectionPill_${e}`,onClick:this._handleToggleCustomInterest(e),selected:t.has(e),style:js.selectionPillStyles,text:e})})),i()(this,"_renderSelectionPill",(e=>{const t=this.state.selectedInterestIds.has(e.id),s=this._handleToggleInterest(e.id,t);return o.createElement(Fs.a,{compact:!0,key:`selectionPill_${e.id}`,onClick:s,selected:t,style:js.selectionPillStyles,text:e.name})})),i()(this,"_shouldShowSkipInstead",(()=>{const{selectedInterestIds:e,selectedCustomInterestIds:t}=this.state,{subtask:s}=this.props;return s.skip_link&&0===e.size&&0===t.size})),i()(this,"_handleSuggestionSelected",(e=>{const{customInterestIds:t,selectedCustomInterestIds:s}=this.state,{topic:a,ttt_context:n}=e.data,r={topic:a,ttt_token:n};t.has(a)||this.setState({customInterests:this.state.customInterests.concat([r]),customInterestIds:Object(Ts.a)([...t]).add(a),selectedCustomInterestIds:Object(Ts.a)([...s]).add(a),shouldRenderCustomInterests:!0})})),i()(this,"_handleShowMore",(e=>()=>{const t=this.state.groups,s=t.find((t=>t.header===e.header));s&&(s.expanded=!0),this.setState({groups:t})})),i()(this,"_handleToggleCustomInterest",(e=>()=>{const t=Object(Ts.a)([...this.state.selectedCustomInterestIds]);t.has(e)?(t.delete(e),this.setState({selectedCustomInterestIds:t})):this.setState({selectedCustomInterestIds:t.add(e)})})),i()(this,"_handleToggleInterest",((e,t)=>()=>{const s=Object(Ts.a)([...this.state.selectedInterestIds]);t?(s.delete(e),this.setState({selectedInterestIds:s})):this.setState({selectedInterestIds:s.add(e)})})),i()(this,"_handleNextButtonClick",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:a}=this.props,{customInterests:n,selectedCustomInterestIds:r}=this.state,i=n.reduce(((e,t)=>(r.has(t.topic)&&e.push({custom_interest:t.topic,ttt_token:t.ttt_token}),e)),[]);a(s,{link:t.next_link.link_id,selected_interest_ids:Array.from(this.state.selectedInterestIds),selected_custom_interests:i}),e(t.next_link)})),i()(this,"_handleSkipButtonClick",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:a}=this.props;t.skip_link&&a(s,{link:t.skip_link.link_id}),t.skip_link&&e(t.skip_link)}));const{initialCustomInterests:t,initialCustomInterestIds:s,initialSelectedInterestIds:a}=e,{selected_items:n}=e.subtask;this.state={groups:e.subtask.groups||[],customInterests:t,customInterestIds:Object(Ts.a)(s),selectedCustomInterestIds:Object(Ts.a)(s),selectedInterestIds:a&&a.length>0?Object(Ts.a)(a):Object(Ts.a)(n||[]),shouldRenderCustomInterests:t.length>0}}render(){const{passthroughOcfScreenProps:e,onNavigate:t,subtask:s,subtaskInputs:a}=this.props,{groups:r}=this.state,i=o.createElement(V.a,{onPress:this._handleNextButtonClick,size:"normalCompact",type:"primary"},s.next_link.label),c=s.skip_link?o.createElement(V.a,{onPress:this._handleSkipButtonClick,size:"normalCompact",type:"text"},s.skip_link.label):null,d=this._shouldShowSkipInstead()?c:i;return o.createElement(v.a,n()({},e,{rightControl:d}),o.createElement(w.a,{style:U.contentArea},s.primary_text?o.createElement(g,n()({},s.primary_text,{nativeID:l.h,onNavigate:t,size:"xLarge",style:U.headline,subtaskInputs:a,weight:"bold"})):null,s.secondary_text?o.createElement(g,n()({},s.secondary_text,{onNavigate:t,style:U.subHeader,subtaskInputs:a})):null,s.hide_search?null:o.createElement(w.a,{style:js.searchContainer},o.createElement(Rs.c,{filter:Bs,maxTopics:8,onItemClick:this._handleSuggestionSelected,placeholder:s.hint,rounded:!0,shouldAutoFocus:!0,shouldClearOnSelect:!0,source:Ls.d.WelcomeFlow,withFocusStyling:!0})),this._maybeRenderCustomInterests(),o.createElement(w.a,null,r.map(this._renderGroup))),this.props.errorDialog)}}const js=P.a.create((e=>({searchContainer:{marginBottom:e.spaces.space16,zIndex:1},selectionPillStyles:{margin:e.spaces.space4},pillsContainer:{flexDirection:"row",flexWrap:"wrap"},groupHeader:{marginTop:e.spaces.space12,marginBottom:e.spaces.space12},group:{marginBottom:e.spaces.space12}})));var Vs=Ds(Us),Ms=s("mjJ+");class zs extends o.Component{constructor(...e){super(...e),i()(this,"_makeNavFunction",(e=>()=>{const{onNavigate:t,subtaskId:s,updateFlow:a}=this.props;a(s,{link:e.link_id}),t(e)})),i()(this,"_itemFromNavLink",(e=>({text:e.label||"",onClick:this._makeNavFunction(e)})))}render(){const{onNavigate:e,subtask:t,subtaskInputs:s}=this.props;return o.createElement(Ms.a,{cancelButtonLabel:t.cancel_link&&t.cancel_link.text,description:t.primary_text?o.createElement(g,n()({},t.primary_text,{nativeID:l.h,onNavigate:e,subtaskInputs:s})):null,items:t.primary_action_links.map(this._itemFromNavLink),onCloseRequested:t.cancel_link?this._makeNavFunction(t.cancel_link):y.a})}}var Hs=s("vEo5");const Gs=Object(Z.createSelector)(Hs.selectShouldPromptBrowserPush,(e=>Hs.selectBrowserPushStatus(e)),((e,t)=>({promptAllowed:e,pushSettingsFetchStatus:t.fetchStatus,subscribed:t.subscribed}))),Ys={createLocalApiErrorHandler:Object(K.d)("NOTIFICATIONS_PERMISSIONS_PROMPT"),dismissPushNotificationsPrompt:Hs.dismissPushNotificationsPrompt,fetchPushSettingsIfNeeded:Hs.fetchPushSettingsIfNeeded,loadPushPromptSettingsIfNeeded:Hs.loadPushPromptSettingsIfNeeded,pushSubscribe:Hs.pushSubscribe};var Ws=Object(X.g)(Gs,Ys),qs=s("5pef");function $s(e,t){e.granted_link.label||Object(be.a)("Invalid notification permission prompt subtask: granted_link does not have a label",{extra:{subtaskId:t,grantedLinkId:e.granted_link.link_id}})}class Xs extends o.Component{constructor(...e){super(...e),i()(this,"componentDidMount",(()=>{const{createLocalApiErrorHandler:e,fetchPushSettingsIfNeeded:t,pushSettingsFetchStatus:s,subtask:a,subtaskId:n}=this.props;$s(a,n),t().catch(e()),s===Ce.a.LOADED&&this._skipIfPushPromptNotAllowed()})),i()(this,"componentDidUpdate",(e=>{const{pushSettingsFetchStatus:t,subtask:s}=this.props;t===Ce.a.LOADED&&e.pushSettingsFetchStatus!==Ce.a.LOADED&&this._skipIfPushPromptNotAllowed(),s!==e.subtask&&$s(s,this.props.subtaskId)})),i()(this,"_actionClicked",(e=>{const{onNavigate:t,subtaskId:s,updateFlow:a}=this.props;a(s,{link:e.link_id}),t(e)})),i()(this,"_handleSkip",(()=>{const{dismissPushNotificationsPrompt:e,subtask:t}=this.props;e(),this._actionClicked(t.denied_link)})),i()(this,"_handleConfirm",(()=>{const{subtask:e,pushSubscribe:t}=this.props;t().then((()=>{this._actionClicked(e.granted_link)}))})),i()(this,"_skipIfPushPromptNotAllowed",(()=>{const{promptAllowed:e,subscribed:t,subtask:s}=this.props;e||this._actionClicked(t?s.granted_link:s.denied_link)}))}render(){const{passthroughOcfScreenProps:e,onNavigate:t,promptAllowed:s,subtask:a,subtaskInputs:r}=this.props,i=a.primary_text?o.createElement(g,n()({},a.primary_text,{nativeID:l.h,onNavigate:t,subtaskInputs:r})):null,c=a.secondary_text?o.createElement(g,n()({},a.secondary_text,{onNavigate:t,subtaskInputs:r})):null;return s&&a.granted_link.label?o.createElement(v.a,n()({hideLogo:!0},e),o.createElement(I.a,{actionLabel:a.granted_link.label,graphic:qs.a,headline:i,onAction:this._handleConfirm,onClose:this._handleSkip,onTertiaryAction:this._handleSkip,subtext:c,tertiaryActionLabel:a.denied_link.label,withCloseButton:!1})):null}}var Ks=Ws(Xs);const Zs={callOnboardingPath:q.b,createLocalApiErrorHandler:Object(K.d)("OCF_OPEN_LINK")};var Qs=Object(X.b)(Zs);class Js extends o.Component{constructor(...e){super(...e),i()(this,"_hitCallbackPath",(()=>{const{createLocalApiErrorHandler:e,flowName:t,subtask:{onboarding_callback_path:s},callOnboardingPath:a}=this.props;return s?a(s).catch(e(Ge(t,void 0,y.a))):Promise.resolve()}))}render(){const{subtask:e,subtaskId:t,onNavigate:s}=this.props;return o.createElement(R,{navigationLink:e.link,onNavigate:s,subtaskAction:this._hitCallbackPath,subtaskId:t})}}var ea=Qs(Js),ta=s("Mx3A");const sa=Object(Z.createSelector)(q.m,q.t,((e,t)=>({navigationContext:e,verificationSendFailureMessage:t}))),aa={createLocalApiErrorHandler:Object(K.d)("OCF_FLOW_PHONE_VERIFICATION"),verifyIdentifier:q.z};var na=Object(X.g)(sa,aa);const ra="normalized_phone";class ia extends o.Component{constructor(e,t){super(e,t),i()(this,"_sendSmsVerificationRequest",(()=>{const{createLocalApiErrorHandler:e,navigationContext:t,subtask:s,onNavigate:a,subtaskInputs:n,verifyIdentifier:r}=this.props,i=s.phone_number&&Object(u.f)(n,s.phone_number),o=s.phone_country_code&&Object(u.f)(n,s.phone_country_code),l=t&&t.action?t.action===h.n.ResendVoice:!!s.send_via_voice;this._isSmsAutoVerifySupported&&this._autoVerifySmsCode();return r({phone:i,use_voice:l,sim_country_code:o,send_auto_verify_hash:this._isSmsAutoVerifySupported||this.context.featureSwitches.isTrue("responsive_web_ocf_sms_autoverify_darkwrite")}).then((e=>{const t=e.normalized_phone_number;t&&this.setState({normalized_phone:t})})).catch((t=>{const{flowName:n,verificationSendFailureMessage:r}=this.props;e(Ge(n,r||ze))(t),a(s.fail_link)}))})),i()(this,"_handleCodeUpdated",(e=>{this.setState({code:e.target.value})})),i()(this,"_autoVerifySmsCode",(()=>{var e;const{analytics:t}=this.props;t.scribe({element:"auto",action:"attempt"}),window.navigator.credentials.get({otp:{transport:["sms"]},signal:null==(e=this._smsAutoVerifyAbortController)?void 0:e.signal}).then((({code:e})=>{e&&(this._smsAutoVerifyAbortController=void 0,this.setState({code:e}),t.scribe({element:"auto",action:"success"}),this._handleDoneButtonClick()),t.scribe({element:"auto",action:"missing"})})).catch((()=>{t.scribe({element:"auto",action:"failure"})}))})),i()(this,"_handleDoneButtonClick",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:a}=this.props,{code:n,normalized_phone:r}=this.state;a(s,{code:n,link:t.next_link.link_id,normalized_phone:r,by_voice:!!t.send_via_voice}),e(t.next_link)}));const{subtaskId:s,subtaskInputs:a}=e,n=Object(u.d)(a,{key:ra,subtask_id:s},"")||"";this.state={code:"",normalized_phone:n,showSmsResendDialog:!1},this._isSmsAutoVerifySupported="OTPCredential"in window&&this.context.featureSwitches.isTrue("responsive_web_ocf_sms_autoverify_enabled"),this._isSmsAutoVerifySupported&&(this._smsAutoVerifyAbortController=new AbortController)}componentDidMount(){return this._sendSmsVerificationRequest()}componentWillUnmount(){this._smsAutoVerifyAbortController&&(this._smsAutoVerifyAbortController.abort(),this.props.analytics.scribe({element:"auto",action:"abort"}))}render(){const{onNavigate:e,passthroughOcfScreenProps:t,subtask:s,subtaskInputs:a,progressIndication:r}=this.props,i=o.createElement(V.a,{disabled:!this.state.code,onPress:this._handleDoneButtonClick,size:"normalCompact",type:"primary"},s.next_link.label),c=o.createElement(g,n()({},s.detail_text,{color:"link",onNavigate:e,style:oa.detailLink,subtaskInputs:a}));return o.createElement(v.a,n()({},t,{progressIndication:r,rightControl:i}),o.createElement(w.a,{style:U.contentArea},o.createElement(g,n()({},s.primary_text,{nativeID:l.h,onNavigate:e,size:"xLarge",style:U.headline,subtaskInputs:a,weight:"bold"})),o.createElement(g,n()({},s.secondary_text,{color:"gray600",onNavigate:e,subtaskInputs:a})),o.createElement(Ue.a,{autoComplete:"one-time-code",autoFocus:!0,helperText:c,inputMode:"numeric",label:s.hint_text,name:"verfication_code",onChange:this._handleCodeUpdated,pattern:"\\d{6}",style:U.formTextInput,value:this.state.code})),this.props.errorDialog)}}i()(ia,"contextType",F.a);const oa=P.a.create((e=>({detailLink:{marginTop:e.spaces.space16}})));var la=Object(ge.a)(na(ia),{component:"phone_verification"});const ca="discoverable_by_email",da="discoverable_by_phone";class ua extends o.Component{constructor(e){super(e),i()(this,"_formatSubtaskInputsForRedux",(e=>({link:this.props.subtask.next_link,discoverable_by_email:e.discoverable_by_email?1:0,discoverable_by_phone:e.discoverable_by_phone?1:0}))),i()(this,"_getInitialSubtaskInputs",(()=>{const{subtaskId:e,subtaskInputs:t}=this.props;return{discoverable_by_email:0!==Object(u.d)(t,{key:ca,subtask_id:e}),discoverable_by_phone:0!==Object(u.d)(t,{key:da,subtask_id:e})}})),i()(this,"_handleDoneButtonClick",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:a}=this.props;a(s,this._formatSubtaskInputsForRedux(this.state)),e(t.next_link)})),i()(this,"_handleDiscoverableByEmailToggle",(e=>{this.setState({discoverable_by_email:e})})),i()(this,"_handleDiscoverableByPhoneToggle",(e=>{this.setState({discoverable_by_phone:e})}));const t=this._getInitialSubtaskInputs();this.state={...t}}render(){const{discoverable_by_email:e,discoverable_by_phone:t}=this.state,{onNavigate:s,passthroughOcfScreenProps:a,subtask:r,subtaskInputs:i}=this.props,c=r.secondary_text?o.createElement(p.c,{size:"xLarge",style:U.headline,weight:"bold"},r.secondary_text):null,d=o.createElement(V.a,{onPress:this._handleDoneButtonClick,size:"normalCompact",type:"primary"},r.next_link.label);return o.createElement(v.a,n()({},a,{rightControl:d}),o.createElement(w.a,{style:U.contentArea},o.createElement(p.c,{nativeID:l.h,style:P.a.visuallyHidden},r.primary_text),o.createElement(p.c,{size:"xLarge",style:U.headline,weight:"bold"},c),o.createElement(w.a,{accessibilityRole:"label",style:U.option},o.createElement(w.a,{style:U.checkboxText},o.createElement(p.c,null,r.discoverable_by_email_label),o.createElement(g,n()({},r.discoverable_by_email_detail_text,{color:"gray600",onNavigate:s,size:"small",subtaskInputs:i}))),o.createElement(j.a,{checked:e,onChange:this._handleDiscoverableByEmailToggle})),o.createElement(w.a,{accessibilityRole:"label",style:U.option},o.createElement(w.a,{style:U.checkboxText},o.createElement(p.c,null,r.discoverable_by_phone_label),o.createElement(g,n()({},r.discoverable_by_phone_detail_text,{color:"gray600",onNavigate:s,size:"small",subtaskInputs:i}))),o.createElement(j.a,{checked:t,onChange:this._handleDiscoverableByPhoneToggle}))))}}s("WmpB");var ha=s("4zmP"),pa=s("YeIG");const _a=e=>{const t=(s=e).replace(/-/g,"+").replace(/_/g,"/")+"====".substring(0,(4-s.length%4)%4);var s;const a=window.atob(t);return new Uint8Array(a.length).map(((e,t)=>a.charCodeAt(t))).buffer},ma=e=>{const t=new Uint8Array(e);let s="";return t.forEach((e=>s+=String.fromCharCode(e))),btoa(s).replace(/\+/g,"-").replace(/(\/)/g,"_").replace(/=/g,"")};class ba extends o.Component{constructor(...e){super(...e),i()(this,"_triggerVerification",(()=>{const{subtask:e,updateFlow:t,subtaskId:s,onNavigate:a}=this.props,{challenge:n,next_link:r,fail_link:i}=e,o=JSON.parse(n),{publicKeyCredentialRequestOptions:l}=o,c={publicKey:{rpId:"twitter.com",extensions:{appid:l.extensions.appid},challenge:_a(l.challenge),userVerification:"discouraged",timeout:6e4,allowCredentials:(d=l.allowCredentials,d.map((e=>({type:"public-key",id:_a(e.id)}))))}};var d;navigator.credentials&&navigator.credentials.get(c).then((e=>{if(e){const{id:n,type:i,response:o}=e,l={};l.id=n,l.type=i,l.response={clientDataJSON:ma(o.clientDataJSON),authenticatorData:ma(o.authenticatorData),signature:ma(o.signature),userHandle:""},l.clientExtensionResults={appid:!0};const c=JSON.stringify(l);return t(s,{challenge_response:c,link:r.link_id}),void a(r)}})).catch((()=>{a(i)}))}))}componentDidMount(){const{errorDialog:e,errorMessage:t}=this.props;!t&&Object(pa.a)(e)&&this._triggerVerification()}render(){const{errorDialog:e,errorMessage:t,passthroughOcfScreenProps:s}=this.props;return o.createElement(v.a,s,o.createElement(w.a,{style:U.contentArea},t?o.createElement(ha.a,{text:t,type:"danger"}):null),e)}}var ga=s("LCtV"),fa=s("AspN"),ka=s("53j7");const ya=Object(Z.createSelector)(J.e.selectLoggedInUser,((e,t)=>{const s=ka.f(e),[a]=s?fa.h(e,s):[];return a}),((e,t)=>({loggedInUser:e,avatarMedia:t}))),va={addAvatarMedia:ka.a,removeAvatarMedia:ka.c};var wa=Object(X.g)(ya,va),Ea=s("fS8x"),Ca=s("P68U"),Ia=s("eyty");class Sa extends o.Component{constructor(e){super(e),i()(this,"_handleCropDone",(()=>this.setState({done:!0,showCropper:!1}))),i()(this,"_handleCropCancel",(()=>this._handleCropDone())),i()(this,"_handleImageMediaChange",(e=>{const{addAvatarMedia:t}=this.props;t(e[0]),this.setState({mediaId:e[0],showCropper:!0,done:!0})})),i()(this,"_handleImageMediaFailure",(()=>{this._handleSkipButtonClick()})),i()(this,"_handleImageMediaRemove",(()=>{const{removeAvatarMedia:e}=this.props;e(),this.setState({done:!1,showCropper:!1})})),i()(this,"_handleDoneButtonClick",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:a}=this.props;a(s,{link:t.next_link.link_id}),e(t.next_link)})),i()(this,"_handleSkipButtonClick",(()=>{const{onNavigate:e,subtask:{skip_link:t},subtaskId:s,updateFlow:a}=this.props;t&&a(s,{link:t.link_id}),t&&e(t)})),this.state={done:!1,showCropper:!1,mediaId:void 0}}render(){const{errorDialog:e,location:t,onNavigate:s,passthroughOcfScreenProps:a,subtask:r,subtaskInputs:i}=this.props,{primary_text:c,secondary_text:d,next_link:u,skip_link:h}=r,p=o.createElement(V.a,{disabled:!h&&!this.state.mediaId,onPress:this._handleDoneButtonClick,size:"normalCompact",type:"primary"},u.label),_=h&&o.createElement(V.a,{onPress:this._handleSkipButtonClick,size:"normalCompact",type:"text"},h.label);return o.createElement(v.a,n()({},a,{rightControl:this.state.done||!h?p:_}),o.createElement(w.a,{style:U.contentArea},c?o.createElement(g,n()({},c,{nativeID:l.h,onNavigate:s,size:"xLarge",style:U.headline,subtaskInputs:i,weight:"bold"})):null,d?o.createElement(g,n()({},r.secondary_text,{color:"gray600",onNavigate:s,subtaskInputs:i})):null,this._renderMediaPickerWithPreview()),this.state.showCropper&&void 0!==this.state.mediaId?o.createElement(Ea.a,{circle:!0,defaultAspectRatio:1,location:t,mediaId:this.state.mediaId,onCancel:this._handleCropCancel,onDone:this._handleCropDone}):null,e)}_renderMediaPickerWithPreview(){const{avatarMedia:e,loggedInUser:t}=this.props,{done:s}=this.state;return o.createElement(w.a,{style:xa.centerContent},o.createElement(Ca.a,{borderRadius:ga.a.INFINITE,currentContent:t?o.createElement(A.default,{size:"custom",uri:t.profile_image_url_https}):null,location:Ia.d.Avatar,mediaItem:e,onChange:this._handleImageMediaChange,onFailure:this._handleImageMediaFailure,onRemove:s?this._handleImageMediaRemove:void 0,rootStyle:xa.avatarContainer}))}}const xa=P.a.create((e=>({avatarContainer:{borderWidth:e.borderWidths.medium,borderColor:e.colors.white,borderStyle:"solid",marginTop:e.spaces.space64,marginBottom:e.spaces.space64,width:`calc(${e.spaces.space64} * 3)`},bannerContainer:{marginTop:e.spaces.space64,marginBottom:e.spaces.space64,maxHeight:"9em"},banner:{height:"100%"},centerContent:{alignItems:"center",display:"flex",width:"100%"}})));var Ta=wa(Sa);const Aa=Object(Z.createSelector)(J.e.selectLoggedInUser,((e,t)=>{const s=ka.f(e),[a]=s?fa.h(e,s):[];return a}),((e,t)=>{const s=ka.g(e),[a]=s?fa.h(e,s):[];return a}),((e,t,s)=>({loggedInUser:e,avatarMedia:t,bannerMedia:s}))),Oa={addBannerMedia:ka.b,removeBannerMedia:ka.d};var Pa=Object(X.g)(Aa,Oa),Na=s("9Xij"),Da=s("U+bB");class Ra extends o.Component{constructor(e){super(e),i()(this,"_handleImageMediaRemove",(()=>{const{removeBannerMedia:e}=this.props;e(),this.setState({done:!1,showCropper:!1})})),i()(this,"_handleCropDone",(()=>this.setState({done:!0,showCropper:!1}))),i()(this,"_handleCropCancel",(()=>this._handleCropDone())),i()(this,"_handleImageMediaChange",(e=>{const{addBannerMedia:t}=this.props;t(e[0]),this.setState({media_id:e[0],showCropper:!0,done:!0})})),i()(this,"_handleImageMediaFailure",(()=>{this._handleSkipButtonClick()})),i()(this,"_handleDoneButtonClick",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:a}=this.props;a(s,{link:t.next_link.link_id}),e(t.next_link)})),i()(this,"_handleSkipButtonClick",(()=>{const{onNavigate:e,subtask:{skip_link:t},subtaskId:s,updateFlow:a}=this.props;t&&a(s,{link:t.link_id}),t&&e(t)})),this.state={done:void 0,media_id:void 0,showCropper:!1}}render(){const{errorDialog:e,location:t,onNavigate:s,passthroughOcfScreenProps:a,subtask:r,subtaskInputs:i}=this.props,{primary_text:c,secondary_text:d,next_link:u,skip_link:h}=r,p=o.createElement(V.a,{disabled:!h&&!this.state.media_id,onPress:this._handleDoneButtonClick,size:"normalCompact",type:"primary"},u.label),_=h&&o.createElement(V.a,{onPress:this._handleSkipButtonClick,size:"normalCompact",type:"text"},h.label);return o.createElement(v.a,n()({},a,{rightControl:this.state.done||!h?p:_}),o.createElement(w.a,{style:U.contentArea},c?o.createElement(g,n()({},c,{nativeID:l.h,onNavigate:s,size:"xLarge",style:U.headline,subtaskInputs:i,weight:"bold"})):null,d?o.createElement(g,n()({},r.secondary_text,{color:"gray600",onNavigate:s,subtaskInputs:i})):null,o.createElement(w.a,{style:Fa.container},this._renderMediaPickerWithPreview(),this._renderAvatar(),this._renderNames()),this.state.showCropper&&void 0!==this.state.media_id?o.createElement(Ea.a,{defaultAspectRatio:3,location:t,mediaId:this.state.media_id,onCancel:this._handleCropCancel,onDone:this._handleCropDone}):null),e)}_renderMediaPickerWithPreview(){const{bannerMedia:e,loggedInUser:t}=this.props,s=e||!!t&&!!t.profile_banner_url,{done:a}=this.state;return o.createElement(Ca.a,{aspectRatio:3,currentContent:o.createElement(Na.a,{ratio:P.a.theme.aspectRatios.profileBanner},s&&t?o.createElement(Da.a,{source:{uri:t.profile_banner_url},style:Fa.banner}):null),location:Ia.d.Banner,mediaItem:e,onChange:this._handleImageMediaChange,onFailure:this._handleImageMediaFailure,onRemove:a?this._handleImageMediaRemove:void 0,rootStyle:Fa.bannerContainer})}_renderAvatar(){const{avatarMedia:e,loggedInUser:t}=this.props,s=e&&e.mediaFile&&e.mediaFile.url||t&&t.profile_image_url_https;return o.createElement(A.default,{size:"custom",style:[Fa.avatarContainer],uri:s})}_renderNames(){const{loggedInUser:e}=this.props;if(!e)return null;const t=e.name,s=`@${e.screen_name}`;return o.createElement(w.a,{style:Fa.nameContainer},o.createElement(p.c,{align:"left",style:Fa.names},o.createElement(p.c,{accessibilityRole:"heading",size:"xLarge",style:Fa.displayName,weight:"bold"},t),o.createElement(p.c,{color:"gray600",style:Fa.screenName},s)))}}const Fa=P.a.create((e=>({container:{paddingBottom:e.spaces.space64},avatarContainer:{borderWidth:e.borderWidths.medium,borderColor:e.colors.white,borderStyle:"solid",marginLeft:e.spaces.space16,marginTop:"-25%",maxWidth:"calc(${theme.spaces.space16} * 8)",width:"25%"},bannerContainer:{marginTop:e.spaces.space64,marginBottom:e.spaces.space64,maxHeight:"9em"},banner:{height:"100%"},centerContent:{alignItems:"center",display:"flex",width:"100%"},nameContainer:{marginLeft:e.spaces.space16},names:{display:"block",marginBottom:e.spaces.space12},displayName:{writingDirection:"ltr",display:"block",marginTop:e.spaces.space4},screenName:{writingDirection:"ltr"}})));var La=Pa(Ra),Ba=s("QK5w"),Ua=(s("55wv"),s("Lsrn"));const ja=(e={})=>Object(d.a)("svg",{...e,style:[Ua.a.root,e.style],viewBox:"0 0 24 24"},o.createElement("g",null,o.createElement("path",{d:"M18.707 13.293c-.39-.39-1.023-.39-1.414 0L13 17.586V5c0-.553-.447-1-1-1s-1 .447-1 1v12.586l-4.293-4.293c-.39-.39-1.023-.39-1.414 0s-.39 1.023 0 1.414l6 6c.195.195.45.293.707.293s.512-.098.707-.293l6-6c.39-.39.39-1.023 0-1.414z"})));ja.metadata={width:24,height:24};var Va=ja;const Ma=P.a.create((e=>({icon:{height:"1.5em",width:"1.5em"},pillContainer:{bottom:e.spaces.space16,alignItems:"center",left:"0",right:"0",margin:"auto",zIndex:1},pillContainerNarrow:{position:"fixed"},pillContainerModal:{position:"absolute"}})));var za=({isModal:e,label:t,onPress:s})=>{const a=[Ma.pillContainer,e?Ma.pillContainerModal:Ma.pillContainerNarrow];return o.createElement(w.a,{style:a},o.createElement(V.a,{icon:o.createElement(Va,{style:Ma.icon}),onPress:s,type:"primary"},o.createElement(p.c,{size:"normal",weight:"normal"},t)))},Ha=s("7nmT"),Ga=s.n(Ha),Ya="OCF_SettingsList_Text",Wa=s("jtO7"),qa=s("sXY3"),$a=s("+d3d");class Xa extends o.Component{constructor(e){super(e),i()(this,"_formatSubtaskInputsForStore",(e=>Object(qa.a)(e).map((e=>{const[t,{result:s,type:a}]=e;return{key:t,response_data:{[a]:{result:s}}}})))),i()(this,"_loadSubtaskInputsFromStore",(()=>{const{subtaskId:e,subtaskInputs:t}=this.props;return(Object(u.d)(t,{key:h.j,subtask_id:e},[])||[]).reduce(((e,t)=>{const{key:s}=t,[a]=Object.keys(t.response_data),n=t.response_data[a].result;return e[s]={result:n,type:a},e}),{})})),i()(this,"_updateFlow",(()=>{const{subtask:e,subtaskId:t,updateFlow:s}=this.props,{next_link:a}=e,{settingsValues:n}=this.state;s(t,{[h.j]:this._formatSubtaskInputsForStore(n),link:a.link_id})})),i()(this,"_handleShowMore",(()=>{this.setState({showMore:!0})})),i()(this,"_handleDoneButtonPress",(()=>{const{onNavigate:e,subtask:t}=this.props,{next_link:s}=t;this._updateFlow(),e(s)})),i()(this,"_handleSubListBackClick",(()=>{this.setState({isSubList:!1,showDividers:!1,showMoreConfig:null,subList:[],subListHeader:null}),this._updateFlow()})),i()(this,"_handleSettingGroupClick",(e=>{var t;const{primary_text:s,value_data:a,value_type:n}=e,r=null==a||null==(t=a.settings_group_data)?void 0:t.settings;r&&n===h.k.SettingsGroup&&this.setState({isSubList:!0,showDividers:!1,showMoreConfig:null,subList:r,subListHeader:s})})),i()(this,"_handleScrollPromptClick",(()=>{this._viewport&&this._viewport.scrollBy(this._viewport.getRect().getHeight())})),i()(this,"_handleViewportSet",(e=>{const{isModal:t,subtask:s}=this.props;s.scroll_hint&&t&&(this._viewport=e,this._viewport&&this._viewport.addScrollListener(this._handleViewportScroll))})),i()(this,"_handleViewportScroll",Object($a.a)((()=>{this.state.lastSettingSeen||this.setState({lastSettingSeen:this._isLastSettingInViewport()})}),250)),i()(this,"_isLastSettingInViewport",(()=>{if(this._lastSetting&&this._viewport){var e;const t=this._lastSetting.getBoundingClientRect(),s=null==(e=this._viewport)?void 0:e.getRect();if(s)return t.top>=s.getTop()&&t.bottom<=s.getBottom()}return!1})),i()(this,"_setSettingsRef",(e=>t=>{const{isSubList:s}=this.state;if(this.props.subtask.scroll_hint&&!s&&e&&void 0===this._lastSetting){this._lastSetting=Ga.a.findDOMNode(t);const e=this._isLastSettingInViewport();e&&!this.state.lastSettingSeen&&this.setState({lastSettingSeen:e})}else this._lastSetting=void 0})),i()(this,"_handleSettingToggle",(e=>{const{value_identifier:t,value_type:s}=e;if(t&&Object(u.h)(s)){const{settingsValues:e}=this.state;this.setState({settingsValues:{...e,[t]:{...e[t],result:!e[t].result}}})}}));const{subtask:t}=e,s=this._initializeSettingsState(t.settings);this.state={isSubList:!1,showDividers:!!t.show_divider,showMoreConfig:t.show_more,showMore:!1,subList:[],subListHeader:null,settingsValues:s,lastSettingSeen:!1}}UNSAFE_componentWillMount(){const{viewport:e}=this.context,{isModal:t,subtask:s}=this.props;s.scroll_hint&&!t&&(this._viewport=e,this._removeScrollListener=this._viewport.addScrollListener(this._handleViewportScroll)),this._updateFlow()}componentWillUnmount(){const{subtask:e}=this.props;e.scroll_hint&&this._removeScrollListener&&this._removeScrollListener()}render(){const{isSubList:e}=this.state;return e?this._renderSubList():this._renderMainList()}_renderMainList(){const{errorDialog:e,isModal:t,onNavigate:s,passthroughOcfScreenProps:a,subtask:r,subtaskInputs:i}=this.props,{lastSettingSeen:c}=this.state,d=!!!r.scroll_hint||c,u="prompt"===r.style,h=o.createElement(V.a,{disabled:!d,onPress:this._handleDoneButtonPress,size:u?"normal":"normalCompact",type:"primary"},r.next_link.label),p=r.scroll_hint,_=!d&&p?o.createElement(za,{isModal:!!t,label:p,onPress:this._handleScrollPromptClick}):null;return o.createElement(v.a,n()({},a,{onViewportSet:this._handleViewportSet,rightControl:u?void 0:h,scrollPrompt:_}),o.createElement(w.a,{style:[U.contentArea,Ka.bottomPadding,u&&Ka.centeredRoot]},r.primary_text?o.createElement(g,n()({},r.primary_text,{nativeID:l.h,onNavigate:s,size:"xLarge",style:Ka.headline,subtaskInputs:i,testID:Ya,weight:"bold"})):null,r.secondary_text?o.createElement(g,n()({},r.secondary_text,{color:"gray600",onNavigate:s,style:Ka.headline,subtaskInputs:i})):null,this._renderSettingsList(r.settings),r.detail_text?o.createElement(g,n()({},r.detail_text,{color:"gray600",onNavigate:s,style:Ka.detailText,subtaskInputs:i})):null,u?o.createElement(w.a,{style:Ka.doneButtonContainer},h):null),e)}_renderSubList(){const{onNavigate:e,subtaskInputs:t}=this.props,{subList:s,subListHeader:a}=this.state;return o.createElement(v.a,{onBackClick:this._handleSubListBackClick},o.createElement(w.a,{style:U.contentArea},o.createElement(g,n()({},a,{onNavigate:e,size:"xLarge",style:Ka.headline,subtaskInputs:t,weight:"bold"})),this._renderSettingsList(s)))}_renderSettingsList(e){const{addToast:t,onNavigate:s,removeContacts:a,subtaskId:n,subtaskInputs:r}=this.props,{showDividers:i,showMoreConfig:l,showMore:c}=this.state;return o.Children.toArray(e.map(((d,u)=>{const h=u===e.length-1;if(l&&!c){if(u===l.initial_to_show)return o.createElement(Wa.a,{color:"primary",label:l.text,onPress:this._handleShowMore});if(u>l.initial_to_show)return null}return o.createElement(Tt,{addToast:t,onNavigate:s,onSettingGroupClick:this._handleSettingGroupClick,onSettingToggle:this._handleSettingToggle,ref:this._setSettingsRef(h),removeContacts:a,settingValue:d,showDividers:!h&&i,subtaskId:n,subtaskInputs:r})})))}_initializeSettingsState(e){const t=this._loadSubtaskInputsFromStore();return t&&Object.keys(t).length>0?t:e.reduce(((e,t)=>{const{value_data:s,value_identifier:a,value_type:n}=t;var r;if(a&&s&&Object(u.h)(n))e[a]={result:null==(r=s.boolean_data)?void 0:r.initial_value,type:Object.keys(s)[0]};else if(n===h.k.SettingsGroup){var i;((null==s||null==(i=s.settings_group_data)?void 0:i.settings)||[]).forEach((t=>{const{value_data:s,value_identifier:a,value_type:n}=t;var r;a&&s&&Object(u.h)(n)&&(e[a]={result:null==(r=s.boolean_data)?void 0:r.initial_value,type:Object.keys(s)[0]})}))}return e}),{})}}i()(Xa,"contextTypes",{viewport:_.object});const Ka=P.a.create((e=>({centeredRoot:{alignItems:"center"},headline:{marginBottom:e.spaces.space12},detailText:{marginTop:e.spaces.space40},bottomPadding:{paddingBottom:e.spaces.space48},doneButtonContainer:{marginTop:e.spaces.space40}})));var Za=s("NeAX");const Qa=Object(Z.createSelector)(q.m,Za.selectPreferences,Za.selectUserPreferences,((e,t,s)=>({navigationContext:e,personalizationSettings:s,shouldPropagateP13nSettings:!t.is_eu_country}))),Ja={createLocalApiErrorHandler:Object(K.d)("OCF_FLOW"),fetchPreferencesIfNeeded:Za.fetchPreferencesIfNeeded,scribeAction:W.c,syncPersonalizationSettings:Za.syncSettings};var en=Object(X.g)(Qa,Ja);const tn=xe.a.d44efc66,sn=xe.a.b4867a17,an=xe.a.d4e220b3;class nn extends o.Component{constructor(...e){super(...e),i()(this,"state",{errorMessage:"",isValid:!0,value:""}),i()(this,"_updateValue",(e=>{const{callback:t}=this.props,s=Object(pa.a)(e.trim()),a=!s&&-1!==e.toLowerCase().indexOf("twitter"),n=!s&&!a;let r="";s?r=tn:a&&(r=sn),this.setState({errorMessage:r,isValid:n,value:e}),t(e,n)})),i()(this,"_handleValueChange",(e=>{const{value:t}=e.target;this._updateValue(t)}))}componentDidMount(){const{defaultValue:e}=this.props;e&&this._updateValue(e)}render(){const{defaultValue:e,callback:t,label:s,...a}=this.props,{errorMessage:r,isValid:i}=this.state,l=this.context.featureSwitches.getValue("user_display_name_max_limit",50);return o.createElement(Ue.a,n()({},a,{errorText:r,invalid:!i,label:s||an,maxLength:"number"==typeof l?l:50,name:"name",onChange:this._handleValueChange,positionCursorAtEnd:!0,style:U.formTextInput,value:this.state.value}))}}i()(nn,"contextType",F.a);var rn=s("SrtL"),on=s("P7wY"),ln=s("Ukpf");const cn=xe.a.eab9ceb1,dn=Object.freeze({Birthday:"birthday",Email:"email",Name:"name",Phone:"phone_number",Password:"password"}),un="select_birthday",hn="select_email",pn="select_name",_n="select_phone",mn={page:"onboarding",component:"signup"};class bn extends o.Component{constructor(e){super(e),i()(this,"_getDefaultIdentifierField",(()=>{const{subtask:{allowed_identifiers:e}}=this.props;return e===h.l.EmailOnly||e===h.l.EmailThenPhone?dn.Email:dn.Phone})),i()(this,"_renderActiveFieldToggle",(()=>{const{subtask:{allowed_identifiers:e}}=this.props;return e!==h.l.EmailOnly&&e!==h.l.PhoneOnly?o.createElement(p.c,{color:"link",onPress:this._handleActiveTextToggle,style:gn.toggleLink,withInteractiveStyling:!0},this._getToggleActiveTextTitle()):null})),i()(this,"_renderPasswordField",(()=>{const{subtask:e,subtaskId:t,subtaskInputs:s}=this.props,{defaultActiveText:a}=this.state,n=Object(u.d)(s,{key:dn.Password,subtask_id:t},"");return o.createElement(w.a,{style:gn.passwordEntry},o.createElement(Wt,{autoComplete:"new-password",defaultValue:n||void 0,label:e.password_hint,onPasswordChange:this._handlePasswordChange,onPasswordValidated:this._handlePasswordValidate,userIdentifier:a||void 0}))})),i()(this,"_renderNameField",(()=>{const{navigationContext:e,subtask:t,subtaskId:s,subtaskInputs:a}=this.props,n=Object(u.d)(a,{key:dn.Name,subtask_id:s},""),r=e.action,i={autoComplete:"name",autoFocus:!r||r===pn,callback:this._updateNameInfo,defaultValue:n,onFocus:this._handleNameFocus,label:t.name_hint};return o.createElement(nn,i)})),i()(this,"_renderActiveTextField",(()=>{const{subtask:e}=this.props,{activeTextField:t,defaultActiveText:s}=this.state,a=this._shouldFocusActiveTextField(),n={autoComplete:t===dn.Phone?"tel":"email",autoFocus:a,defaultValue:s,name:t===dn.Phone?"phone_number":"email",label:t===dn.Phone?e.phone_hint:e.email_hint,onRef:this._setInputRef,onValidityChange:this._updateValidity,style:gn.phoneEmailTextField};return t===dn.Phone?o.createElement(ts,n):o.createElement(gt,n)})),i()(this,"_handleDateChange",(e=>{this.setState({birthdayValue:e,isBirthdayValid:this._isCompleteDate(e)},this._updateValidity)})),i()(this,"_isCompleteDate",(e=>!!(e&&e.year&&e.month&&e.day))),i()(this,"_getIdentifierValue",(()=>this._input&&this._input.getValue())),i()(this,"_isValid",(()=>{const{isBirthdayValid:e,isNameValid:t,isPasswordValid:s}=this.state,{subtask:a}=this.props,n=!a.show_password_field||s,r=a.ignore_birthday||e;return t&&n&&r&&this._input&&this._input.isValid()})),i()(this,"_setTimRef",(e=>{this._timInput=e})),i()(this,"_updateValidity",(()=>{this.setState({isValid:this._isValid()})})),i()(this,"_updateNameInfo",((e,t)=>{this.setState({isNameValid:t,nameValue:e},this._updateValidity)})),i()(this,"_handleFetchPreferences",(()=>{const{createLocalApiErrorHandler:e,fetchPreferencesIfNeeded:t}=this.props;t().catch(e())})),i()(this,"_handlePasswordChange",(e=>{this.setState({passwordValue:e},this._updateValidity)})),i()(this,"_handlePasswordValidate",(e=>{this.setState({isPasswordValid:e},this._updateValidity)})),i()(this,"_shouldFocusActiveTextField",(()=>{const{navigationContext:e}=this.props,{activeTextField:t}=this.state,s=t===dn.Phone?_n:hn;return!this.state.hasNameFieldBeenAutoFocused&&e.action===s})),i()(this,"_handleActiveTextToggle",(()=>{const{activeTextField:e}=this.state,t=e===dn.Phone?dn.Email:dn.Phone;this._scribeEvent(t,"choose"),this._input&&this._input.clear(),this.setState({activeTextField:t,defaultActiveText:""})})),i()(this,"_getToggleActiveTextTitle",(()=>{const{subtask:e}=this.props,{activeTextField:t}=this.state;return t===dn.Phone?e.use_email_text:e.use_phone_text})),i()(this,"_handleNameFocus",(()=>{this.setState({hasNameFieldBeenAutoFocused:!0})})),i()(this,"_handleNextButtonClick",(()=>{const{onNavigate:e,shouldPropagateP13nSettings:t,subtask:s,subtaskId:a,updateFlow:n}=this.props,{activeTextField:r,birthdayValue:i,nameValue:o,passwordValue:l}=this.state,{allowCookieUse:c,allowDeviceAccess:d,allowPartnerships:u,allowPersonalization:h}=this.props.personalizationSettings||{},p=r===dn.Email&&s.email_next_link?s.email_next_link:s.next_link,_=this._timInput&&this._timInput.value?{response:this._timInput.value}:void 0,m=this._getIdentifierValue()||void 0,b={js_instrumentation:_,link:p.link_id,name:o};b[r]=m,s.show_password_field&&(b.password=l),!s.ignore_birthday&&i&&(b.birthday=i),t&&(b.personalization_settings={allow_cookie_use:!!c,allow_device_personalization:!!d,allow_partnerships:!!u,allow_ads_personalization:!!h}),n(a,b),e(p)})),i()(this,"_scribeEvent",((e,t)=>{const{scribeAction:s}=this.props;s({...mn,element:e,action:t})})),i()(this,"_setInputRef",(e=>{this._input=e}));const{navigationContext:t,subtaskId:s,subtaskInputs:a}=e,n=Object(u.d)(a,{key:dn.Name,subtask_id:s},""),r=Object(u.d)(a,{key:dn.Phone,subtask_id:s},""),l=Object(u.d)(a,{key:dn.Email,subtask_id:s},""),c=Object(u.d)(a,{key:dn.Password,subtask_id:s},""),d={day:void 0,month:void 0,year:void 0},_=Object(u.d)(a,{key:dn.Birthday,subtask_id:s},void 0)||d,m=(e=>{switch(e){case _n:return{type:dn.Phone,value:r};case hn:return{type:dn.Email,value:l};default:return{type:l?dn.Email:this._getDefaultIdentifierField(),value:l||r}}})(t.action);this.state={activeTextField:m.type,birthdayValue:_,defaultActiveText:m.value,nameValue:n,hasNameFieldBeenAutoFocused:!1,passwordValue:c,isNameValid:void 0,isPasswordValid:!!c,isBirthdayValid:this._isCompleteDate(_),isValid:void 0}}componentDidMount(){ln.a.inject("https://twitter.com/i/js_inst?c_name=ui_metrics"),this._handleFetchPreferences(),this.props.syncPersonalizationSettings()}componentDidUpdate(){this._shouldFocusActiveTextField()&&this._input&&this._input.focus()}render(){const{subtask:e,passthroughOcfScreenProps:t,progressIndication:s}=this.props,a=o.createElement(V.a,{disabled:!this.state.isValid,onPress:this._handleNextButtonClick,size:"normalCompact",type:"primary"},e.next_link.label);return o.createElement(v.a,n()({},t,{progressIndication:s,rightControl:a}),o.createElement(rn.a,{title:cn}),o.createElement(w.a,{style:U.contentArea},e.primary_text&&o.createElement(p.c,{nativeID:l.h,size:"xLarge",style:U.headline,weight:"bold"},e.primary_text),this._renderNameField(),this._renderActiveTextField(),this._renderActiveFieldToggle(),this._renderBirthdayField(),e.show_password_field?this._renderPasswordField():null,o.createElement("input",{autoComplete:"off",name:"ui_metrics",ref:this._setTimRef,type:"hidden"})))}_renderBirthdayField(){const{navigationContext:e,subtask:t}=this.props,{birthday_explanation:s,birthday_hint:a,ignore_birthday:n}=t,r=this.state.birthdayValue||{},i=e.action===un;return n?null:o.createElement(w.a,{accessibilityLabel:a,accessibilityRole:"group",style:gn.birthdayPicker},o.createElement(p.c,{size:"normal",weight:"bold"},a),o.createElement(p.c,{color:"gray600",size:"normal"},s),o.createElement(Ze.a,{autofocus:i,day:r.day,label:t.birthday_hint||"",minSelectableYear:Object(on.b)(),month:r.month,onChange:this._handleDateChange,year:r.year}))}}const gn=P.a.create((e=>({birthdayPicker:{marginTop:e.spaces.space32},toggleLink:{marginTop:e.spaces.space16,alignSelf:"flex-start"},passwordEntry:{marginTop:e.spaces.space16},phoneEmailTextField:{paddingHorizontal:0}})));var fn=en(bn);const kn=xe.a.a565833d,yn=xe.a.h3629782,vn=xe.a.j1c3f4b9,wn=xe.a.c119dee8,En=xe.a.f70cd5ed,Cn=xe.a.a3841918,In=xe.a.d4e220b3;class Sn extends o.Component{constructor(...e){super(...e),i()(this,"_handleSignupButtonClick",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,subtaskInputs:a,updateFlow:n}=this.props,{phone_number:r,email:i}=t,o=r&&r.subtask_data_reference&&Object(u.d)(a,r.subtask_data_reference),l=i&&i.subtask_data_reference&&Object(u.d)(a,i.subtask_data_reference);let c;this._isOldEnoughOrIgnored()?o?c=t.phone_next_link:l&&(c=t.email_next_link):c=t.invalid_birthday_link,c&&n(s,{link:c.link_id}),c&&e(c)})),i()(this,"_handleNavigationClick",(e=>{const{onNavigate:t}=this.props;t(e)})),i()(this,"_handleNameEdit",(()=>{const{subtask:e}=this.props;this._handleNavigationClick(e.name_edit_link)})),i()(this,"_handleBirthdayEdit",(()=>{const{subtask:e}=this.props;this._handleNavigationClick(e.birthday_edit_link)})),i()(this,"_handlePhoneEdit",(()=>{const{subtask:e}=this.props;this._handleNavigationClick(e.phone_edit_link)})),i()(this,"_handleEmailEdit",(()=>{const{subtask:e}=this.props;this._handleNavigationClick(e.email_edit_link)})),i()(this,"_handlePrivacyOptionsClick",(e=>t=>{t.preventDefault(),this._handleNavigationClick(e)})),i()(this,"_isOldEnoughOrIgnored",(()=>{const{birthday:e,birthday_requirement:t,ignore_birthday:s}=this.props.subtask;if(s)return!0;{const s=e&&e.subtask_data_reference&&Object(u.d)(this.props.subtaskInputs,e.subtask_data_reference),a=s&&new Date(s.year,s.month-1,s.day),{year:n,month:r,day:i}=t||{},o=n&&r&&i&&new Date(n,r-1,i);return!a||!o||a<=o}})),i()(this,"_getSignupButtonLabel",(()=>{const{subtask:e,subtaskInputs:t}=this.props,{phone_number:s,email:a}=e,n=s&&Object(u.f)(t,s),r=a&&Object(u.f)(t,a);return n?e.phone_next_link.label:r?e.email_next_link.label:kn}))}render(){const{errorDialog:e,passthroughOcfScreenProps:t,progressIndication:s}=this.props;return o.createElement(v.a,n()({},t,{progressIndication:s}),o.createElement(w.a,null,o.createElement(w.a,{style:U.contentArea},this._maybeRenderPrimaryText(),this._renderNameField(),this._renderPhoneOrEmailField(),this._maybeRenderBirthdayField(),this._maybeRenderDetailText(),o.createElement(V.a,{onPress:this._handleSignupButtonClick,size:"normalLarge",style:U.primaryButton,type:"primary"},this._getSignupButtonLabel()))),e)}_maybeRenderPrimaryText(){const{subtask:e}=this.props;return e.primary_text?o.createElement(p.c,{align:"left",nativeID:l.h,size:"xLarge",style:U.headline,weight:"bold"},e.primary_text):null}_maybeRenderDetailText(){const{onNavigate:e,subtask:t,subtaskInputs:s}=this.props,{detail_text:a}=t;return a?o.createElement(g,n()({},a,{onNavigate:e,style:xn.detailText,subtaskInputs:s})):null}_renderNameField(){const{subtask:e,subtaskInputs:t}=this.props,s=e.name&&Object(u.f)(t,e.name);return o.createElement(w.a,{onClick:this._handleNameEdit,testID:"editName"},o.createElement(Ue.a,{defaultValue:s||"",label:In,name:"name",style:U.formTextInput}))}_maybeRenderBirthdayField(){const{subtask:e,subtaskInputs:t}=this.props,s=e.birthday&&e.birthday.subtask_data_reference&&Object(u.d)(t,e.birthday.subtask_data_reference),{day:a,month:n,year:r}=s||{},i=a&&n&&r&&yn(new Date(r,n-1,a));return!e.ignore_birthday&&s&&i?o.createElement(w.a,{accessibilityLabel:vn({birthdate:i}),accessibilityRole:"button",onClick:this._handleBirthdayEdit,testID:"editBirthday"},o.createElement(Ue.a,{defaultValue:i,label:wn,name:"birthday",style:U.formTextInput})):null}_renderPhoneOrEmailField(){const{subtask:{phone_number:e,email:t},subtaskInputs:s}=this.props,a=e&&e.subtask_data_reference&&Object(u.d)(s,e.subtask_data_reference),n=t&&t.subtask_data_reference&&Object(u.d)(s,t.subtask_data_reference);return a?o.createElement(w.a,{onClick:this._handlePhoneEdit,testID:"editPhone"},o.createElement(Ue.a,{defaultValue:a||"",label:En,name:"phone",style:U.formTextInput})):n?o.createElement(w.a,{onClick:this._handleEmailEdit,testID:"editEmail"},o.createElement(Ue.a,{defaultValue:n||"",label:Cn,name:"email",style:U.formTextInput})):null}}const xn=P.a.create((e=>({detailText:{marginTop:e.spaces.space64}})));var Tn=Sn;const An="selected_search_topic_ids",On="selected_topic_ids",Pn=[],Nn=Object(Z.createSelector)(((e,t)=>{const s=Object(q.r)(e);return Object(u.d)(s,{key:An,subtask_id:t.subtaskId})}),((e,t)=>{const s=Object(q.r)(e);return Object(u.d)(s,{key:On,subtask_id:t.subtaskId})}),((e,t)=>t.subtask.selected_topics_cart?t.subtask.selected_topics_cart.selected_topic_ids:Pn),((e,t,s)=>({initialSearchTopicIds:e||Pn,initialSelectedTopicIds:t||s})));var Dn=Object(X.c)(Nn),Rn=s("+1/s"),Fn=s("Rp9C"),Ln=s("Znyr"),Bn=s("sgih"),Un=s("feu+"),jn=s("9MWU");const Vn=Object.freeze({TopicCategory:"topic_category",Topic:"topic"});var Mn=s("j7Bv"),zn=s("cm6r"),Hn=s("zfvc"),Gn=s("EHV7"),Yn=s("iY63");const Wn=(e={})=>Object(d.a)("svg",{...e,style:[Ua.a.root,e.style],viewBox:"0 0 24 24"},o.createElement("g",null,o.createElement("path",{d:"M19 13H5c-.553 0-1-.447-1-1s.447-1 1-1h14c.553 0 1 .447 1 1s-.447 1-1 1z"})));Wn.metadata={width:24,height:24};var qn=Wn;class $n extends o.PureComponent{constructor(...e){super(...e),i()(this,"_handleFollow",(()=>{const{onFollowTopic:e,id:t}=this.props;e(t)})),i()(this,"_handleUnfollow",(()=>{const{onUnfollowTopic:e,id:t}=this.props;e(t)}))}render(){const{id:e,selectedTopicIds:t,subtaskInputs:s,topicsById:a}=this.props,r=a[e],i=t.includes(this.props.id);return o.createElement(w.a,{style:Kn.cell},o.createElement(Mn.a,{Icon:Gn.a,size:"large",style:Kn.topicIcon}),o.createElement(w.a,{style:Kn.topicInfo},o.createElement(g,n()({weight:"bold"},r.title,{subtaskInputs:s})),r.description?o.createElement(g,n()({color:"gray600"},r.description,{subtaskInputs:s})):null),o.createElement(jn.a,{isFollowing:i,onFollow:this._handleFollow,onUnfollow:this._handleUnfollow,showRelationshipChangeConfirmation:!1,size:"normalCompact",type:"topic"}))}}class Xn extends o.PureComponent{constructor(...e){super(...e),i()(this,"state",{expanded:!1}),i()(this,"_handleClick",(()=>{this.setState({expanded:!this.state.expanded})}))}render(){const{categoriesById:e,id:t,isTopLevel:s,subtaskInputs:a}=this.props,{expanded:r}=this.state,i=e[t],l=r?Qn:Zn;return o.createElement(o.Fragment,null,o.createElement(zn.a,{onClick:this._handleClick,style:Kn.cell},o.createElement(g,n()({color:"primary",size:s?"large":"normal",weight:s?"heavy":"bold"},i.title,{subtaskInputs:a})),l),o.createElement(w.a,{style:Kn.children},o.createElement(Hn.b,{show:r},this._renderChildren())))}_renderChildren(){const{categoriesById:e,id:t,selectedTopicIds:s,onFollowTopic:a,onUnfollowTopic:r,subtaskInputs:i,topicsById:l}=this.props,c=e[t],d={selectedTopicIds:s,onFollowTopic:a,onUnfollowTopic:r,topicsById:l,subtaskInputs:i};return c.children_items.map((({id:t,type:s})=>s===Vn.Topic?o.createElement($n,n()({},d,{id:t,key:t})):o.createElement(Xn,n()({},d,{categoriesById:e,id:t,key:t}))))}}const Kn=P.a.create((e=>({cell:{alignItems:"center",flexDirection:"row",paddingVertical:e.spaces.space12,paddingHorizontal:e.spaces.space4,justifyContent:"space-between",borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},topicInfo:{flexGrow:1,flexShrink:1,marginRight:e.spaces.space12},topicIcon:{flexShrink:0,marginRight:e.spaces.space12},plusIcon:{color:e.colors.gray600},minusIcon:{color:e.colors.primary},children:{marginLeft:e.spaces.space12}}))),Zn=o.createElement(Yn.a,{style:Kn.plusIcon}),Qn=o.createElement(qn,{style:Kn.minusIcon}),Jn=xe.a.f134915f,er=xe.a.h6beb5fa,tr=xe.a.b8fb87e0,sr=o.createElement(Rn.a,null);class ar extends o.Component{constructor(...e){super(...e),i()(this,"state",{hideBanner:!1,selectedTopicIds:this.props.initialSelectedTopicIds,showCart:!1}),i()(this,"_renderCartButton",(()=>{const{selected_topics_cart:e}=this.props.subtask,{selectedTopicIds:t}=this.state;return e&&e.title&&t.length>0?o.createElement(w.a,null,o.createElement(V.a,{accessibilityLabel:tr,icon:sr,onPress:this._handleOpenCart,size:"normalCompact",type:"secondary"}),o.createElement(Ln.a,{count:t.length,truncatedCountFormatter:er,unreadCountLabel:Jn,withBorder:!0})):null})),i()(this,"_renderCart",(()=>{const{subtask:e,subtaskInputs:t}=this.props,{selected_topics_cart:s}=e,a=s&&s.done_label?o.createElement(V.a,{key:"button_cancel",onPress:this._handleCloseCart,style:nr.cartButton,type:"neutral"},s.done_label.text):null;return o.createElement(Bn.a,{onMaskClick:this._handleCloseCart,style:nr.cart,type:"bottom",withMask:!0},s&&s.title?o.createElement(g,n()({align:"center",size:"large",style:nr.cartHeader,subtaskInputs:t,weight:"heavy"},s.title)):null,this._renderCartItems(),a)})),i()(this,"_handleOpenCart",(()=>{this.setState({showCart:!0}),this.props.analytics.scribe({element:"cart",action:"impression"})})),i()(this,"_handleCloseCart",(()=>{this.setState({showCart:!1}),this.props.analytics.scribe({element:"cart",action:"dismiss"})})),i()(this,"_renderBanner",(()=>{const{banner:e}=this.props.subtask,{hideBanner:t}=this.state;return e&&!t?o.createElement(Un.a,{actionLabel:e.dismiss_label.text,headline:e.title.text,onAction:this._handleBannerDismiss,onClose:this._handleBannerDismiss,subtext:e.subtitle.text}):null})),i()(this,"_renderText",(()=>{const{subtask:e,subtaskInputs:t}=this.props,{primary_text:s,secondary_text:a}=e;return o.createElement(w.a,{style:nr.textContainer},s?o.createElement(g,n()({align:"center",size:"large",subtaskInputs:t,weight:"heavy"},s)):null,a?o.createElement(g,n()({align:"center",color:"gray600",style:nr.bodyText,subtaskInputs:t},a)):null)})),i()(this,"_renderSkip",(()=>{const{skip_link:e}=this.props.subtask;return e?o.createElement(V.a,{onPress:this._handleSkipButtonClick,size:"normalCompact",style:nr.skipButton,type:"text"},e.label):null})),i()(this,"_renderDone",(()=>o.createElement(V.a,{onPress:this._handleNextButtonClick,size:"normalCompact",type:"primary"},this.props.subtask.next_link.label))),i()(this,"_renderCartItems",(()=>{const{subtask:e,subtaskInputs:t}=this.props,{selectedTopicIds:s}=this.state;return s.map((a=>o.createElement($n,{id:a,key:a,onFollowTopic:this._handleFollowTopic,onUnfollowTopic:this._handleUnfollowTopic,selectedTopicIds:s,subtaskInputs:t,topicsById:e.topic_by_id_list})))})),i()(this,"_renderItems",(()=>{const{subtask:e,subtaskInputs:t}=this.props,{selectedTopicIds:s}=this.state;return e.top_category_ids.map((a=>o.createElement(Xn,{categoriesById:e.category_by_id_list,id:a,isTopLevel:!0,key:a,onFollowTopic:this._handleFollowTopic,onUnfollowTopic:this._handleUnfollowTopic,selectedTopicIds:s,subtaskInputs:t,topicsById:e.topic_by_id_list})))})),i()(this,"_handleFollowTopic",(e=>{const{analytics:t}=this.props;t.scribe({element:"topic",action:"follow",data:{items:[Fn.a.forTopic(e)]}}),this.setState({selectedTopicIds:[...this.state.selectedTopicIds,e]})})),i()(this,"_handleUnfollowTopic",(e=>{const{analytics:t}=this.props;t.scribe({element:"topic",action:"unfollow",data:{items:[Fn.a.forTopic(e)]}}),this.setState({selectedTopicIds:this.state.selectedTopicIds.filter((t=>t!==e))})})),i()(this,"_handleBannerDismiss",(()=>{this.props.analytics.scribe({element:"prompt",action:"dismiss"}),this.setState({hideBanner:!0})})),i()(this,"_handleNextButtonClick",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:a}=this.props,{selectedTopicIds:n}=this.state;a(s,{link:t.next_link.link_id,selected_topic_ids:n}),e(t.next_link)})),i()(this,"_handleSkipButtonClick",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:a}=this.props;a(s,{link:t.skip_link.link_id}),e(t.skip_link)}))}componentDidMount(){const{analytics:e,subtask:t}=this.props;t.banner&&e.scribe({element:"prompt",action:"impression"})}render(){const{errorDialog:e,passthroughOcfScreenProps:t}=this.props,{showCart:s}=this.state,a=o.createElement(w.a,{style:nr.buttonContainer},this._renderSkip(),this._renderDone()),r=this._renderCartButton();return o.createElement(v.a,n()({},t,{leftControl:r,rightControl:a}),o.createElement(w.a,{style:U.contentArea},this._renderBanner(),this._renderText(),this._renderItems()),s?this._renderCart():null,e)}}const nr=P.a.create((e=>({buttonContainer:{flexDirection:"row"},skipButton:{marginRight:e.spaces.space12},cart:{flexGrow:1,maxHeight:"80vh",overflow:"auto",padding:e.spaces.space20,paddingBottom:e.spaces.space20},cartButton:{marginTop:e.spaces.space12},cartHeader:{marginBottom:e.spaces.space12},textContainer:{marginBottom:e.spaces.space12},bodyText:{alignSelf:"center",marginTop:e.spaces.space12,maxWidth:400}})));var rr=Object(ge.a)(Dn(ar),{section:"topics_selector"});const ir=Object(Z.createSelector)(((e,t)=>{const s=ka.f(e),[a]=s?fa.h(e,s):[];return a}),((e,t)=>{const s=ka.g(e),[a]=s?fa.h(e,s):[];return a}),((e,t)=>({avatarMedia:e,bannerMedia:t}))),or={scribeAction:W.c,updateProfileAvatar:ka.i,updateProfileBanner:ka.j};var lr=Object(X.g)(ir,or);class cr extends o.Component{constructor(...e){super(...e),i()(this,"_scribeUploadStart",(e=>{const{flowToken:t,subtaskId:s,scribeAction:a,scribeNamespace:n}=this.props;a({...n,section:e,element:"upload",action:"start"},{items:[{token:t,name:s}]})})),i()(this,"_updateMedia",(()=>{const{avatarMedia:e,bannerMedia:t,subtask:{sources:s},updateProfileAvatar:a,updateProfileBanner:n}=this.props;return new Promise(((r,i)=>{try{s.forEach((s=>{const{style:r}=s;r===h.g.Avatar&&e?(this._scribeUploadStart("select_avatar"),a(e.id)):r===h.g.Banner&&t&&(this._scribeUploadStart("select_banner"),n(t.id))})),r()}catch(e){i(e)}}))}))}render(){const{subtask:e,subtaskId:t,onNavigate:s}=this.props;return o.createElement(R,{navigationLink:e.next_link,onNavigate:s,subtaskAction:this._updateMedia,subtaskId:t})}}var dr=Object(pe.c)()(lr(cr)),ur=s("QIgh"),hr=s("8UdT"),pr=s("IcAo"),_r=s("Ka9G");var mr=o.createContext(new Set);const br=(e,t)=>({loggedInUserId:s,promotedContent:a,userId:n})=>o.createElement(mr.Consumer,null,(s=>o.createElement(jn.a,{isFollowing:s.has(n),onFollow:e(n),onUnfollow:t(n),showRelationshipChangeConfirmation:!1,size:"normalCompact",style:gr.followButton,type:"user"}))),gr=P.a.create((e=>({followButton:{alignSelf:"flex-start",marginLeft:e.spaces.space12}}))),fr=(e,t,s)=>a=>{const n=a.user.id_str;s.has(n)?t(n)():e(n)()};var kr=({onFollow:e,onUnfollow:t,currentFollows:s})=>Object(pr.a)({},ur.b,{[hr.b.User]:Object(_r.a)({decoration:br(e,t),withLink:!1,shouldScribe:!1,onClick:fr(e,t,s)})}),yr=s("ZNT5");const vr=e=>{switch(e){case Cs.a.NOT_FOUND:return o.createElement(ws.a,null);case Cs.a.NOT_ALLOWED:return o.createElement(vs.a,null);default:return Object(be.a)(`Unhandled timeline unavailable reason: ${e}`),null}};class wr extends o.Component{constructor(e){super(e),i()(this,"_getMemoizedModule",Object(ys.a)(((e,t)=>(({subtask_id:e,flow_token:t})=>Object(yr.a)({timelineId:`nux-user-recos-${e}`,getEndpoint:e=>e.URT.fetchNUXUserRecommendations,getEndpointParams:s=>({...s,subtask_id:e,flow_token:t}),context:"FETCH_NUX_USER_RECOS",perfKey:"nux-user-recos"}))({subtask_id:e,flow_token:t||""})))),i()(this,"_getModule",(()=>{const{subtaskId:e,flowToken:t}=this.props;return this._getMemoizedModule(e,t)})),i()(this,"_onFollow",(e=>()=>{const t=Object(Ts.a)([...this.state.selectedUsers]);t.add(e),this.setState({selectedUsers:t})})),i()(this,"_onUnfollow",(e=>()=>{const t=Object(Ts.a)([...this.state.selectedUsers]);t.has(e)&&t.delete(e),this.setState({selectedUsers:t})})),i()(this,"_getFollowText",((e,t,s)=>!e||s<1?t:e.concat(s.toString()))),i()(this,"_handleFollowButtonClick",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:a}=this.props;a(s,{link:t.next_link.link_id,selected_user_recommendations:[...this.state.selectedUsers]}),e(t.next_link)})),i()(this,"_handleSkipButtonClick",(()=>{const{onNavigate:e,subtask:{skip_link:t},subtaskId:s,updateFlow:a}=this.props;t&&a(s,{link:t.link_id}),t&&e(t)})),this.state={selectedUsers:new Set}}render(){const{passthroughOcfScreenProps:e,onNavigate:t,subtask:s,subtaskInputs:a}=this.props,{selectedUsers:r}=this.state;let i="";if(s.next_link_threshold_text&&s.next_link_threshold_text.length>0){const e=s.next_link_threshold_text[0];i=e&&e.text&&e.text.text}const c=s.next_link.label,d=r.size,u=this._getFollowText(i,c,d),h=o.createElement(V.a,{onPress:this._handleFollowButtonClick,size:"normalCompact",type:"primary"},u),p=s.skip_link?o.createElement(V.a,{onPress:this._handleSkipButtonClick,size:"normalCompact",type:"text"},s.skip_link.label):null,_=d>=(s.min_follow_count||0)?h:p,m=Array.from(r).join(",");return o.createElement(v.a,n()({},e,{rightControl:_}),o.createElement(w.a,{style:Cr.main},s.primary_text?o.createElement(g,n()({},s.primary_text,{nativeID:l.h,onNavigate:t,size:"xLarge",style:U.headline,subtaskInputs:a,weight:"bold"})):null,s.secondary_text?o.createElement(g,n()({},s.secondary_text,{onNavigate:t,size:"normal",style:U.subHeader,subtaskInputs:a,weight:"bold"})):null,o.createElement(mr.Provider,{value:r},o.createElement(Es.a,{entryConfiguration:kr({onFollow:this._onFollow,onUnfollow:this._onUnfollow,currentFollows:r}),fetchOptions:{follows:m},module:this._getModule(),renderUnavailable:vr,title:""}))),this.props.errorDialog)}}var Er=Object(pe.c)({page:"onboarding"})(wr);const Cr=P.a.create((e=>({main:{marginHorizontal:e.spaces.space20}})));var Ir=s("tI3i"),Sr=s.n(Ir),xr=s("TEoO"),Tr=s("tocL"),Ar=s("Re5t"),Or=s("I7xG"),Pr=s("tn7R");const Nr=e=>e.items.map((e=>e.user_id_str)).join("-"),Dr=()=>null;class Rr extends o.Component{constructor(e,t){super(e,t),i()(this,"_renderGroup",Object(Or.a)(this,(e=>e.followedUserIds),(e=>t=>{const s=t.items.every((t=>e.has(t.user_id_str)));return o.createElement(w.a,{key:t.header,style:Fr.group},o.createElement(w.a,{style:Fr.groupHeader},o.createElement(p.c,{size:"large",weight:"bold"},t.header),this.state.useCheckboxes?o.createElement(j.a,{checked:s,onChange:this._handleGroupCheckboxChange(t,s)}):null),this._renderUserCells(t.items))}))),i()(this,"_renderSearchedUsers",(e=>{const{selectedSearchHeader:t}=this.props,s=Object(Pr.a)(e);return t&&s.length?o.createElement(w.a,{key:"search-results",style:Fr.group},o.createElement(w.a,{style:Fr.groupHeader},o.createElement(p.c,{size:"large",weight:"bold"},t)),this._renderSearchUserCells(s)):null})),i()(this,"_getSearchCellDecorator",(e=>{if(this.state.useCheckboxes){const t=this._handleSearchUserUnfollowed(e.id_str);return o.createElement(j.a,{checked:!0,onChange:t})}return this._getUserFollowButton({id:e.id_str,name:e.name,screenName:e.screen_name,isFollowing:!0,onFollow:e=>y.a,onUnfollow:this._handleSearchUserUnfollowed})})),i()(this,"_handleSearchUserUnfollowed",(e=>()=>this.props.onSearchUserRemove(e))),i()(this,"_renderUserCell",(({id:e,description:t,name:s,profileImageUrl:a,screenName:n,isFollowing:r,isVerified:i,onCellClick:l,socialText:c,decorator:d,user:u})=>{const h=l(e,r),p=c?{contextType:Tr.a.Follow,text:c}:void 0;return o.createElement(w.a,{accessibilityRole:"label",key:e,style:Fr.userCellContainer},o.createElement(Xe.a,{avatarUri:a,decoration:d,description:t,displayMode:Ar.a.UserDetailed,entities:{},isVerified:i,key:e,name:s,onCellClick:h,promotedItemType:"users",screenName:n,socialContext:p,style:Fr.userCell,userId:e,withBottomBorder:!0,withLink:!1}))})),i()(this,"_getUserFollowButton",(({id:e,name:t,screenName:s,isFollowing:a,onFollow:n,onUnfollow:r})=>o.createElement(jn.a,{isFollowing:a,name:s,onFollow:n(e),onUnfollow:r(e),showRelationshipChangeConfirmation:!1,size:"normalCompact",style:Fr.followButton,type:"user"}))),i()(this,"_getUserCellDecorator",((e,t)=>{const{user:s,user_id_str:a}=e;if(this.state.useCheckboxes){const e=this._handleDecoratorChange(a,t);return o.createElement(j.a,{checked:t,onChange:e})}return this._getUserFollowButton({id:a,name:s.name,screenName:s.screen_name,isFollowing:t,onFollow:this._handleOnFollow,onUnfollow:this._handleOnUnfollow})})),i()(this,"_handleGroupCheckboxChange",((e,t)=>()=>{const s=e.items.map((e=>e.user_id_str));this._updateFollowedItems(s,!t)})),i()(this,"_handleOnFollow",(e=>()=>{this._updateFollowedItems([e],!0)})),i()(this,"_handleOnUnfollow",(e=>()=>{this._updateFollowedItems([e],!1)})),i()(this,"_handleDecoratorChange",((e,t)=>()=>{this._updateFollowedItems([e],!t)})),this.state={useCheckboxes:e.followButtonType===h.d.Checkbox}}render(){const{userGroups:e,selectedSearchUsers:t,onNearEnd:s}=this.props,{loggedInUserId:a}=this.context;return Sr()(!!a,"loggedInUserId must be defined"),o.createElement(w.a,null,this._renderSearchedUsers(t),o.createElement(xr.a,{cacheKey:`userSelectList/${a}`,identityFunction:Nr,items:e,nearEndProximityRatio:1.15,noItemsRenderer:Dr,onNearEnd:s,renderer:this._renderGroup()}))}_renderSearchUserCells(e){return o.createElement(o.Fragment,null,e.map((e=>{const t=this._getSearchCellDecorator(e);return this._renderUserCell({id:e.id_str,name:e.name,profileImageUrl:e.profile_image_url_https,screenName:e.screen_name,isFollowing:!0,isVerified:e.verified,onCellClick:this._handleSearchUserUnfollowed,decorator:t})})))}_renderUserCells(e){const{followedUserIds:t}=this.props;return o.createElement(o.Fragment,null,e.map((e=>{const{user:s,user_id_str:a}=e,n=t.has(a),r=this._getUserCellDecorator(e,n);return this._renderUserCell({id:a,description:s.description,name:s.name,profileImageUrl:s.profile_image_url_https,screenName:s.screen_name,isFollowing:n,isVerified:s.verified,onCellClick:this._handleDecoratorChange,socialText:e.social_text,decorator:r,user:s})})))}_updateFollowedItems(e,t){const{onFollow:s,onUnfollow:a}=this.props;t?s(e):a(e)}}i()(Rr,"contextType",F.a),i()(Rr,"defaultProps",{onNearEnd:y.a});const Fr=P.a.create((e=>({group:{borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small},followButton:{alignSelf:"flex-start",marginLeft:e.spaces.space12},groupHeader:{alignItems:"center",borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,flexDirection:"row",justifyContent:"space-between",paddingHorizontal:e.spaces.space20,paddingVertical:e.spaces.space12},userCell:{paddingHorizontal:e.spaces.space20},quoteTweetContainer:{marginBottom:e.spaces.space20,paddingRight:e.spaces.space20,paddingLeft:`calc(2*${e.spaces.space40})`},quoteTweet:{marginTop:e.spaces.space12},userCellContainer:{display:"flex",flexDirection:"column",justifyContent:"center"},userStats:{marginBottom:e.spaces.space12,marginLeft:e.spaces.space2}}))),Lr=[Ls.a.Users],Br="selected_user_recommendations";class Ur extends o.Component{constructor(e){super(e),i()(this,"_getPreCheckedUsers",((e=[])=>Object(Ts.a)(e.reduce(((e,t)=>{const s=t.items.reduce(((e,t)=>(t.checked_by_default&&e.push(t.user_id_str),e)),[]);return[...e,...s]}),[])))),i()(this,"_getFollowText",((e,t,s)=>!e||s<1?t:e.concat(s.toString()))),i()(this,"_handleSelectionChanged",(e=>{this.setState({selectedUsers:Object(Ts.a)(e)})})),i()(this,"_handleOnUnfollowsSelected",(e=>{const t=Object(Ts.a)([...this.state.selectedUsers]),{selectedSearchUsers:s}=this.state;for(const a of e)t.has(a)&&t.delete(a),delete s[a];this.setState({selectedUsers:t,selectedSearchUsers:s})})),i()(this,"_handleOnFollowsSelected",(e=>{const t=Object(Ts.a)([...this.state.selectedUsers]);for(const s of e)t.add(s);this.setState({selectedUsers:t})})),i()(this,"_handleFollowButtonClick",(()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:a}=this.props;a(s,{link:t.next_link.link_id,selected_user_recommendations:[...this.state.selectedUsers],searched_users:Object.keys(this.state.selectedSearchUsers)}),e(t.next_link)})),i()(this,"_handleSkipButtonClick",(()=>{const{onNavigate:e,subtask:{skip_link:t},subtaskId:s,updateFlow:a}=this.props;t&&a(s,{link:t.link_id}),t&&e(t)})),i()(this,"_handleSearchUserRemoved",(e=>this._handleOnUnfollowsSelected([e]))),i()(this,"_handleSearchSuggestionSelected",((e,t)=>{const s=e.data,{selectedSearchUsers:a,selectedUsers:n}=this.state;this._recommendedUsers.has(s.id_str)&&n.add(s.id_str),a[s.id_str]=s,this.setState({selectedSearchUsers:a,selectedUsers:n})}));const{subtaskId:t,subtaskInputs:s}=e,a=Object(Ts.a)([]),n=Object(u.d)(s,{key:Br,subtask_id:t},a);this._recommendedUsers=Object(Ts.a)(e.subtask.groups.map((e=>e.items.map((e=>e.user_id?e.user_id.toString():"")))).reduce((function(e,t){return e.concat(t)}))),this.state={selectedSearchUsers:{},selectedUsers:n&&n.size?n:this._getPreCheckedUsers(e.subtask.groups)}}render(){const{passthroughOcfScreenProps:e,onNavigate:t,subtask:s,subtaskInputs:a}=this.props,{selectedSearchUsers:r,selectedUsers:i}=this.state,c=(((s.next_link_threshold_text||{})[0]||{}).text||{}).text,d=s.next_link.label,u=(r?Object.keys(r).length:0)+i.size,h=this._getFollowText(c,d,u),p=o.createElement(V.a,{onPress:this._handleFollowButtonClick,size:"normalCompact",type:"primary"},h),_=s.skip_link?o.createElement(V.a,{onPress:this._handleSkipButtonClick,size:"normalCompact",type:"text"},s.skip_link.label):null,m=null===s.min_follow_count||void 0===s.min_follow_count?1:s.min_follow_count,b=i.size>=m?p:_,f=s.show_user_search?o.createElement(w.a,{style:[U.contentArea,jr.searchContainer]},o.createElement(Rs.c,{filter:Lr,onItemClick:this._handleSearchSuggestionSelected,placeholder:s.hint,rounded:!0,shouldAutoFocus:!0,shouldClearOnSelect:!0,source:Ls.d.WelcomeFlow})):null;return o.createElement(v.a,n()({},e,{rightControl:b}),o.createElement(w.a,null,o.createElement(w.a,{style:jr.main},s.primary_text?o.createElement(g,n()({},s.primary_text,{nativeID:l.h,onNavigate:t,size:"xLarge",style:U.headline,subtaskInputs:a,weight:"bold"})):null,s.secondary_text?o.createElement(g,n()({},s.secondary_text,{onNavigate:t,size:"normal",style:U.subHeader,subtaskInputs:a,weight:"bold"})):null),f,o.createElement(w.a,null,o.createElement(Rr,{followButtonType:s.follow_button_type,followedUserIds:i,onFollow:this._handleOnFollowsSelected,onSearchUserRemove:this._handleSearchUserRemoved,onUnfollow:this._handleOnUnfollowsSelected,selectedSearchHeader:s.custom_recommendations_header&&s.custom_recommendations_header.text||void 0,selectedSearchUsers:r,userGroups:s.groups}))),this.props.errorDialog)}}const jr=P.a.create((e=>({secondaryText:{marginBottom:e.spaces.space16},main:{marginHorizontal:e.spaces.space20},searchContainer:{marginBottom:e.spaces.space16,zIndex:1}})));var Vr=s("Qwev");class Mr extends o.Component{constructor(...e){super(...e),i()(this,"_isInteractive","interactive"===this.props.subtask.style)}componentWillUnmount(){this._interactiveInterval&&clearInterval(this._interactiveInterval),this._interactiveTimeout&&clearTimeout(this._interactiveTimeout),this._spinnerTimer&&clearTimeout(this._spinnerTimer)}componentDidMount(){const{subtask:e,onNavigate:t,pollInteractivePath:s}=this.props;if(this._isInteractive){const a=e.extension_endpoint;e.extension_polling_interval_ms&&a&&(this._interactiveInterval=setInterval((()=>{s(a).then((s=>{s&&t(e.next_link,!0)}))}),e.extension_polling_interval_ms));const n=e.extension_timeout_link;n&&(this._interactiveTimeout=setTimeout((()=>{t(n,!0)}),e.max_extension_time_ms||e.wait_time_ms))}else this._spinnerTimer=setTimeout((()=>{t(e.next_link,!0)}),e.wait_time_ms)}render(){const{onNavigate:e,passthroughOcfScreenProps:t,subtask:s,subtaskInputs:a}=this.props;return o.createElement(v.a,t,o.createElement(w.a,{style:zr.indicator},this._isInteractive&&s.header?o.createElement(w.a,{style:U.contentArea},o.createElement(Ke,{header:s.header,onNavigate:e,subtaskInputs:a}),s.detail_text?o.createElement(g,n()({},s.detail_text,{onNavigate:e,subtaskInputs:a})):null):o.createElement(Vr.a,null)))}}const zr=P.a.create((e=>({indicator:{display:"flex",flex:1,justifyContent:"center"}})));var Hr=s("7N4s");const Gr={page:"onboarding"},Yr=xe.a.c20aaf3d,Wr=xe.a.a219e217,qr=xe.a.ccaa527f;class $r extends o.Component{constructor(e,t){super(e,t),i()(this,"_handleBackAttempt",((e,t)=>{const{currentSubtask:s}=this.props,a=!s||!s.subtask_back_navigation||s.subtask_back_navigation!==h.m.Disallow,n=!this.currentPreviousNavigableSubtaskId&&this._onFirstTaskSinceStart&&a;if("POP"!==t||n)return!0;return this.currentPreviousNavigableSubtaskId&&a&&this._navigateToPreviousSubtask(),!1})),i()(this,"_sendGaOnboardingEvent",(e=>{const{googleAnalyticsSendEvent:t}=this.props;t("signup",e,"new-user")})),i()(this,"_startFlow",(e=>{const{countryCode:t,debugOverrides:s,inputFlowData:a,location:n,startFlow:r,startLocation:i,targetUserId:o,testCountryCode:l,flowName:c,createLocalApiErrorHandler:d}=e,{fromApp:h,gatedAction:p}=n.state||{},_={flow_context:{debug_overrides:s,gated_action:p,...Object.keys(i||{}).length?{start_location:i}:{start_location:{location:h?"unknown":"manual_link"}}}},m={...a,country_code:t||a.country_code,target_user_id:o||a.target_user_id,..._};"signup"===c&&this._sendGaOnboardingEvent("signup-clicked"),this._onFirstTaskSinceStart=!0,r({flow_name:c,input_flow_data:m,subtask_versions:u.a,test_country_code:l}).catch(d(Ge(c,null,this._displayFailureMessage)))})),i()(this,"_handleFlowRestart",(()=>{this._startFlow(this.props)})),i()(this,"_handleAbortFlow",(e=>{const{clearFlow:t,currentSubtask:s,location:a,history:n,onAbort:r,returnPath:i}=this.props;t({clearPersistence:!0});const o=s&&Object(u.g)(s);if(r)r();else if(i)n.replace({pathname:i,query:{flow_status:e}});else if(o===h.o.OpenHomeTimeline)n.replace("/home");else{const{loggedInUserId:e}=this.context,t=!!e;this._unblockHistory&&this._unblockHistory(),Object(Ba.a)({},{location:a})?n.goBack():t?n.replace("/home"):n.replace("/")}})),i()(this,"_displayFailureMessage",(e=>{this.setState({alertFailureMessage:e})})),i()(this,"_submitFlow",(({isTaskNavigation:e}={})=>{const{flowName:t,submitFlow:s,createLocalApiErrorHandler:a}=this.props;return s({isTaskNavigation:e}).then((e=>(this._onFirstTaskSinceStart=!1,e)),(e=>{const{failureMessage:s,shouldAbort:n}=this.props;return a(Ge(t,s,n?this._displayFailureMessage:void 0))(e)}))})),i()(this,"_handleNavigate",((e,t=!1)=>{const{navigateSubtask:s,submitFlow:a}=this.props,{is_destructive:n,subtask_id:r,subtask_navigation_context:i}=e;switch(e.suppress_client_events||this._scribeSubtaskNavigate(e),e.link_type){case h.h.Abort:a().catch(y.a),this._handleAbortFlow();break;case h.h.Subtask:s({subtaskId:r,navigationContext:i,destructive:n,fromHiddenSubtask:t});break;case h.h.Finish:case h.h.Task:this._submitFlow({isTaskNavigation:!0});break;case h.h.Deeplink:this._submitFlow(),Ae.b.navigateTo(e.url);break;case h.h.DeeplinkAndAbort:a().catch(y.a),Ae.b.navigateTo(e.url);break;case h.h.WeblinkAndAbort:a().catch(y.a),window.open(e.url,"_blank"),this._handleAbortFlow();break;case h.h.Web:Ae.b.navigateTo(e.url);break;case h.h.ChromelessWeb:window.open(e.url,"_blank");break;case h.h.DeeplinkInPlace:break;default:Object(be.a)(`Unknown Navigation Link Type ${e.link_type}`),this._handleAbortFlow()}})),i()(this,"_scribeSubtaskNavigate",(e=>{const{currentSubtask:t,scribeAction:s,flowToken:a}=this.props;if(t&&t.subtask_id){const{link_id:n}=e;s({...Gr,element:"link",action:"click"},{items:[{token:a,name:t.subtask_id,description:n}]})}})),i()(this,"_navigateToSubtask",(e=>()=>{this._handleNavigate({link_id:"",link_type:h.h.Subtask,subtask_id:e})})),i()(this,"_endFlowSubtaskAction",((e,t)=>{const{submitFlow:s}=this.props;switch(t){case h.h.Abort:s().catch(y.a).then((()=>this._handleAbortFlow(e)));break;case h.h.Finish:this._submitFlow().then((()=>this._handleAbortFlow(e)));break;default:Object(be.a)(`Unknown End Flow Type ${t}`),this._handleAbortFlow()}})),i()(this,"_render",(()=>{const{currentSubtask:e,previousNavigableSubtaskId:t,subtasks:s}=this.props,a=s.find((e=>e.subtask_id===t));return e?e.alert_dialog||e.menu_dialog?o.createElement(o.Fragment,null,this._renderSubtask(e),a&&this._renderSubtask(a)):this._renderSubtask(e):null})),i()(this,"_renderDefault",(()=>{const{currentSubtask:e,flowToken:t,history:s,subtasks:a}=this.props,n=a.map((e=>o.createElement(p.c,{key:e.subtask_id,onClick:this._navigateToSubtask(e.subtask_id)},e.subtask_id)));return o.createElement(v.a,{history:s},o.createElement(w.a,{style:{margin:5}},o.createElement(p.c,null,t),o.createElement(p.c,null,`Current Subtask: ${e?e.subtask_id:""}`),n))})),i()(this,"_handleAbortFlowOnConfirm",(()=>{this._handleAbortFlow()})),i()(this,"_onNoopInvisibleSubtask",(()=>Promise.resolve())),i()(this,"_navigateToPreviousSubtask",(()=>{const{navigateSubtask:e,previousNavigableSubtaskId:t}=this.props;e({subtaskId:t,destructive:!0})})),i()(this,"_renderErrorDialog",(()=>{const{failureMessage:e,history:t}=this.props;return o.createElement(v.a,{hideBackButton:!0,history:t},o.createElement(c.a,{confirmButtonLabel:Wr,headline:Yr,onConfirm:this._handleAbortFlowOnConfirm,text:e||ze,withCancelButton:!1}))})),i()(this,"_renderSubtask",(e=>{const{addToast:t,callInteractiveSpinnerPath:s,fetchTemporaryPassword:a,flowName:r,flowToken:i,history:l,location:d,removeContacts:u,shouldAbort:p,submitFailed:_,subtaskInputs:m,updateFlow:b}=this.props,{subtask_id:g,progress_indication:f}=e,y=p?o.createElement(c.a,{confirmButtonLabel:Wr,headline:Yr,onConfirm:this._handleAbortFlowOnConfirm,text:this.state.alertFailureMessage,withCancelButton:!1}):null,v={onNavigate:this._handleNavigate,passthroughOcfScreenProps:{backButtonType:h.m.CancelFlow?"close":"back",history:l,onBackClick:this._getBackNavigation(e)},subtaskId:g,updateFlow:b};if(e.end_flow)return this._endFlowSubtaskAction(e.end_flow.status,e.end_flow.end_flow_type),this._renderDefault();if(e.fetch_temporary_password)return o.createElement(R,{navigationLink:e.fetch_temporary_password.next_link,onNavigate:this._handleNavigate,subtaskAction:this._handleInvisibleSubtask(g,e.fetch_temporary_password,a),subtaskId:g});if(e.cta)return o.createElement(N,n()({errorDialog:y,subtask:e.cta,subtaskInputs:m},v));if(e.app_download_cta)return o.createElement(S,n()({errorDialog:y,subtask:e.app_download_cta,subtaskInputs:m},v));if(e.alert_dialog)return o.createElement(k,n()({subtask:e.alert_dialog,subtaskInputs:m},v));if(e.alert_dialog_suppress_client_events)return o.createElement(k,n()({subtask:e.alert_dialog_suppress_client_events,subtaskInputs:m},v));if(e.menu_dialog)return o.createElement(zs,n()({subtask:e.menu_dialog,subtaskInputs:m},v));if(e.open_account){const t=e.open_account;return this._sendGaOnboardingEvent("account-create"),o.createElement(R,{navigationLink:t.next_link,onNavigate:this._handleNavigate,subtaskAction:this._openAccountAction,subtaskId:g})}if(e.sign_up)return o.createElement(fn,n()({subtask:e.sign_up,subtaskInputs:m},v));if(e.sign_up_review)return o.createElement(Tn,n()({errorDialog:y,progressIndication:f,subtask:e.sign_up_review,subtaskInputs:m},v));if(e.phone_verification)return o.createElement(la,n()({errorDialog:y,flowName:r,submitFailed:_,subtask:e.phone_verification,subtaskInputs:m},v));if(e.recaptcha)return o.createElement(os,n()({errorDialog:y,subtask:e.recaptcha,subtaskInputs:m},v));if(e.privacy_options)return o.createElement(ua,n()({subtask:e.privacy_options,subtaskInputs:m},v));if(e.generic_urt)return o.createElement(xs,n()({errorDialog:y,subtask:e.generic_urt,subtaskInputs:m},v));if(e.interest_picker)return o.createElement(Vs,n()({errorDialog:y,subtask:e.interest_picker,subtaskInputs:m},v));if(e.topics_selector)return o.createElement(rr,n()({errorDialog:y,subtask:e.topics_selector,subtaskInputs:m},v));if(e.notifications_permission_prompt)return o.createElement(Ks,n()({subtask:e.notifications_permission_prompt,subtaskInputs:m},v));if(e.open_home_timeline)return"signup"===r&&this._sendGaOnboardingEvent("complete-NUX"),o.createElement(R,{navigationLink:e.open_home_timeline.next_link,onNavigate:this._handleNavigate,subtaskAction:this._onNoopInvisibleSubtask,subtaskId:g});if(e.open_link)return o.createElement(ea,{flowName:r,onNavigate:this._handleNavigate,subtask:e.open_link,subtaskId:g});if(e.upload_media)return o.createElement(dr,{flowToken:i,onNavigate:this._handleNavigate,subtask:e.upload_media,subtaskId:g});if(e.user_recommendations_list)return o.createElement(Ur,n()({errorDialog:y,subtask:e.user_recommendations_list,subtaskInputs:m},v));if(e.user_recommendations_urt)return o.createElement(Er,n()({errorDialog:y,flowToken:i,subtask:e.user_recommendations_urt,subtaskInputs:m},v));if(e.update_users)return o.createElement(R,{navigationLink:e.update_users.next_link,onNavigate:this._handleNavigate,subtaskAction:this._handleInvisibleSubtask(g,e.update_users,this._updateUsersAction),subtaskId:g});if(e.enter_password)return o.createElement(Zt,n()({errorDialog:y,subtask:e.enter_password,subtaskInputs:m},v));if(e.settings_list){const{settings_list:s}=e;return o.createElement(Hr.a.Consumer,null,(({isModal:e})=>o.createElement(Xa,n()({addToast:t,errorDialog:y,isModal:e,removeContacts:u,subtask:s,subtaskInputs:m},v))))}if(e.email_contacts_sync)return o.createElement(Re,n()({errorDialog:y,location:d,subtask:e.email_contacts_sync,subtaskInputs:m},v));if(e.select_avatar)return o.createElement(Ta,n()({errorDialog:y,location:d,subtask:e.select_avatar,subtaskInputs:m},v));if(e.select_banner)return o.createElement(La,n()({errorDialog:y,location:d,subtask:e.select_banner,subtaskInputs:m},v));if(e.security_key){let t;return window.PublicKeyCredential||(t=qr),o.createElement(ba,n()({errorDialog:y,errorMessage:t,subtask:e.security_key,subtaskInputs:m},v))}return e.enter_date?o.createElement(Qe,n()({errorDialog:y,subtask:e.enter_date,subtaskInputs:m},v)):e.enter_text?o.createElement(ls,n()({errorDialog:y,subtask:e.enter_text,subtaskInputs:m},v)):e.email_verification?o.createElement($e,n()({errorDialog:y,flowName:r,submitFailed:_,subtask:e.email_verification,subtaskInputs:m},v)):e.enter_username?o.createElement(gs,n()({errorDialog:y,subtask:e.enter_username,subtaskInputs:m},v)):e.enter_email?o.createElement(Ot,n()({errorDialog:y,subtask:e.enter_email,subtaskInputs:m},v)):e.enter_phone?o.createElement(ns,n()({errorDialog:y,subtask:e.enter_phone,subtaskInputs:m},v)):e.choice_selection?o.createElement(G,n()({subtask:e.choice_selection,subtaskInputs:m},v)):e.contacts_live_sync_permission_prompt?o.createElement(ke,n()({subtask:e.contacts_live_sync_permission_prompt,subtaskInputs:m},v)):e.wait_spinner?o.createElement(Mr,{onNavigate:this._handleNavigate,passthroughOcfScreenProps:v.passthroughOcfScreenProps,pollInteractivePath:s,subtask:e.wait_spinner,subtaskId:g,subtaskInputs:m}):e.check_logged_in_account?o.createElement(B,n()({onNavigate:this._handleNavigate,subtask:e.check_logged_in_account,subtaskId:g},v)):this._renderDefault()})),i()(this,"_getBackNavigation",(e=>{const{subtask_back_navigation:t=h.m.Allow}=e;return t===h.m.CancelFlow?()=>this._handleAbortFlow():this.currentPreviousNavigableSubtaskId&&t===h.m.Allow?this._navigateToPreviousSubtask:void 0})),i()(this,"_scribeSubtaskView",(()=>{const{currentSubtask:e,scribeAction:t,flowToken:s}=this.props;if(e&&e.subtask_id&&!Object(u.j)(e)){t({...Gr,element:"view",action:"impression"},{items:[{token:s,name:e.subtask_id}]})}})),i()(this,"_openAccountAction",(()=>{const{scribeAction:e,verifyCredentials:t}=this.props,{encryptedReferer:s,encryptedReferralDetails:a}=Object(ta.d)()||{};return t().then((()=>{this._maybeScribeAppInstallBanner(),e({page:"signup",action:"success"},{referer:s,external_referer:a})}))})),i()(this,"_updateUsersAction",((e,t)=>{const{createLocalApiErrorHandler:s,fetchUsers:a}=this.props,n=null==t?void 0:t.users;n&&n.length&&a(n.map((e=>e.id_str))).catch(s({showToast:!0}))})),i()(this,"_maybeScribeAppInstallBanner",(()=>{const{scribeAction:e}=this.props;x.a.hasPromptWaiting()&&e({page:"signup",component:"install_banner",action:"waiting"})})),this.state={alertFailureMessage:""}}UNSAFE_componentWillReceiveProps(e){this.props.flowName!==e.flowName&&this._startFlow(e)}componentDidUpdate(e){const{currentSubtask:t}=e,{currentSubtask:s}=this.props,a=t&&t.subtask_id;s&&s.subtask_id!==a&&this._scribeSubtaskView()}UNSAFE_componentWillMount(){this._startFlow(this.props)}componentDidMount(){const{googleAnalyticsPageView:e,history:t,scribePageImpression:s}=this.props;s(Gr),e(Gr),this._unblockHistory=t.block(this._handleBackAttempt)}componentWillUnmount(){this._unblockHistory&&this._unblockHistory(),this.props.clearFlow()}render(){const{currentSubtask:e,shouldEndFlow:t}=this.props;t&&this._handleAbortFlow();let s=this.props.fetchStatus;return s===Ce.a.FAILED||e||(s=Ce.a.LOADING),o.createElement(w.a,{style:Xr.root},o.createElement(Ie.a,{fetchStatus:s,onRequestRetry:this._handleFlowRestart,render:this._render,renderFailure:this._renderErrorDialog,retryable:!this.props.shouldAbort}))}_handleInvisibleSubtask(e,t,s){return()=>new Promise(((a,n)=>{a(s(e,t))}))}get currentPreviousNavigableSubtaskId(){return this.props.previousNavigableSubtaskId}}i()($r,"contextType",F.a),i()($r,"defaultProps",{inputFlowData:{}});const Xr=P.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,flexGrow:1,flexShrink:1}})));t.default=Object(pe.c)(Gr)(he($r))},"i+/A":function(e,t,s){"use strict";(function(t,a){var n=65536,r=4294967295;var i=s("KLyV").Buffer,o=t.crypto||t.msCrypto;o&&o.getRandomValues?e.exports=function(e,t){if(e>r)throw new RangeError("requested too many random bytes");var s=i.allocUnsafe(e);if(e>0)if(e>n)for(var l=0;l<e;l+=n)o.getRandomValues(s.slice(l,l+n));else o.getRandomValues(s);if("function"==typeof t)return a.nextTick((function(){t(null,s)}));return s}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,s("fRV1"),s("F63i"))},nS1w:function(e,t,s){"use strict";s.d(t,"c",(function(){return h})),s.d(t,"d",(function(){return p})),s.d(t,"b",(function(){return m})),s.d(t,"e",(function(){return b}));var a=s("3XMw"),n=s.n(a),r=s("mtvn");const i={1:{label:n.a.hac89abf,numDays:31},2:{label:n.a.ef30b309,numDays:28,numDaysLeapYear:29},3:{label:n.a.b56920fa,numDays:31},4:{label:n.a.b1a0f1ec,numDays:30},5:{label:n.a.daf779c8,numDays:31},6:{label:n.a.c6ad074d,numDays:30},7:{label:n.a.f1db106b,numDays:31},8:{label:n.a.i4e80b7a,numDays:31},9:{label:n.a.efa6cc1d,numDays:30},10:{label:n.a.f40a0cbe,numDays:31},11:{label:n.a.ac74a31c,numDays:30},12:{label:n.a.i6c1e4b2,numDays:31}},o=e=>({label:`${e}`,value:`${e}`}),l=Object(r.a)(1,29).map(o),c=Object(r.a)(1,30).map(o),d=Object(r.a)(1,31).map(o),u=Object(r.a)(1,32).map(o),h=()=>Object.keys(i).map((e=>({label:i[e].label,value:e}))),p=(e=1,t,s,a)=>{const n=t||new Date(Date.now()).getFullYear();return Object(r.a)(e,n+1).reverse().filter((e=>2===a&&29===s?_(e):e)).map(o)},_=e=>1===new Date(e,1,29).getMonth(),m=(e,t)=>{if(!e)return u;switch(2===e&&(!t||t&&_(t))?i[e].numDaysLeapYear:i[e].numDays){case 28:return l;case 29:return c;case 30:return d;case 31:default:return u}},b=(e,t,s)=>{if("number"==typeof e&&"number"==typeof t&&"number"==typeof s){return`${s}-${t<10?`0${t}`:`${t}`}-${e<10?`0${e}`:`${e}`}`}return""};t.a={getFormattedDateValue:b}},v84o:function(e,t,s){"use strict";var a=s("180P"),n=s("doI8");t.a=({urtUrl:e,timelinePrefix:t="generic-timeline-"})=>{const{urtEndpointOptions:s,url:r}=e,{requestParams:i,cacheId:o}=s||{};return Object(n.b)({timelineId:o||`${t}${Object(a.a)(e)}`,endpointUrl:r,endpointParams:i||{}})}},yuM6:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return r}));var a=s("ERkP"),n=s("6/RC");class r extends a.Component{componentDidMount(){const{code:e,error:t,scope:s,state:a}=this.props.location.query,r={callback_url:`https://${window.location.hostname}${window.location.pathname}`,code:e,error:t,scope:s,state:a},i=n.canUseDOM&&window.opener;i?(i.postMessage(r,`https://${window.location.hostname}`),window.close(),i.focus()):this.props.history.push("/")}render(){return null}}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.Ocf.0f01ab05.js.map